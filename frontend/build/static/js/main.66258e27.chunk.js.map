{"version":3,"sources":["assets/files.js","components/TextEditor/TextEditor.js","actions/index.js","components/MultilanguageEditor/multiFile.js","actions/outputAction.js","components/IDE.js","components/DrawingBoard/random.js","components/DrawingBoard/element/newElement.js","components/DrawingBoard/math.js","components/DrawingBoard/element/bounds.js","components/DrawingBoard/element/handlerRectangles.js","components/DrawingBoard/element/collision.js","components/DrawingBoard/element/resizeTest.js","components/DrawingBoard/element/typeChecks.js","components/DrawingBoard/keys.js","components/DrawingBoard/element/textWysiwyg.js","components/DrawingBoard/utils.js","components/DrawingBoard/element/textElement.js","components/DrawingBoard/scene/scrollbars.js","components/DrawingBoard/scene/selection.js","components/DrawingBoard/renderer/roundRect.js","components/DrawingBoard/renderer/renderElement.js","components/DrawingBoard/renderer/renderScene.js","components/DrawingBoard/scene/data.js","components/DrawingBoard/scene/comparisons.js","components/DrawingBoard/scene/createScene.js","components/DrawingBoard/shapes.js","components/DrawingBoard/history.js","components/DrawingBoard/components/Popover.js","components/DrawingBoard/components/ContextMenu.js","components/DrawingBoard/actions/manager.js","components/DrawingBoard/actions/actionDeleteSelected.js","components/DrawingBoard/zindex.js","components/DrawingBoard/actions/actionZindex.js","components/DrawingBoard/actions/actionSelectAll.js","components/DrawingBoard/components/ButtonSelect.js","components/DrawingBoard/components/ColorPicker.js","components/DrawingBoard/components/panels/PanelColor.js","components/DrawingBoard/actions/actionProperties.js","components/DrawingBoard/actions/actionCanvas.js","components/DrawingBoard/components/EditableText.js","components/DrawingBoard/actions/actionExport.js","components/DrawingBoard/actions/actionStyles.js","components/DrawingBoard/components/Panel.js","components/DrawingBoard/components/panels/PanelTools.js","components/DrawingBoard/components/panels/PanelSelection.js","components/DrawingBoard/components/panels/PanelCanvas.js","components/DrawingBoard/components/panels/PanelExport.js","components/DrawingBoard/components/SidePanel.js","components/DrawingBoard/index.js","components/Recorder/Recorder.js","components/Player/Player.js","components/RecorderForm/recorderForm.js","reducers/filenameSelection.js","reducers/outputModalReducer.js","reducers/languageSelection.js","reducers/index.js","components/LiveClasses/liveClassEmitter.js","components/LiveClasses/liveClassReceiver.js","components/Card/card.js","components/Lectures/allLectures.js","index.js","components/StartingComponent/startingCompoent.js","assets/Gear-0.2s-200px.png"],"names":["files","name","language","value","TextEditor","props","srcDoc","useSelector","state","srcDocs","modalActive","outputModal","fileName","dispatch","useDispatch","file","handleCloseModal","type","className","id","disabled","onClick","console","log","style","color","backgroundColor","padding","borderRadius","height","width","theme","path","defaultLanguage","defaultValue","saveViewState","onChange","cursorSmoothCaretAnimation","isOpen","contentLabel","onRequestClose","overlayClassName","ariaHideApp","title","sandbox","frameBorder","MultiFile","useState","outputValue","setOutputValue","inputValue","setInputValue","words","split","code","i","length","input","a","url","axios","post","stdin","versionIndex","script","runCode","then","e","data","output","event","CustomEvent","detail","document","documentElement","dispatchEvent","class","options","fontSize","fontWeight","fontFamily","beforeMount","monaco","editor","defineTheme","base","inherit","rules","colors","rows","cols","target","placeholder","App","refresh","randomSeed","Math","floor","random","withCustomMathRandom","seed","cb","imul","LCG","result","newElement","x","y","strokeColor","fillStyle","strokeWidth","roughness","opacity","element","nextId","isSelected","duplicateElement","copy","distanceBetweenPointAndSegment","x1","y1","x2","y2","xx","yy","C","D","lenSquare","param","dx","dy","hypot","rotate","angle","cos","sin","getElementAbsoluteCoords","getDiamondPoints","topX","rightX","rightY","getArrowPoints","distance","minSize","min","xs","ys","PI","x3","y3","handlerRectangles","scrollX","scrollY","elementX1","elementX2","elementY1","elementY2","handlers","marginX","marginY","abs","nw","se","hitTest","px","py","tx","ty","b","forEach","ex","ey","rx","ry","qx","qy","r","q","max","t","topY","bottomX","bottomY","leftX","leftY","x4","y4","warn","Error","resizeTest","filter","Object","keys","key","handler","getElementWithResizeHandler","elements","reduce","resizeHandle","isTextElement","KEYS","META_KEY","test","window","navigator","platform","textWysiwyg","initText","font","onSubmit","editable","createElement","stopEvent","ev","stopPropagation","handleSubmit","innerText","cleanup","onblur","onkeydown","onpaste","removeEventListener","body","removeChild","contentEditable","tabIndex","dataset","assign","position","top","left","transform","textAlign","display","outline","whiteSpace","minHeight","preventDefault","text","clipboardData","getData","replace","textContent","addEventListener","appendChild","focus","selection","getSelection","range","createRange","selectNodeContents","removeAllRanges","addRange","capitalizeString","str","charAt","toUpperCase","slice","isInputLike","HTMLElement","HTMLInputElement","HTMLTextAreaElement","HTMLSelectElement","measureText","line","offsetWidth","offsetHeight","span","overflow","baseline","offsetTop","redrawTextBoundingBox","metrics","getScrollBars","canvasWidth","canvasHeight","minX","Infinity","maxX","minY","maxY","leftOverflow","rightOverflow","topOverflow","bottomOverflow","horizontalScrollBar","SCROLLBAR_MARGIN","verticalScrollBar","SCROLLBAR_WIDTH","horizontal","vertical","clearSelection","newElements","deleteSelectedElements","el","getSelectedIndices","selectedIndices","index","push","someElementIsSelected","some","getSelectedAttribute","getAttribute","attributes","Array","from","Set","map","roundRect","context","radius","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","fill","stroke","generator","rough","renderElement","rc","fillRect","shape","rectangle","globalAlpha","translate","draw","polygon","ellipse","shapes","fillText","actualBoundingBoxAscent","renderScene","canvas","sceneState","offsetX","offsetY","renderScrollbars","renderSelection","getContext","viewBackgroundColor","clearRect","selectedElements","lineDash","getLineDash","setLineDash","strokeRect","margin","values","scrollBars","devicePixelRatio","strokeStyle","scrollBar","saveFile","link","setAttribute","click","remove","restore","savedElements","savedState","undefined","appState","getElementAtPosition","hitElement","SHAPES","icon","viewBox","d","shapesShortcutKeys","SceneHistory","this","recording","stateHistory","redoStack","JSON","stringify","newEntry","entry","skipRecording","parse","splice","currentEntry","generateCurrentEntry","entryToRestore","pop","restoreEntry","Popover","children","onCloseRequest","onContextMenu","contextMenuNode","ContextMenu","option","idx","ContextMenuOption","label","action","getContextMenuNode","div","handleClose","unmountComponentAtNode","params","of","render","ActionManager","actions","updater","sort","keyPriority","keyTest","perform","contextItemLabel","contextMenuOrder","PanelComponent","updateData","formState","actionDeleteSelected","swap","indexA","indexB","moveOneLeft","indicesToMove","isSorted","moveOneRight","reversedIndicesToMove","moveAllLeft","leftMostElements","reverse","concat","pos","moveAllRight","rightMostElements","actionSendBackward","shiftKey","altKey","actionBringForward","actionSendToBack","actionBringToFront","actionSelectAll","elem","ButtonSelect","TwitterPicker","lazy","ColorPicker","useEffect","allSpans","getElementsByTagName","c","divs","React","isActive","setActive","Suspense","fallback","changedColor","hex","onPaste","PanelColor","onColorChange","colorValue","changeProperty","callback","actionChangeStrokeColor","currentItemStrokeColor","actionChangeBackgroundColor","currentItemBackgroundColor","actionChangeFillStyle","actionChangeStrokeWidth","actionChangeSloppiness","actionChangeOpacity","actionChangeFontSize","actionChangeFontFamily","actionChangeViewBackgroundColor","actionClearCanvas","confirm","EditableText","edit","setState","maxLength","handleEdit","onBlur","handleBlur","onKeyDown","autoFocus","Component","actionChangeProjectName","actionChangeExportBackground","exportBackground","checked","actionSaveScene","serialized","version","source","location","origin","encodeURIComponent","saveAsJSON","actionLoadScene","loadedElements","reader","FileReader","accept","onchange","readAsText","alert","Promise","resolve","onloadend","readyState","DONE","loadFromJSON","copiedStyles","actionCopyStyles","find","actionPasteStyles","pastedElement","_a","_b","_c","_d","_e","_f","_g","Panel","defaultCollapsed","hide","collapsed","setCollapsed","PanelTools","activeTool","onToolChange","PanelSelection","actionManager","syncActionResult","renderAction","PanelCanvas","ClipboardIcon","probablySupportsClipboard","HTMLCanvasElement","prototype","clipboard","PanelExport","onExportCanvas","SidePanel","elementType","hasBackground","hasStroke","hasText","exportPadding","subCanvasX1","subCanvasX2","subCanvasY1","subCanvasY2","tempCanvas","toDataURL","toBlob","blob","write","ClipboardItem","err","exportCanvas","history","DEFAULT_PROJECT_NAME","date","Date","year","getFullYear","month","getMonth","day","getDate","hr","getHours","getMinutes","secs","getSeconds","getDateTime","resetCursor","cursor","addTextElement","lastCanvasWidth","lastCanvasHeight","lastMouseUp","viewportCoordsToSceneCoords","clientX","clientY","startTime","res","forceUpdate","draggingElement","resizingElement","currentItemFont","cursorX","cursorY","onResize","getCurrentCursorPosition","activeElement","blur","keyCode","handleKeyDown","step","includes","toLowerCase","redoOnce","undoOnce","copyToClipboard","writeText","pasteFromClipboard","readText","addElementsFromPaste","handleWheel","deltaX","deltaY","paste","parsedElements","isArray","parsedElement","elementsCenterX","elementsCenterY","duplicate","registerAction","localStorage","getItem","restoreFromLocalStorage","innerWidth","innerHeight","onCut","setData","onCopy","ref","removeWheelEventListener","passive","scale","getContextMenuItems","onMouseDown","button","isOverHorizontalScrollBar","isOverVerticalScrollBar","isOverScrollBars","isResizingElements","draggingOccured","elementIsAddedToSelection","resizeElement","duplicates","textX","textY","snappedToCenterPosition","getTextWysiwygSnappedToCenterPosition","elementCenterX","elementCenterY","wysiwygX","wysiwygY","lastX","lastY","onMouseMove","sign","selectionX1","selectionY1","selectionX2","selectionY2","setSelection","onMouseUp","resumeRecording","onDoubleClick","elementAtPosition","Boolean","buttons","elementClickedInside","getElementContainingPosition","setItem","isRecording","pushEntry","clearRedoStack","Preloader","src","img","border","RecorderForm","lectureName","lectureType","lectureCreator","languageType","useHistory","languageList","select","getElementById","add","creator","pathname","filenameReducer","outputModalReducer","languageReducer","allReducers","combineReducers","LiveClassEmitter","socketRef","useRef","stream","setStream","current","io","myVideo","mediaDevices","getUserMedia","video","audio","srcObject","eventName","sendData","getElementsByClassName","emit","startLive","peer","Peer","initiator","trickle","on","signalData","signal","stopLive","flexDirection","zIndex","paddingRight","playsInline","muted","autoPlay","LiveClassReceiver","callerSignal","setCallerSignal","userVideo","eve","MouseEvent","bubbles","cancelable","tar","nodeName","answerCall","Card","mainWindow","lectures","lecture","playButton","nameHeading","innerHTML","AllLectures","setLectures","lecturesArray","isLoading","setLoading","firebase","firestore","collection","orderBy","limit","get","doc","apps","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","middleware","thunk","composeEnhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","allReducer","applyMiddleware","ReactDOM","StrictMode","exact","component","DrawingBoard","childValue","Recording","events","lastMouse","lastKey","lastKeyClass","time","now","pageX","pageY","Mp3Recorder","MicRecorder","bitRate","prefix","startRecording","start","catch","error","stopRecording","recordingString","createdAt","FieldValue","serverTimestamp","audioString","stop","getMp3","buffer","File","lastModified","readAsDataURL","storageRef","storage","removeItem","child","putString","snapshot","IDE","parentCallBack","childData","ide","setRefresh","drawing","setDrawing","offsetPlay","videoPlayer","recordingJsonValue","where","FieldPath","documentId","snap","getDownloadURL","audioPlayer","fakeCursor","startPlay","paused","pausefunction","playfunction","frames","handleButtonEvents","clickEvent","flashClass","drawEvent","clearInterval","setInterval","classList","setTimeout","pause","curTime","currentTime","play","controls","controlsList","module","exports"],"mappings":"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","file":"static/js/main.66258e27.chunk.js","sourcesContent":["const someJSCodeExample = ``;\r\n\r\nconst someCSSCodeExample = ``;\r\n\r\nconst someHTMLCodeExample = ``;\r\n\r\nconst someCCodeExample = ``;\r\n\r\nconst someCpp99CodeExample = ``\r\n\r\nconst someCppCodeExample = ``\r\n\r\nconst someCpp14CodeExample = ``\r\n\r\nconst someCpp17CodeExample = ``\r\n\r\nconst somePython2CodeExample = ``\r\n\r\nconst somePython3CodeExample = ``\r\n\r\nconst files = {\r\n  \"script.js\": {\r\n    name: \"script.js\",\r\n    language: \"javascript\",\r\n    value: someJSCodeExample\r\n  },\r\n  \"style.css\": {\r\n    name: \"style.css\",\r\n    language: \"css\",\r\n    value: someCSSCodeExample\r\n  },\r\n  \"index.html\": {\r\n    name: \"index.html\",\r\n    language: \"html\",\r\n    value: someHTMLCodeExample\r\n  },\r\n  \"c\": {\r\n    name: \"main.c\",\r\n    language: \"cpp\",\r\n    value: someCCodeExample\r\n  },\r\n  \"c99\": {\r\n    name: \"main.cpp\",\r\n    language: \"cpp\",\r\n    value: someCpp99CodeExample\r\n  },\r\n  \"cpp\": {\r\n    name: \"main.cpp\",\r\n    language: \"cpp\",\r\n    value: someCppCodeExample\r\n  },\r\n  \"cpp14\": {\r\n    name: \"main.cpp\",\r\n    language: \"cpp\",\r\n    value: someCpp14CodeExample\r\n  },\r\n  \"cpp17\": {\r\n    name: \"main.cpp\",\r\n    language: \"cpp\",\r\n    value: someCpp17CodeExample\r\n  },\r\n  \"python2\": {\r\n    name: \"python\",\r\n    language: \"python\",\r\n    value: somePython2CodeExample\r\n  },\r\n  \"python3\": {\r\n    name: \"python\",\r\n    language: \"python\",\r\n    value: somePython3CodeExample\r\n  }\r\n};\r\n\r\nexport default files;\r\n","import React from \"react\";\r\nimport ReactModal from \"react-modal\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport Editor from \"@monaco-editor/react\";\r\nimport { js, css, html, outputModalTrue, outputModalFalse, setSrcDocs } from '../../actions'\r\nimport files from \"../../assets/files\";\r\nimport \"./style.css\"\r\n\r\nfunction TextEditor(props) {\r\n  const srcDoc = useSelector(state => state.srcDocs);\r\n  const modalActive = useSelector(state => state.outputModal);\r\n\r\n  const fileName = useSelector(state => state.fileName);\r\n  const dispatch = useDispatch();\r\n\r\n  const file = files[fileName];\r\n\r\n  function handleEditorChange(value) {\r\n    file.value = value;\r\n  }\r\n\r\n  const handleOutput = () => {\r\n    dispatch(setSrcDocs());\r\n    dispatch(outputModalTrue());\r\n    console.log(\"l\")\r\n  }\r\n\r\n  function handleCloseModal() {\r\n    dispatch(outputModalFalse());\r\n  }\r\n\r\n  return (\r\n    <div className = \"text-editor\">\r\n\r\n    {/* Sidebar   */}\r\n    <div className = \"editor-sidebar\">\r\n    <div className = \"sidebar-heading\">\r\n      <span id = \"explorer-spam\" >Explorer</span>\r\n      <button className = \"sidebar-add-file\">\r\n        {/* <i className = \"fas fa-plus\" style = {{color : \"#fffffe\" }}></i>  */}\r\n      </button>\r\n    </div>\r\n    <div className = \"sidebar-navbutton\">\r\n\r\n     <button\r\n        className = \"htmlfile\"\r\n        disabled={fileName === \"index.html\"}\r\n        onClick={() => dispatch(html()) }\r\n      >\r\n      <i className =\"fab fa-html5\"></i> <span className = \"buttontext html\" >{files[\"index.html\"].name} </span>\r\n     </button>\r\n\r\n     <button\r\n        className = \"cssfile\"\r\n        disabled={fileName === \"style.css\"}\r\n        onClick={() => dispatch(css())}\r\n      > \r\n      <i className = \"fab fa-css3-alt\"></i> <span className = \"buttontext style\" >{files[\"style.css\"].name} </span>\r\n      </button>\r\n\r\n      <button\r\n        className = \"jsfile\"\r\n        disabled={fileName === \"script.js\"}\r\n        onClick={() => dispatch(js())}\r\n      >\r\n      <i className=\"fab fa-js-square\"></i> <span className = \"buttontext script\" >{files[\"script.js\"].name} </span>\r\n      </button>\r\n\r\n\r\n    </div>\r\n    <div className = \"sidebar-footer\">\r\n    <button onClick={handleOutput} style = {{color : \"white\", backgroundColor: \"green\", padding: \"5px\", borderRadius: \"5px\"}} className=\"output\"><i style = {{color : \"white\"}} className=\"fas fa-play\"></i><span className = \"outputtext\" style = {{color : \"white\", backgroundColor: \"green\"}}> See Output</span></button>\r\n    </div>\r\n    </div>\r\n\r\n    {/* Editor */}\r\n    <div className = \"editor\">\r\n    <Editor\r\n            height=\"100vh\"\r\n            width=\"94vw\"\r\n            theme=\"vs-light\"\r\n            path={file.name}\r\n            defaultLanguage={file.language}\r\n            defaultValue={file.value}\r\n            saveViewState={true}\r\n            onChange={handleEditorChange}\r\n            cursorSmoothCaretAnimation = \"true\"\r\n            value={file.value}\r\n          />\r\n    </div>\r\n\r\n\r\n    <ReactModal\r\n            className=\"outputModal Modal\"\r\n            isOpen={modalActive}\r\n            contentLabel=\"onRequestClose Example\"\r\n            onRequestClose={handleCloseModal}\r\n            overlayClassName=\"Overlay\"\r\n            ariaHideApp={false}\r\n          >\r\n           \r\n            <div className=\"closeButton\"><i className=\"fas fa-window-close\" onClick={handleCloseModal}></i></div>\r\n            <iframe\r\n              srcDoc={srcDoc}\r\n              title=\"output\"\r\n              className=\"outputiframe\"\r\n              sandbox=\"allow-scripts\"\r\n              frameBorder=\"0\"\r\n            />\r\n          \r\n          </ReactModal>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TextEditor;\r\n","export const js = () => {\r\n    return {\r\n        type: \"js\"\r\n    };\r\n};\r\n\r\nexport const css = () => {\r\n    return {\r\n        type: \"css\"\r\n    };\r\n};\r\n\r\nexport const html = () => {\r\n    return {\r\n        type: \"html\"\r\n    };\r\n};\r\n\r\nexport const outputModalTrue = () => {\r\n    return {\r\n        type: \"outputtrue\"\r\n    };\r\n};\r\n\r\nexport const outputModalFalse = () => {\r\n    return {\r\n        type: \"outputfalse\"\r\n    };\r\n};\r\n\r\nexport const setSrcDocs = () => {\r\n    return {\r\n        type : \"setSrcdoc\",\r\n    }\r\n}\r\n\r\nexport const c = () => {\r\n    return {\r\n        type : \"c\",\r\n    }\r\n}\r\n\r\nexport const c99 = () => {\r\n    return {\r\n        type : \"c99\",\r\n    }\r\n}\r\n\r\nexport const cpp = () => {\r\n    return {\r\n        type : \"cpp\",\r\n    }\r\n}\r\n\r\nexport const cpp14 = () => {\r\n    return {\r\n        type : \"cpp14\",\r\n    }\r\n}\r\n\r\nexport const cpp17 = () => {\r\n    return {\r\n        type : \"cpp17\",\r\n    }\r\n}\r\n\r\nexport const python2 = () => {\r\n    return {\r\n        type : \"python2\",\r\n    }\r\n}\r\n\r\nexport const python3 = () => {\r\n    return {\r\n        type : \"python3\",\r\n    }\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport Editor from \"@monaco-editor/react\";\r\nimport files from \"../../assets/files\";\r\nimport { c, c99, cpp, cpp14, cpp17, python2, python3 } from \"../../actions\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { runCode } from \"../../actions/outputAction\";\r\nimport \"./style.css\";\r\nfunction MultiFile(props) {\r\n  const [language, setLanguage] = useState(props.language);\r\n  const fileName = useSelector((state) => state.language);\r\n  const dispatch = useDispatch();\r\n  const [outputValue, setOutputValue] = useState(\"\");\r\n  const [inputValue, setInputValue] = useState(\"\");\r\n  const file = files[language];\r\n\r\n  function handleEditorChange(value) {\r\n    file.value = value;\r\n  }\r\n\r\n  function handleEditorWillMount(monaco) {\r\n    monaco.editor.defineTheme(\"my-cool-theme\", {\r\n      base: \"vs-dark\",\r\n      inherit: true,\r\n      rules: [],\r\n      colors: { \"editor.background\": \"#293738\" }\r\n    });\r\n  }\r\n\r\n  const languageList = {\r\n    \"Python 2\": \"python2\", \r\n    C: \"c\",\r\n    \"C-99\": \"c99\",\r\n    \"C++\": \"cpp\",\r\n    \"C++ 14\": \"cpp14\",\r\n    \"C++ 17\": \"cpp17\",\r\n    \"Python 3\": \"python3\",\r\n  };\r\n\r\n  // useEffect(() => {\r\n  //   const select = document.getElementsByClassName(\"language\")[0]\r\n  //   for (let key in languageList) {\r\n  //     var option = document.createElement(\"option\");\r\n  //     option.text = key;\r\n  //     option.value = languageList[key];\r\n  //     option.className = languageList[key];\r\n  //     select.add(option);\r\n  //   }\r\n\r\n  //   select.addEventListener(\"change\", (e) => {\r\n  //     setLanguage(select.value);\r\n  //     if (select.value === \"c\") {\r\n  //       dispatch(c());\r\n  //     }\r\n  //     if (select.value === \"c99\") {\r\n  //       dispatch(c99());\r\n  //     }\r\n  //     if (select.value === \"cpp\") {\r\n  //       dispatch(cpp());\r\n  //     }\r\n  //     if (select.value === \"cpp\") {\r\n  //       dispatch(cpp());\r\n  //     }\r\n  //     if (select.value === \"cpp14\") {\r\n  //       dispatch(cpp14());\r\n  //     }\r\n  //     if (select.value === \"cpp17\") {\r\n  //       dispatch(cpp17());\r\n  //     }\r\n  //     if (select.value === \"python2\") {\r\n  //       dispatch(python2());\r\n  //     }\r\n  //     if (select.value === \"python3\") {\r\n  //       dispatch(python3());\r\n  //     }\r\n  //   });\r\n  // }, []);\r\n\r\n  function userOutput(e) {\r\n    console.log(e);\r\n  }\r\n\r\n  function handleInput(e) {\r\n    setInputValue(e.target.value);\r\n  }\r\n\r\n  function handleOutput() {\r\n    const words = file.value.split(\"\\r\");\r\n    let code = \"\";\r\n    for (let i = 0; i < words.length; i++) {\r\n      code = code + words[i];\r\n    }\r\n    dispatch(runCode(language, code, inputValue)).then((e) => {\r\n      setOutputValue(e.data.output);\r\n      const data = {\r\n        output: e.data.output,\r\n      };\r\n      //creating a custom like predefined events like click or mousemove and more\r\n      const event = new CustomEvent(\"output\", { detail: data });\r\n      //dispatching the event in document.documentElement where we listen for it in while recording\r\n      document.documentElement.dispatchEvent(event);\r\n    });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"multilanguageIde\">\r\n        <div className=\"navbar\">\r\n        <div className=\"editor\">\r\n        <div className=\"navbar\">\r\n          <span className=\"fileName\">main \r\n          {language === \"python2\" || language === \"python3\" ? \".py\": \".cpp\"}\r\n          </span>\r\n          <div className=\"optionButton\">\r\n            <button\r\n              className=\"showCodeOutput\"\r\n              onClick={handleOutput}\r\n            >\r\n              <i class=\"fas fa-play\"></i> Execute\r\n            </button>\r\n          </div>\r\n        </div>\r\n          <Editor\r\n            height=\"96vh\"\r\n            width=\"80vw\"\r\n            theme=\"vs-light\"\r\n            language=\"python\"\r\n            options={{ fontSize: 18, fontWeight: 400, fontFamily: \"cursive\" }}\r\n            onChange={handleEditorChange}\r\n            value={file.value}\r\n            beforeMount={handleEditorWillMount}\r\n          />\r\n        </div>\r\n          <div className=\"inputOutput\">\r\n            <div className=\"inputArea\">\r\n              <h3>Input</h3>\r\n              <textarea\r\n                rows=\"20\"\r\n                cols=\"52\"\r\n                className=\"userInputArea\"\r\n                onChange={handleInput}\r\n                placeholder=\"Enter Input\"\r\n              ></textarea>\r\n            </div>\r\n            <div className=\"outputArea\">\r\n              <h3>Output</h3>\r\n              <textarea\r\n                rows=\"20\"\r\n                cols=\"52\"\r\n                className=\"userOutputArea\"\r\n                onChange={userOutput}\r\n                value={outputValue}\r\n              ></textarea>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default MultiFile;\r\n","import axios from \"axios\";\r\n\r\nconst env = process.env.NODE_ENV; // current environment\r\n\r\nexport const runCode = (language, code, input) => async dispatch => {\r\n    let url\r\n    if(env === \"development\") {\r\n        url = 'http://localhost:5000/'\r\n    }else{\r\n        url = 'https://fierce-reef-05156.herokuapp.com/' \r\n    }\r\n    return await axios.post( url+'api/compile', {\r\n        language: language, \r\n        stdin:input,\r\n        versionIndex: \"0\",\r\n        script:code\r\n    })\r\n}\r\n","import React from 'react';\r\nimport TextEditor from './TextEditor/TextEditor';\r\nimport MultiFile from './MultilanguageEditor/multiFile';\r\n\r\nfunction App(props) {\r\n  return (\r\n    <>\r\n    {props.name === \"ide\" ? <TextEditor refresh = {props.refresh}/> :<MultiFile language={props.language} refresh = {props.refresh}/>}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default App;","// https://stackoverflow.com/questions/521295/seeding-the-random-number-generator-in-javascript/47593316#47593316\r\nexport const LCG = (seed) => () => ((2 ** 31 - 1) & (seed = Math.imul(48271, seed))) / 2 ** 31;\r\nexport function randomSeed() {\r\n    return Math.floor(Math.random() * 2 ** 31);\r\n}\r\n// Unfortunately, roughjs doesn't support a seed attribute (https://github.com/pshihn/rough/issues/27).\r\n// We can achieve the same result by overriding the Math.random function with a\r\n// pseudo random generator that supports a random seed and swapping it back after.\r\nexport function withCustomMathRandom(seed, cb) {\r\n    const random = Math.random;\r\n    Math.random = LCG(seed);\r\n    const result = cb();\r\n    Math.random = random;\r\n    return result;\r\n}\r\n","import { randomSeed } from \"../random\";\r\nimport nextId from \"react-id-generator\";\r\nexport function newElement(type, x, y, strokeColor, backgroundColor, fillStyle, strokeWidth, roughness, opacity, width = 0, height = 0) {\r\n    const element = {\r\n        id: nextId(),\r\n        type,\r\n        x,\r\n        y,\r\n        width,\r\n        height,\r\n        strokeColor,\r\n        backgroundColor,\r\n        fillStyle,\r\n        strokeWidth,\r\n        roughness,\r\n        opacity,\r\n        isSelected: false,\r\n        seed: randomSeed()\r\n    };\r\n    return element;\r\n}\r\nexport function duplicateElement(element) {\r\n    const copy = { ...element };\r\n    copy.id = nextId();\r\n    copy.seed = randomSeed();\r\n    return copy;\r\n}\r\n","// https://stackoverflow.com/a/6853926/232122\r\nexport function distanceBetweenPointAndSegment(x, y, x1, y1, x2, y2) {\r\n    const A = x - x1;\r\n    const B = y - y1;\r\n    const C = x2 - x1;\r\n    const D = y2 - y1;\r\n    const dot = A * C + B * D;\r\n    const lenSquare = C * C + D * D;\r\n    let param = -1;\r\n    if (lenSquare !== 0) {\r\n        // in case of 0 length line\r\n        param = dot / lenSquare;\r\n    }\r\n    let xx, yy;\r\n    if (param < 0) {\r\n        xx = x1;\r\n        yy = y1;\r\n    }\r\n    else if (param > 1) {\r\n        xx = x2;\r\n        yy = y2;\r\n    }\r\n    else {\r\n        xx = x1 + param * C;\r\n        yy = y1 + param * D;\r\n    }\r\n    const dx = x - xx;\r\n    const dy = y - yy;\r\n    return Math.hypot(dx, dy);\r\n}\r\nexport function rotate(x1, y1, x2, y2, angle) {\r\n    // 𝑎′𝑥=(𝑎𝑥−𝑐𝑥)cos𝜃−(𝑎𝑦−𝑐𝑦)sin𝜃+𝑐𝑥\r\n    // 𝑎′𝑦=(𝑎𝑥−𝑐𝑥)sin𝜃+(𝑎𝑦−𝑐𝑦)cos𝜃+𝑐𝑦.\r\n    // https://math.stackexchange.com/questions/2204520/how-do-i-rotate-a-line-segment-in-a-specific-point-on-the-line\r\n    return [\r\n        (x1 - x2) * Math.cos(angle) - (y1 - y2) * Math.sin(angle) + x2,\r\n        (x1 - x2) * Math.sin(angle) + (y1 - y2) * Math.cos(angle) + y2\r\n    ];\r\n}\r\n","import { rotate } from \"../math\";\r\n// If the element is created from right to left, the width is going to be negative\r\n// This set of functions retrieves the absolute position of the 4 points.\r\n// We can't just always normalize it since we need to remember the fact that an arrow\r\n// is pointing left or right.\r\nexport function getElementAbsoluteCoords(element) {\r\n    return [\r\n        element.width >= 0 ? element.x : element.x + element.width,\r\n        element.height >= 0 ? element.y : element.y + element.height,\r\n        element.width >= 0 ? element.x + element.width : element.x,\r\n        element.height >= 0 ? element.y + element.height : element.y // y2\r\n    ];\r\n}\r\nexport function getDiamondPoints(element) {\r\n    // Here we add +1 to avoid these numbers to be 0\r\n    // otherwise rough.js will throw an error complaining about it\r\n    const topX = Math.floor(element.width / 2) + 1;\r\n    const topY = 0;\r\n    const rightX = element.width;\r\n    const rightY = Math.floor(element.height / 2) + 1;\r\n    const bottomX = topX;\r\n    const bottomY = element.height;\r\n    const leftX = topY;\r\n    const leftY = rightY;\r\n    return [topX, topY, rightX, rightY, bottomX, bottomY, leftX, leftY];\r\n}\r\nexport function getArrowPoints(element) {\r\n    const x1 = 0;\r\n    const y1 = 0;\r\n    const x2 = element.width;\r\n    const y2 = element.height;\r\n    const size = 30; // pixels\r\n    const distance = Math.hypot(x2 - x1, y2 - y1);\r\n    // Scale down the arrow until we hit a certain size so that it doesn't look weird\r\n    const minSize = Math.min(size, distance / 2);\r\n    const xs = x2 - ((x2 - x1) / distance) * minSize;\r\n    const ys = y2 - ((y2 - y1) / distance) * minSize;\r\n    const angle = 20; // degrees\r\n    const [x3, y3] = rotate(xs, ys, x2, y2, (-angle * Math.PI) / 180);\r\n    const [x4, y4] = rotate(xs, ys, x2, y2, (angle * Math.PI) / 180);\r\n    return [x1, y1, x2, y2, x3, y3, x4, y4];\r\n}\r\n","export function handlerRectangles(element, { scrollX, scrollY }) {\r\n    const elementX1 = element.x;\r\n    const elementX2 = element.x + element.width;\r\n    const elementY1 = element.y;\r\n    const elementY2 = element.y + element.height;\r\n    const margin = 4;\r\n    const minimumSize = 40;\r\n    const handlers = {};\r\n    const marginX = element.width < 0 ? 8 : -8;\r\n    const marginY = element.height < 0 ? 8 : -8;\r\n    if (Math.abs(elementX2 - elementX1) > minimumSize) {\r\n        handlers[\"n\"] = [\r\n            elementX1 + (elementX2 - elementX1) / 2 + scrollX - 4,\r\n            elementY1 - margin + scrollY + marginY,\r\n            8,\r\n            8\r\n        ];\r\n        handlers[\"s\"] = [\r\n            elementX1 + (elementX2 - elementX1) / 2 + scrollX - 4,\r\n            elementY2 - margin + scrollY - marginY,\r\n            8,\r\n            8\r\n        ];\r\n    }\r\n    if (Math.abs(elementY2 - elementY1) > minimumSize) {\r\n        handlers[\"w\"] = [\r\n            elementX1 - margin + scrollX + marginX,\r\n            elementY1 + (elementY2 - elementY1) / 2 + scrollY - 4,\r\n            8,\r\n            8\r\n        ];\r\n        handlers[\"e\"] = [\r\n            elementX2 - margin + scrollX - marginX,\r\n            elementY1 + (elementY2 - elementY1) / 2 + scrollY - 4,\r\n            8,\r\n            8\r\n        ];\r\n    }\r\n    handlers[\"nw\"] = [\r\n        elementX1 - margin + scrollX + marginX,\r\n        elementY1 - margin + scrollY + marginY,\r\n        8,\r\n        8\r\n    ]; // nw\r\n    handlers[\"ne\"] = [\r\n        elementX2 - margin + scrollX - marginX,\r\n        elementY1 - margin + scrollY + marginY,\r\n        8,\r\n        8\r\n    ]; // ne\r\n    handlers[\"sw\"] = [\r\n        elementX1 - margin + scrollX + marginX,\r\n        elementY2 - margin + scrollY - marginY,\r\n        8,\r\n        8\r\n    ]; // sw\r\n    handlers[\"se\"] = [\r\n        elementX2 - margin + scrollX - marginX,\r\n        elementY2 - margin + scrollY - marginY,\r\n        8,\r\n        8\r\n    ]; // se\r\n    if (element.type === \"arrow\") {\r\n        return {\r\n            nw: handlers.nw,\r\n            se: handlers.se\r\n        };\r\n    }\r\n    return handlers;\r\n}\r\n","import { distanceBetweenPointAndSegment } from \"../math\";\r\nimport { getArrowPoints, getDiamondPoints, getElementAbsoluteCoords } from \"./bounds\";\r\nexport function hitTest(element, x, y) {\r\n    // For shapes that are composed of lines, we only enable point-selection when the distance\r\n    // of the click is less than x pixels of any of the lines that the shape is composed of\r\n    const lineThreshold = 10;\r\n    if (element.type === \"ellipse\") {\r\n        // https://stackoverflow.com/a/46007540/232122\r\n        const px = Math.abs(x - element.x - element.width / 2);\r\n        const py = Math.abs(y - element.y - element.height / 2);\r\n        let tx = 0.707;\r\n        let ty = 0.707;\r\n        const a = Math.abs(element.width) / 2;\r\n        const b = Math.abs(element.height) / 2;\r\n        [0, 1, 2, 3].forEach(x => {\r\n            const xx = a * tx;\r\n            const yy = b * ty;\r\n            const ex = ((a * a - b * b) * tx ** 3) / a;\r\n            const ey = ((b * b - a * a) * ty ** 3) / b;\r\n            const rx = xx - ex;\r\n            const ry = yy - ey;\r\n            const qx = px - ex;\r\n            const qy = py - ey;\r\n            const r = Math.hypot(ry, rx);\r\n            const q = Math.hypot(qy, qx);\r\n            tx = Math.min(1, Math.max(0, ((qx * r) / q + ex) / a));\r\n            ty = Math.min(1, Math.max(0, ((qy * r) / q + ey) / b));\r\n            const t = Math.hypot(ty, tx);\r\n            tx /= t;\r\n            ty /= t;\r\n        });\r\n        return Math.hypot(a * tx - px, b * ty - py) < lineThreshold;\r\n    }\r\n    else if (element.type === \"rectangle\") {\r\n        const [x1, y1, x2, y2] = getElementAbsoluteCoords(element);\r\n        // (x1, y1) --A-- (x2, y1)\r\n        //    |D             |B\r\n        // (x1, y2) --C-- (x2, y2)\r\n        return (distanceBetweenPointAndSegment(x, y, x1, y1, x2, y1) < lineThreshold || // A\r\n            distanceBetweenPointAndSegment(x, y, x2, y1, x2, y2) < lineThreshold || // B\r\n            distanceBetweenPointAndSegment(x, y, x2, y2, x1, y2) < lineThreshold || // C\r\n            distanceBetweenPointAndSegment(x, y, x1, y2, x1, y1) < lineThreshold // D\r\n        );\r\n    }\r\n    else if (element.type === \"diamond\") {\r\n        x -= element.x;\r\n        y -= element.y;\r\n        const [topX, topY, rightX, rightY, bottomX, bottomY, leftX, leftY] = getDiamondPoints(element);\r\n        return (distanceBetweenPointAndSegment(x, y, topX, topY, rightX, rightY) <\r\n            lineThreshold ||\r\n            distanceBetweenPointAndSegment(x, y, rightX, rightY, bottomX, bottomY) <\r\n                lineThreshold ||\r\n            distanceBetweenPointAndSegment(x, y, bottomX, bottomY, leftX, leftY) <\r\n                lineThreshold ||\r\n            distanceBetweenPointAndSegment(x, y, leftX, leftY, topX, topY) <\r\n                lineThreshold);\r\n    }\r\n    else if (element.type === \"arrow\") {\r\n        let [x1, y1, x2, y2, x3, y3, x4, y4] = getArrowPoints(element);\r\n        // The computation is done at the origin, we need to add a translation\r\n        x -= element.x;\r\n        y -= element.y;\r\n        return (\r\n        //    \\\r\n        distanceBetweenPointAndSegment(x, y, x3, y3, x2, y2) < lineThreshold ||\r\n            // -----\r\n            distanceBetweenPointAndSegment(x, y, x1, y1, x2, y2) < lineThreshold ||\r\n            //    /\r\n            distanceBetweenPointAndSegment(x, y, x4, y4, x2, y2) < lineThreshold);\r\n    }\r\n    else if (element.type === \"text\") {\r\n        const [x1, y1, x2, y2] = getElementAbsoluteCoords(element);\r\n        return x >= x1 && x <= x2 && y >= y1 && y <= y2;\r\n    }\r\n    else if (element.type === \"selection\") {\r\n        console.warn(\"This should not happen, we need to investigate why it does.\");\r\n        return false;\r\n    }\r\n    else {\r\n        throw new Error(\"Unimplemented type \" + element.type);\r\n    }\r\n}\r\n","import { handlerRectangles } from \"./handlerRectangles\";\r\nexport function resizeTest(element, x, y, { scrollX, scrollY }) {\r\n    if (!element.isSelected || element.type === \"text\")\r\n        return false;\r\n    const handlers = handlerRectangles(element, { scrollX, scrollY });\r\n    const filter = Object.keys(handlers).filter(key => {\r\n        const handler = handlers[key];\r\n        return (x + scrollX >= handler[0] &&\r\n            x + scrollX <= handler[0] + handler[2] &&\r\n            y + scrollY >= handler[1] &&\r\n            y + scrollY <= handler[1] + handler[3]);\r\n    });\r\n    if (filter.length > 0) {\r\n        return filter[0];\r\n    }\r\n    return false;\r\n}\r\nexport function getElementWithResizeHandler(elements, { x, y }, { scrollX, scrollY }) {\r\n    return elements.reduce((result, element) => {\r\n        if (result) {\r\n            return result;\r\n        }\r\n        const resizeHandle = resizeTest(element, x, y, {\r\n            scrollX,\r\n            scrollY\r\n        });\r\n        return resizeHandle ? { element, resizeHandle } : null;\r\n    }, null);\r\n}\r\n","export function isTextElement(element) {\r\n    return element.type === \"text\";\r\n}\r\n","export const KEYS = {\r\n    ARROW_LEFT: \"ArrowLeft\",\r\n    ARROW_RIGHT: \"ArrowRight\",\r\n    ARROW_DOWN: \"ArrowDown\",\r\n    ARROW_UP: \"ArrowUp\",\r\n    ENTER: \"Enter\",\r\n    ESCAPE: \"Escape\",\r\n    DELETE: \"Delete\",\r\n    BACKSPACE: \"Backspace\"\r\n};\r\nexport const META_KEY = /Mac|iPod|iPhone|iPad/.test(window.navigator.platform)\r\n    ? \"metaKey\"\r\n    : \"ctrlKey\";\r\nexport function isArrowKey(keyCode) {\r\n    return (keyCode === KEYS.ARROW_LEFT ||\r\n        keyCode === KEYS.ARROW_RIGHT ||\r\n        keyCode === KEYS.ARROW_DOWN ||\r\n        keyCode === KEYS.ARROW_UP);\r\n}\r\n","import { KEYS } from \"../keys\";\r\nexport function textWysiwyg({ initText, x, y, strokeColor, font, onSubmit }) {\r\n    // Using contenteditable here as it has dynamic width.\r\n    // But this solution has an issue — it allows to paste\r\n    // multiline text, which is not currently supported\r\n   \r\n    const editable = document.createElement(\"div\");\r\n    editable.contentEditable = \"true\";\r\n    editable.tabIndex = 0;\r\n    editable.className = \"canvas_text\";\r\n    editable.innerText = initText;\r\n    editable.dataset.type = \"wysiwyg\";\r\n    Object.assign(editable.style, {\r\n        color: strokeColor,\r\n        position: \"absolute\",\r\n        top: y + \"px\",\r\n        left: x + \"px\",\r\n        transform: \"translate(-50%, -50%)\",\r\n        textAlign: \"center\",\r\n        display: \"inline-block\",\r\n        font: font,\r\n        padding: \"4px\",\r\n        outline: \"transparent\",\r\n        whiteSpace: \"nowrap\",\r\n        minHeight: \"1em\"\r\n    });\r\n    editable.onkeydown = ev => {\r\n       \r\n        if (ev.key === KEYS.ESCAPE) {\r\n            ev.preventDefault();\r\n            if (initText) {\r\n                editable.innerText = initText;\r\n                handleSubmit();\r\n                return;\r\n            }\r\n            cleanup();         \r\n            return;\r\n        }\r\n        if (ev.key === KEYS.ENTER) {\r\n            ev.preventDefault();\r\n            handleSubmit();\r\n        }\r\n    };\r\n\r\n    editable.onblur = handleSubmit;\r\n    // override paste to disallow non-textual data, and replace newlines\r\n    editable.onpaste = ev => {\r\n        ev.preventDefault();\r\n        try {\r\n            const text = ev.clipboardData.getData(\"text\").replace(/\\n+/g, \" \");\r\n            editable.textContent = text;\r\n        }\r\n        catch { }\r\n    };\r\n    function stopEvent(ev) {\r\n        ev.stopPropagation();\r\n    }\r\n    function handleSubmit() {\r\n        if (editable.innerText) {\r\n            onSubmit(editable.innerText);\r\n        }\r\n        cleanup();\r\n    }\r\n    function cleanup() {\r\n        editable.onblur = null;\r\n        editable.onkeydown = null;\r\n        editable.onpaste = null;\r\n        window.removeEventListener(\"wheel\", stopEvent, true);\r\n        document.body.removeChild(editable);\r\n    }\r\n    window.addEventListener(\"wheel\", stopEvent, true);\r\n    document.body.appendChild(editable);\r\n    editable.focus();\r\n    const selection = window.getSelection();\r\n    if (selection) {\r\n        const range = document.createRange();\r\n        range.selectNodeContents(editable);\r\n        selection.removeAllRanges();\r\n        selection.addRange(range);\r\n    }\r\n}\r\n","export function getDateTime() {\r\n    const date = new Date();\r\n    const year = date.getFullYear();\r\n    const month = date.getMonth() + 1;\r\n    const day = date.getDate();\r\n    const hr = date.getHours();\r\n    const min = date.getMinutes();\r\n    const secs = date.getSeconds();\r\n    return `${year}${month}${day}${hr}${min}${secs}`;\r\n}\r\nexport function capitalizeString(str) {\r\n    return str.charAt(0).toUpperCase() + str.slice(1);\r\n}\r\nexport function isInputLike(target) {\r\n    return ((target instanceof HTMLElement && target.dataset.type === \"wysiwyg\") ||\r\n        target instanceof HTMLInputElement ||\r\n        target instanceof HTMLTextAreaElement ||\r\n        target instanceof HTMLSelectElement);\r\n}\r\n// https://github.com/grassator/canvas-text-editor/blob/master/lib/FontMetrics.js\r\nexport function measureText(text, font) {\r\n    const line = document.createElement(\"div\");\r\n    const body = document.body;\r\n    line.style.position = \"absolute\";\r\n    line.style.whiteSpace = \"nowrap\";\r\n    line.style.font = font;\r\n    body.appendChild(line);\r\n    // Now we can measure width and height of the letter\r\n    line.innerText = text;\r\n    const width = line.offsetWidth;\r\n    const height = line.offsetHeight;\r\n    // Now creating 1px sized item that will be aligned to baseline\r\n    // to calculate baseline shift\r\n    const span = document.createElement(\"span\");\r\n    span.style.display = \"inline-block\";\r\n    span.style.overflow = \"hidden\";\r\n    span.style.width = \"1px\";\r\n    span.style.height = \"1px\";\r\n    line.appendChild(span);\r\n    // Baseline is important for positioning text on canvas\r\n    const baseline = span.offsetTop + span.offsetHeight;\r\n    document.body.removeChild(line);\r\n    return { width, height, baseline };\r\n}\r\n","import { measureText } from \"../utils\";\r\nexport const redrawTextBoundingBox = (element) => {\r\n    const metrics = measureText(element.text, element.font);\r\n    element.width = metrics.width;\r\n    element.height = metrics.height;\r\n    element.baseline = metrics.baseline;\r\n};\r\n","import { getElementAbsoluteCoords } from \"../element\";\r\nconst SCROLLBAR_MIN_SIZE = 15;\r\nconst SCROLLBAR_MARGIN = 4;\r\nexport const SCROLLBAR_WIDTH = 6;\r\nexport const SCROLLBAR_COLOR = \"rgba(0,0,0,0.3)\";\r\nexport function getScrollBars(elements, canvasWidth, canvasHeight, scrollX, scrollY) {\r\n    let minX = Infinity;\r\n    let maxX = 0;\r\n    let minY = Infinity;\r\n    let maxY = 0;\r\n    elements.forEach(element => {\r\n        const [x1, y1, x2, y2] = getElementAbsoluteCoords(element);\r\n        minX = Math.min(minX, x1);\r\n        minY = Math.min(minY, y1);\r\n        maxX = Math.max(maxX, x2);\r\n        maxY = Math.max(maxY, y2);\r\n    });\r\n    minX += scrollX;\r\n    maxX += scrollX;\r\n    minY += scrollY;\r\n    maxY += scrollY;\r\n    const leftOverflow = Math.max(-minX, 0);\r\n    const rightOverflow = Math.max(-(canvasWidth - maxX), 0);\r\n    const topOverflow = Math.max(-minY, 0);\r\n    const bottomOverflow = Math.max(-(canvasHeight - maxY), 0);\r\n    // horizontal scrollbar\r\n    let horizontalScrollBar = null;\r\n    if (leftOverflow || rightOverflow) {\r\n        horizontalScrollBar = {\r\n            x: Math.min(leftOverflow + SCROLLBAR_MARGIN, canvasWidth - SCROLLBAR_MIN_SIZE - SCROLLBAR_MARGIN),\r\n            y: canvasHeight - SCROLLBAR_WIDTH - SCROLLBAR_MARGIN,\r\n            width: Math.max(canvasWidth - rightOverflow - leftOverflow - SCROLLBAR_MARGIN * 2, SCROLLBAR_MIN_SIZE),\r\n            height: SCROLLBAR_WIDTH\r\n        };\r\n    }\r\n    // vertical scrollbar\r\n    let verticalScrollBar = null;\r\n    if (topOverflow || bottomOverflow) {\r\n        verticalScrollBar = {\r\n            x: canvasWidth - SCROLLBAR_WIDTH - SCROLLBAR_MARGIN,\r\n            y: Math.min(topOverflow + SCROLLBAR_MARGIN, canvasHeight - SCROLLBAR_MIN_SIZE - SCROLLBAR_MARGIN),\r\n            width: SCROLLBAR_WIDTH,\r\n            height: Math.max(canvasHeight - bottomOverflow - topOverflow - SCROLLBAR_WIDTH * 2, SCROLLBAR_MIN_SIZE)\r\n        };\r\n    }\r\n    return {\r\n        horizontal: horizontalScrollBar,\r\n        vertical: verticalScrollBar\r\n    };\r\n}\r\nexport function isOverScrollBars(elements, x, y, canvasWidth, canvasHeight, scrollX, scrollY) {\r\n    const scrollBars = getScrollBars(elements, canvasWidth, canvasHeight, scrollX, scrollY);\r\n    const [isOverHorizontalScrollBar, isOverVerticalScrollBar] = [\r\n        scrollBars.horizontal,\r\n        scrollBars.vertical\r\n    ].map(scrollBar => scrollBar &&\r\n        scrollBar.x <= x &&\r\n        x <= scrollBar.x + scrollBar.width &&\r\n        scrollBar.y <= y &&\r\n        y <= scrollBar.y + scrollBar.height);\r\n    return {\r\n        isOverHorizontalScrollBar,\r\n        isOverVerticalScrollBar\r\n    };\r\n}\r\n","import { getElementAbsoluteCoords } from \"../element\";\r\nexport function setSelection(elements, selection) {\r\n    const [selectionX1, selectionY1, selectionX2, selectionY2] = getElementAbsoluteCoords(selection);\r\n    elements.forEach(element => {\r\n        const [elementX1, elementY1, elementX2, elementY2] = getElementAbsoluteCoords(element);\r\n        element.isSelected =\r\n            element.type !== \"selection\" &&\r\n                selectionX1 <= elementX1 &&\r\n                selectionY1 <= elementY1 &&\r\n                selectionX2 >= elementX2 &&\r\n                selectionY2 >= elementY2;\r\n    });\r\n    return elements;\r\n}\r\nexport function clearSelection(elements) {\r\n    const newElements = [...elements];\r\n    newElements.forEach(element => {\r\n        element.isSelected = false;\r\n    });\r\n    return newElements;\r\n}\r\nexport function deleteSelectedElements(elements) {\r\n    return elements.filter(el => !el.isSelected);\r\n}\r\nexport function getSelectedIndices(elements) {\r\n    const selectedIndices = [];\r\n    elements.forEach((element, index) => {\r\n        if (element.isSelected) {\r\n            selectedIndices.push(index);\r\n        }\r\n    });\r\n    return selectedIndices;\r\n}\r\nexport const someElementIsSelected = (elements) => elements.some(element => element.isSelected);\r\nexport function getSelectedAttribute(elements, getAttribute) {\r\n    const attributes = Array.from(new Set(elements\r\n        .filter(element => element.isSelected)\r\n        .map(element => getAttribute(element))));\r\n    return attributes.length === 1 ? attributes[0] : null;\r\n}\r\n","/**\r\n * https://stackoverflow.com/a/3368118\r\n * Draws a rounded rectangle using the current state of the canvas.\r\n * @param {CanvasRenderingContext2D} context\r\n * @param {Number} x The top left x coordinate\r\n * @param {Number} y The top left y coordinate\r\n * @param {Number} width The width of the rectangle\r\n * @param {Number} height The height of the rectangle\r\n * @param {Number} radius The corner radius\r\n */\r\nexport function roundRect(context, x, y, width, height, radius) {\r\n    context.beginPath();\r\n    context.moveTo(x + radius, y);\r\n    context.lineTo(x + width - radius, y);\r\n    context.quadraticCurveTo(x + width, y, x + width, y + radius);\r\n    context.lineTo(x + width, y + height - radius);\r\n    context.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\r\n    context.lineTo(x + radius, y + height);\r\n    context.quadraticCurveTo(x, y + height, x, y + height - radius);\r\n    context.lineTo(x, y + radius);\r\n    context.quadraticCurveTo(x, y, x + radius, y);\r\n    context.closePath();\r\n    context.fill();\r\n    context.stroke();\r\n}\r\n","import rough from \"roughjs/bundled/rough.esm\";\r\nimport { withCustomMathRandom } from \"../random\";\r\nimport { isTextElement } from \"../element/typeChecks\";\r\nimport { getDiamondPoints, getArrowPoints } from \"../element/bounds\";\r\n// Casting second argument (DrawingSurface) to any,\r\n// because it is requred by TS definitions and not required at runtime\r\nconst generator = rough.generator(null, null);\r\nexport function renderElement(element, rc, context, { scrollX, scrollY }) {\r\n    if (element.type === \"selection\") {\r\n        const fillStyle = context.fillStyle;\r\n        context.fillStyle = \"rgba(0, 0, 255, 0.10)\";\r\n        context.fillRect(element.x + scrollX, element.y + scrollY, element.width, element.height);\r\n        context.fillStyle = fillStyle;\r\n    }\r\n\r\n    else if (element.type === \"rectangle\") {\r\n        const shape = withCustomMathRandom(element.seed, () => {\r\n            return generator.rectangle(0, 0, element.width, element.height, {\r\n                stroke: element.strokeColor,\r\n                fill: element.backgroundColor,\r\n                fillStyle: element.fillStyle,\r\n                strokeWidth: element.strokeWidth,\r\n                roughness: element.roughness\r\n            });\r\n        });\r\n        context.globalAlpha = element.opacity / 100;\r\n        context.translate(element.x + scrollX, element.y + scrollY);\r\n        rc.draw(shape);\r\n        context.translate(-element.x - scrollX, -element.y - scrollY);\r\n        context.globalAlpha = 1;\r\n    }\r\n\r\n    else if (element.type === \"diamond\") {\r\n        const shape = withCustomMathRandom(element.seed, () => {\r\n            const [topX, topY, rightX, rightY, bottomX, bottomY, leftX, leftY] = getDiamondPoints(element);\r\n            return generator.polygon([\r\n                [topX, topY],\r\n                [rightX, rightY],\r\n                [bottomX, bottomY],\r\n                [leftX, leftY]\r\n            ], {\r\n                stroke: element.strokeColor,\r\n                fill: element.backgroundColor,\r\n                fillStyle: element.fillStyle,\r\n                strokeWidth: element.strokeWidth,\r\n                roughness: element.roughness\r\n            });\r\n        });\r\n        context.globalAlpha = element.opacity / 100;\r\n        context.translate(element.x + scrollX, element.y + scrollY);\r\n        rc.draw(shape);\r\n        context.translate(-element.x - scrollX, -element.y - scrollY);\r\n        context.globalAlpha = 1;\r\n    }\r\n\r\n    else if (element.type === \"ellipse\") {\r\n        const shape = withCustomMathRandom(element.seed, () => generator.ellipse(element.width / 2, element.height / 2, element.width, element.height, {\r\n            stroke: element.strokeColor,\r\n            fill: element.backgroundColor,\r\n            fillStyle: element.fillStyle,\r\n            strokeWidth: element.strokeWidth,\r\n            roughness: element.roughness\r\n        }));\r\n        context.globalAlpha = element.opacity / 100;\r\n        context.translate(element.x + scrollX, element.y + scrollY);\r\n        rc.draw(shape);\r\n        context.translate(-element.x - scrollX, -element.y - scrollY);\r\n        context.globalAlpha = 1;\r\n    }\r\n    \r\n    else if (element.type === \"arrow\") {\r\n        const [x1, y1, x2, y2, x3, y3, x4, y4] = getArrowPoints(element);\r\n        const options = {\r\n            stroke: element.strokeColor,\r\n            strokeWidth: element.strokeWidth,\r\n            roughness: element.roughness\r\n        };\r\n        const shapes = withCustomMathRandom(element.seed, () => [\r\n            //    \\\r\n            generator.line(x3, y3, x2, y2, options),\r\n            // -----\r\n            generator.line(x1, y1, x2, y2, options),\r\n            //    /\r\n            generator.line(x4, y4, x2, y2, options)\r\n        ]);\r\n        context.globalAlpha = element.opacity / 100;\r\n        context.translate(element.x + scrollX, element.y + scrollY);\r\n        shapes.forEach(shape => rc.draw(shape));\r\n        context.translate(-element.x - scrollX, -element.y - scrollY);\r\n        context.globalAlpha = 1;\r\n        return;\r\n    }\r\n    else if (isTextElement(element)) {\r\n        context.globalAlpha = element.opacity / 100;\r\n        const font = context.font;\r\n        context.font = element.font;\r\n        const fillStyle = context.fillStyle;\r\n        context.fillStyle = element.strokeColor;\r\n        context.fillText(element.text, element.x + scrollX, element.y +\r\n            scrollY +\r\n            (element.baseline || element.actualBoundingBoxAscent || 0));\r\n        context.fillStyle = fillStyle;\r\n        context.font = font;\r\n        context.globalAlpha = 1;\r\n    }\r\n    else {\r\n        throw new Error(\"Unimplemented type \" + element.type);\r\n    }\r\n}\r\n","import { getElementAbsoluteCoords, handlerRectangles } from \"../element\";\r\nimport { roundRect } from \"./roundRect\";\r\nimport { getScrollBars, SCROLLBAR_COLOR, SCROLLBAR_WIDTH } from \"../scene/scrollbars\";\r\nimport { renderElement } from \"./renderElement\";\r\nexport function renderScene(elements, rc, canvas, sceneState, \r\n// extra options, currently passed by export helper\r\n{ offsetX, offsetY, renderScrollbars = true, renderSelection = true } = {}) {\r\n    if (!canvas)\r\n        return;\r\n    const context = canvas.getContext(\"2d\");\r\n    const fillStyle = context.fillStyle;\r\n    if (typeof sceneState.viewBackgroundColor === \"string\") {\r\n        context.fillStyle = sceneState.viewBackgroundColor;\r\n        context.fillRect(0, 0, canvas.width, canvas.height);\r\n    }\r\n    else {\r\n        context.clearRect(0, 0, canvas.width, canvas.height);\r\n    }\r\n    context.fillStyle = fillStyle;\r\n    sceneState = {\r\n        ...sceneState,\r\n        scrollX: typeof offsetX === \"number\" ? offsetX : sceneState.scrollX,\r\n        scrollY: typeof offsetY === \"number\" ? offsetY : sceneState.scrollY\r\n    };\r\n    elements.forEach(element => {\r\n        renderElement(element, rc, context, sceneState);\r\n    });\r\n    if (renderSelection) {\r\n        const selectedElements = elements.filter(el => el.isSelected);\r\n        selectedElements.forEach(element => {\r\n            const margin = 4;\r\n            const [elementX1, elementY1, elementX2, elementY2] = getElementAbsoluteCoords(element);\r\n            const lineDash = context.getLineDash();\r\n            context.setLineDash([8, 4]);\r\n            context.strokeRect(elementX1 - margin + sceneState.scrollX, elementY1 - margin + sceneState.scrollY, elementX2 - elementX1 + margin * 2, elementY2 - elementY1 + margin * 2);\r\n            context.setLineDash(lineDash);\r\n        });\r\n        if (selectedElements.length === 1 && selectedElements[0].type !== \"text\") {\r\n            const handlers = handlerRectangles(selectedElements[0], sceneState);\r\n            Object.values(handlers).forEach(handler => {\r\n                context.strokeRect(handler[0], handler[1], handler[2], handler[3]);\r\n            });\r\n        }\r\n    }\r\n    if (renderScrollbars) {\r\n        const scrollBars = getScrollBars(elements, context.canvas.width / window.devicePixelRatio, context.canvas.height / window.devicePixelRatio, sceneState.scrollX, sceneState.scrollY);\r\n        const strokeStyle = context.strokeStyle;\r\n        context.fillStyle = SCROLLBAR_COLOR;\r\n        context.strokeStyle = \"rgba(255,255,255,0.8)\";\r\n        [scrollBars.horizontal, scrollBars.vertical].forEach(scrollBar => {\r\n            if (scrollBar)\r\n                roundRect(context, scrollBar.x, scrollBar.y, scrollBar.width, scrollBar.height, SCROLLBAR_WIDTH / 2);\r\n        });\r\n        context.strokeStyle = strokeStyle;\r\n        context.fillStyle = fillStyle;\r\n    }\r\n}\r\n","import rough from \"roughjs/bundled/rough.esm\";\r\nimport { getElementAbsoluteCoords } from \"../element\";\r\nimport { renderScene } from \"../renderer\";\r\nimport nextId from \"react-id-generator\";\r\nconst LOCAL_STORAGE_KEY = \"chalkboard\";\r\nconst LOCAL_STORAGE_KEY_STATE = \"chalkboard-state\";\r\nfunction saveFile(name, data) {\r\n    // create a temporary <a> elem which we'll use to download the image\r\n    const link = document.createElement(\"a\");\r\n    link.setAttribute(\"download\", name);\r\n    link.setAttribute(\"href\", data);\r\n    link.click();\r\n    // clean up\r\n    link.remove();\r\n}\r\nexport function saveAsJSON(elements, name) {\r\n    const serialized = JSON.stringify({\r\n        version: 1,\r\n        source: window.location.origin,\r\n        elements\r\n    });\r\n    saveFile(`${name}.json`, \"data:text/plain;charset=utf-8,\" + encodeURIComponent(serialized));\r\n}\r\n\r\nexport function loadFromJSON() {\r\n    const input = document.createElement(\"input\");\r\n    const reader = new FileReader();\r\n    input.type = \"file\";\r\n    input.accept = \".json\";\r\n    input.onchange = () => {\r\n        if (!input.files.length) {\r\n            alert(\"A file was not selected.\");\r\n            return;\r\n        }\r\n        reader.readAsText(input.files[0], \"utf8\");\r\n    };\r\n    input.click();\r\n    return new Promise(resolve => {\r\n        reader.onloadend = () => {\r\n            if (reader.readyState === FileReader.DONE) {\r\n                let elements = [];\r\n                try {\r\n                    const data = JSON.parse(reader.result);\r\n                    elements = data.elements || [];\r\n                }\r\n                catch (e) {\r\n                    // Do nothing because elements array is already empty\r\n                }\r\n                resolve(restore(elements, null));\r\n            }\r\n        };\r\n    });\r\n}\r\n\r\nexport function exportCanvas(type, elements, canvas, { exportBackground, exportPadding = 10, viewBackgroundColor, name }) {\r\n    if (!elements.length)\r\n        return window.alert(\"Cannot export empty canvas.\");\r\n    // calculate smallest area to fit the contents in\r\n    let subCanvasX1 = Infinity;\r\n    let subCanvasX2 = 0;\r\n    let subCanvasY1 = Infinity;\r\n    let subCanvasY2 = 0;\r\n    elements.forEach(element => {\r\n        const [x1, y1, x2, y2] = getElementAbsoluteCoords(element);\r\n        subCanvasX1 = Math.min(subCanvasX1, x1);\r\n        subCanvasY1 = Math.min(subCanvasY1, y1);\r\n        subCanvasX2 = Math.max(subCanvasX2, x2);\r\n        subCanvasY2 = Math.max(subCanvasY2, y2);\r\n    });\r\n    function distance(x, y) {\r\n        return Math.abs(x > y ? x - y : y - x);\r\n    }\r\n    const tempCanvas = document.createElement(\"canvas\");\r\n    tempCanvas.style.display = \"none\";\r\n    document.body.appendChild(tempCanvas);\r\n    tempCanvas.width = distance(subCanvasX1, subCanvasX2) + exportPadding * 2;\r\n    tempCanvas.height = distance(subCanvasY1, subCanvasY2) + exportPadding * 2;\r\n    renderScene(elements, rough.canvas(tempCanvas), tempCanvas, {\r\n        viewBackgroundColor: exportBackground ? viewBackgroundColor : null,\r\n        scrollX: 0,\r\n        scrollY: 0\r\n    }, {\r\n        offsetX: -subCanvasX1 + exportPadding,\r\n        offsetY: -subCanvasY1 + exportPadding,\r\n        renderScrollbars: false,\r\n        renderSelection: false\r\n    });\r\n    if (type === \"png\") {\r\n        saveFile(`${name}.png`, tempCanvas.toDataURL(\"image/png\"));\r\n    }\r\n    else if (type === \"clipboard\") {\r\n        try {\r\n            tempCanvas.toBlob(async function (blob) {\r\n                try {\r\n                    await navigator.clipboard.write([\r\n                        new window.ClipboardItem({ \"image/png\": blob })\r\n                    ]);\r\n                }\r\n                catch (err) {\r\n                    window.alert(\"Couldn't copy to clipboard. Try using Chrome browser.\");\r\n                }\r\n            });\r\n        }\r\n        catch (err) {\r\n            window.alert(\"Couldn't copy to clipboard. Try using Chrome browser.\");\r\n        }\r\n    }\r\n    // clean up the DOM\r\n    if (tempCanvas !== canvas)\r\n        tempCanvas.remove();\r\n}\r\n\r\nfunction restore(savedElements, savedState) {\r\n    return {\r\n        elements: savedElements.map(element => ({\r\n            ...element,\r\n            id: element.id || nextId(),\r\n            fillStyle: element.fillStyle || \"hachure\",\r\n            strokeWidth: element.strokeWidth || 1,\r\n            roughness: element.roughness || 1,\r\n            opacity: element.opacity === null || element.opacity === undefined\r\n                ? 100\r\n                : element.opacity\r\n        })),\r\n        appState: savedState\r\n    };\r\n}\r\n\r\nexport function restoreFromLocalStorage() {\r\n    const savedElements = localStorage.getItem(LOCAL_STORAGE_KEY);\r\n    const savedState = localStorage.getItem(LOCAL_STORAGE_KEY_STATE);\r\n    let elements = [];\r\n    if (savedElements) {\r\n        try {\r\n            elements = JSON.parse(savedElements);\r\n        }\r\n        catch (e) {\r\n            // Do nothing because elements array is already empty\r\n        }\r\n    }\r\n    let appState = null;\r\n    if (savedState) {\r\n        try {\r\n            appState = JSON.parse(savedState);\r\n        }\r\n        catch (e) {\r\n            // Do nothing because appState is already null\r\n        }\r\n    }\r\n    return restore(elements, appState);\r\n}\r\n\r\nexport function saveToLocalStorage(elements, state) {\r\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(elements));\r\n    localStorage.setItem(LOCAL_STORAGE_KEY_STATE, JSON.stringify(state));\r\n}\r\n","import { hitTest } from \"../element/collision\";\r\nimport { getElementAbsoluteCoords } from \"../element\";\r\nexport const hasBackground = (elements) => elements.some(element => element.isSelected &&\r\n    (element.type === \"rectangle\" ||\r\n        element.type === \"ellipse\" ||\r\n        element.type === \"diamond\"));\r\nexport const hasStroke = (elements) => elements.some(element => element.isSelected &&\r\n    (element.type === \"rectangle\" ||\r\n        element.type === \"ellipse\" ||\r\n        element.type === \"diamond\" ||\r\n        element.type === \"arrow\"));\r\nexport const hasText = (elements) => elements.some(element => element.isSelected && element.type === \"text\");\r\nexport function getElementAtPosition(elements, x, y) {\r\n    let hitElement = null;\r\n    // We need to to hit testing from front (end of the array) to back (beginning of the array)\r\n    for (let i = elements.length - 1; i >= 0; --i) {\r\n        if (hitTest(elements[i], x, y)) {\r\n            hitElement = elements[i];\r\n            break;\r\n        }\r\n    }\r\n    return hitElement;\r\n}\r\nexport function getElementContainingPosition(elements, x, y) {\r\n    let hitElement = null;\r\n    // We need to to hit testing from front (end of the array) to back (beginning of the array)\r\n    for (let i = elements.length - 1; i >= 0; --i) {\r\n        const [x1, y1, x2, y2] = getElementAbsoluteCoords(elements[i]);\r\n        if (x1 < x && x < x2 && y1 < y && y < y2) {\r\n            hitElement = elements[i];\r\n            break;\r\n        }\r\n    }\r\n    return hitElement;\r\n}\r\n","export const createScene = () => {\r\n    const elements = [];\r\n    return { elements };\r\n};\r\n","import React from \"react\";\r\n// We inline font-awesome icons in order to save on js size rather than including the font awesome react library\r\nexport const SHAPES = [\r\n    {\r\n        icon: (\r\n        // fa-mouse-pointer\r\n        <svg viewBox=\"0 0 320 512\">\r\n        <path d=\"M302.189 329.126H196.105l55.831 135.993c3.889 9.428-.555 19.999-9.444 23.999l-49.165 21.427c-9.165 4-19.443-.571-23.332-9.714l-53.053-129.136-86.664 89.138C18.729 472.71 0 463.554 0 447.977V18.299C0 1.899 19.921-6.096 30.277 5.443l284.412 292.542c11.472 11.179 3.007 31.141-12.5 31.141z\"/>\r\n      </svg>),\r\n        value: \"selection\"\r\n    },\r\n    {\r\n        icon: (\r\n        // fa-square\r\n        <svg viewBox=\"0 0 448 512\">\r\n        <path d=\"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z\"/>\r\n      </svg>),\r\n        value: \"rectangle\"\r\n    },\r\n    {\r\n        icon: (\r\n        // custom\r\n        <svg viewBox=\"0 0 223.646 223.646\">\r\n        <path d=\"M111.823 0L16.622 111.823 111.823 223.646 207.025 111.823z\"/>\r\n      </svg>),\r\n        value: \"diamond\"\r\n    },\r\n    {\r\n        icon: (\r\n        // fa-circle\r\n        <svg viewBox=\"0 0 512 512\">\r\n        <path d=\"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z\"/>\r\n      </svg>),\r\n        value: \"ellipse\"\r\n    },\r\n    {\r\n        icon: (\r\n        // fa-long-arrow-alt-right\r\n        <svg viewBox=\"0 0 448 512\">\r\n        <path d=\"M313.941 216H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h301.941v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.569 0-33.941l-86.059-86.059c-15.119-15.119-40.971-4.411-40.971 16.971V216z\"/>\r\n      </svg>),\r\n        value: \"arrow\"\r\n    },\r\n    {\r\n        icon: (\r\n        // fa-font\r\n        <svg viewBox=\"0 0 448 512\">\r\n        <path d=\"M432 416h-23.41L277.88 53.69A32 32 0 0 0 247.58 32h-47.16a32 32 0 0 0-30.3 21.69L39.41 416H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-19.58l23.3-64h152.56l23.3 64H304a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM176.85 272L224 142.51 271.15 272z\"/>\r\n      </svg>),\r\n        value: \"text\"\r\n    }\r\n];\r\nexport const shapesShortcutKeys = SHAPES.map(shape => shape.value[0]);\r\nexport function findShapeByKey(key) {\r\n    const defaultElement = \"selection\";\r\n    return SHAPES.reduce((element, shape) => {\r\n        if (shape.value[0] !== key)\r\n            return element;\r\n        return shape.value;\r\n    }, defaultElement);\r\n}\r\n","class SceneHistory {\r\n    constructor() {\r\n        this.recording = true;\r\n        this.stateHistory = [];\r\n        this.redoStack = [];\r\n    }\r\n    generateCurrentEntry(elements) {\r\n        return JSON.stringify(elements.map(element => ({ ...element, isSelected: false })));\r\n    }\r\n    pushEntry(newEntry) {\r\n        if (this.stateHistory.length > 0 &&\r\n            this.stateHistory[this.stateHistory.length - 1] === newEntry) {\r\n            // If the last entry is the same as this one, ignore it\r\n            return;\r\n        }\r\n        this.stateHistory.push(newEntry);\r\n    }\r\n    restoreEntry(entry) {\r\n        // When restoring, we shouldn't add an history entry otherwise we'll be stuck with it and can't go back\r\n        this.skipRecording();\r\n        try {\r\n            return JSON.parse(entry);\r\n        }\r\n        catch {\r\n            return null;\r\n        }\r\n    }\r\n    clearRedoStack() {\r\n        this.redoStack.splice(0, this.redoStack.length);\r\n    }\r\n    redoOnce(elements) {\r\n        const currentEntry = this.generateCurrentEntry(elements);\r\n        const entryToRestore = this.redoStack.pop();\r\n        if (entryToRestore !== undefined) {\r\n            this.stateHistory.push(currentEntry);\r\n            return this.restoreEntry(entryToRestore);\r\n        }\r\n        return null;\r\n    }\r\n    undoOnce(elements) {\r\n        const currentEntry = this.generateCurrentEntry(elements);\r\n        let entryToRestore = this.stateHistory.pop();\r\n        // If nothing was changed since last, take the previous one\r\n        if (currentEntry === entryToRestore) {\r\n            entryToRestore = this.stateHistory.pop();\r\n        }\r\n        if (entryToRestore !== undefined) {\r\n            this.redoStack.push(currentEntry);\r\n            return this.restoreEntry(entryToRestore);\r\n        }\r\n        return null;\r\n    }\r\n    isRecording() {\r\n        return this.recording;\r\n    }\r\n    skipRecording() {\r\n        this.recording = false;\r\n    }\r\n    resumeRecording() {\r\n        this.recording = true;\r\n    }\r\n}\r\nexport const createHistory = () => {\r\n    const history = new SceneHistory();\r\n    return { history };\r\n};\r\n","import React from \"react\";\r\nexport function Popover({ children, left, onCloseRequest, top }) {\r\n    return (<div className=\"popover\" style={{ top: top, left: left }}>\r\n      <div className=\"cover\" onClick={onCloseRequest} onContextMenu={e => {\r\n        e.preventDefault();\r\n        if (onCloseRequest)\r\n            onCloseRequest();\r\n    }}/>\r\n      {children}\r\n    </div>);\r\n}\r\n","import React from \"react\";\r\nimport { Popover } from \"./Popover\";\r\nimport { render, unmountComponentAtNode } from \"react-dom\";\r\nimport \"./ContextMenu.css\";\r\nfunction ContextMenu({ options, onCloseRequest, top, left }) {\r\n    return (<Popover onCloseRequest={onCloseRequest} top={top} left={left}>\r\n      <ul className=\"context-menu\" onContextMenu={e => e.preventDefault()}>\r\n        {options.map((option, idx) => (<li key={idx} className=\"context-menu__option\" onClick={onCloseRequest}>\r\n            <ContextMenuOption {...option}/>\r\n          </li>))}\r\n      </ul>\r\n    </Popover>);\r\n}\r\nfunction ContextMenuOption({ label, action }) {\r\n    return (<button className=\"context-menu-option\" onClick={action}>\r\n      {label}\r\n    </button>);\r\n}\r\nlet contextMenuNode;\r\nfunction getContextMenuNode() {\r\n    if (contextMenuNode) {\r\n        return contextMenuNode;\r\n    }\r\n    const div = document.createElement(\"div\");\r\n    document.body.appendChild(div);\r\n    return (contextMenuNode = div);\r\n}\r\nfunction handleClose() {\r\n    unmountComponentAtNode(getContextMenuNode());\r\n}\r\nexport default {\r\n    push(params) {\r\n        const options = Array.of();\r\n        params.options.forEach(option => {\r\n            if (option) {\r\n                options.push(option);\r\n            }\r\n        });\r\n        if (options.length) {\r\n            render(<ContextMenu top={params.top} left={params.left} options={options} onCloseRequest={handleClose}/>, getContextMenuNode());\r\n        }\r\n    }\r\n};\r\n","import React from \"react\";\r\nexport class ActionManager {\r\n    constructor() {\r\n        this.actions = {};\r\n        this.updater = null;\r\n    }\r\n    setUpdater(updater) {\r\n        this.updater = updater;\r\n    }\r\n    registerAction(action) {\r\n        this.actions[action.name] = action;\r\n    }\r\n    handleKeyDown(event, elements, appState) {\r\n        const data = Object.values(this.actions)\r\n            .sort((a, b) => (b.keyPriority || 0) - (a.keyPriority || 0))\r\n            .filter(action => action.keyTest && action.keyTest(event, elements, appState));\r\n        if (data.length === 0)\r\n            return {};\r\n        event.preventDefault();\r\n        return data[0].perform(elements, appState, null);\r\n    }\r\n    getContextMenuItems(elements, appState, updater) {\r\n        console.log(Object.values(this.actions)\r\n            .filter(action => \"contextItemLabel\" in action)\r\n            .map(a => ({ name: a.name, label: a.contextItemLabel })));\r\n        return Object.values(this.actions)\r\n            .filter(action => \"contextItemLabel\" in action)\r\n            .sort((a, b) => (a.contextMenuOrder !== undefined ? a.contextMenuOrder : 999) -\r\n            (b.contextMenuOrder !== undefined ? b.contextMenuOrder : 999))\r\n            .map(action => ({\r\n            label: action.contextItemLabel,\r\n            action: () => {\r\n                updater(action.perform(elements, appState, null));\r\n            }\r\n        }));\r\n    }\r\n    renderAction(name, elements, appState, updater) {\r\n        if (this.actions[name] && \"PanelComponent\" in this.actions[name]) {\r\n            const action = this.actions[name];\r\n            const PanelComponent = action.PanelComponent;\r\n            const updateData = (formState) => {\r\n                updater(action.perform(elements, appState, formState));\r\n            };\r\n            return (<PanelComponent elements={elements} appState={appState} updateData={updateData}/>);\r\n        }\r\n        return null;\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport { deleteSelectedElements } from \"../scene\";\r\nimport { KEYS } from \"../keys\";\r\nexport const actionDeleteSelected = {\r\n    name: \"deleteSelectedElements\",\r\n    perform: elements => {\r\n        return {\r\n            elements: deleteSelectedElements(elements)\r\n        };\r\n    },\r\n    contextItemLabel: \"Delete\",\r\n    contextMenuOrder: 3,\r\n    keyTest: event => event.key === KEYS.BACKSPACE || event.key === KEYS.DELETE,\r\n    PanelComponent: ({ updateData }) => (<button id = \"chalkboard_button\" onClick={() => updateData(null)}>Delete selected</button>)\r\n};\r\n","function swap(elements, indexA, indexB) {\r\n    const element = elements[indexA];\r\n    elements[indexA] = elements[indexB];\r\n    elements[indexB] = element;\r\n}\r\nexport function moveOneLeft(elements, indicesToMove) {\r\n    indicesToMove.sort((a, b) => a - b);\r\n    let isSorted = true;\r\n    // We go from left to right to avoid overriding the wrong elements\r\n    indicesToMove.forEach((index, i) => {\r\n        // We don't want to bubble the first elements that are sorted as they are\r\n        // already in their correct position\r\n        isSorted = isSorted && index === i;\r\n        if (isSorted) {\r\n            return;\r\n        }\r\n        swap(elements, index - 1, index);\r\n    });\r\n    return elements;\r\n}\r\nexport function moveOneRight(elements, indicesToMove) {\r\n    const reversedIndicesToMove = indicesToMove.sort((a, b) => b - a);\r\n    let isSorted = true;\r\n    // We go from right to left to avoid overriding the wrong elements\r\n    reversedIndicesToMove.forEach((index, i) => {\r\n        // We don't want to bubble the first elements that are sorted as they are\r\n        // already in their correct position\r\n        isSorted = isSorted && index === elements.length - i - 1;\r\n        if (isSorted) {\r\n            return;\r\n        }\r\n        swap(elements, index + 1, index);\r\n    });\r\n    return elements;\r\n}\r\n// Let's go through an example\r\n//        |        |\r\n// [a, b, c, d, e, f, g]\r\n// -->\r\n// [c, f, a, b, d, e, g]\r\n//\r\n// We are going to override all the elements we want to move, so we keep them in an array\r\n// that we will restore at the end.\r\n// [c, f]\r\n//\r\n// From now on, we'll never read those values from the array anymore\r\n//        |1       |0\r\n// [a, b, _, d, e, _, g]\r\n//\r\n// The idea is that we want to shift all the elements between the marker 0 and 1\r\n// by one slot to the right.\r\n//\r\n//        |1       |0\r\n// [a, b, _, d, e, _, g]\r\n//          -> ->\r\n//\r\n// which gives us\r\n//\r\n//        |1       |0\r\n// [a, b, _, _, d, e, g]\r\n//\r\n// Now, we need to move all the elements from marker 1 to the beginning by two (not one)\r\n// slots to the right, which gives us\r\n//\r\n//        |1       |0\r\n// [a, b, _, _, d, e, g]\r\n//  ---|--^  ^\r\n//     ------|\r\n//\r\n// which gives us\r\n//\r\n//        |1       |0\r\n// [_, _, a, b, d, e, g]\r\n//\r\n// At this point, we can fill back the leftmost elements with the array we saved at\r\n// the beggining\r\n//\r\n//        |1       |0\r\n// [c, f, a, b, d, e, g]\r\n//\r\n// And we are done!\r\nexport function moveAllLeft(elements, indicesToMove) {\r\n    indicesToMove.sort((a, b) => a - b);\r\n    // Copy the elements to move\r\n    const leftMostElements = indicesToMove.map(index => elements[index]);\r\n    const reversedIndicesToMove = indicesToMove\r\n        // We go from right to left to avoid overriding elements.\r\n        .reverse()\r\n        // We add 0 for the final marker\r\n        .concat([0]);\r\n    reversedIndicesToMove.forEach((index, i) => {\r\n        // We skip the first one as it is not paired with anything else\r\n        if (i === 0) {\r\n            return;\r\n        }\r\n        // We go from the next marker to the right (i - 1) to the current one (index)\r\n        for (let pos = reversedIndicesToMove[i - 1] - 1; pos >= index; --pos) {\r\n            // We move by 1 the first time, 2 the second... So we can use the index i in the array\r\n            elements[pos + i] = elements[pos];\r\n        }\r\n    });\r\n    // The final step\r\n    leftMostElements.forEach((element, i) => {\r\n        elements[i] = element;\r\n    });\r\n    return elements;\r\n}\r\n// Let's go through an example\r\n//        |        |\r\n// [a, b, c, d, e, f, g]\r\n// -->\r\n// [a, b, d, e, g, c, f]\r\n//\r\n// We are going to override all the elements we want to move, so we keep them in an array\r\n// that we will restore at the end.\r\n// [c, f]\r\n//\r\n// From now on, we'll never read those values from the array anymore\r\n//        |0       |1\r\n// [a, b, _, d, e, _, g]\r\n//\r\n// The idea is that we want to shift all the elements between the marker 0 and 1\r\n// by one slot to the left.\r\n//\r\n//        |0       |1\r\n// [a, b, _, d, e, _, g]\r\n//          <- <-\r\n//\r\n// which gives us\r\n//\r\n//        |0       |1\r\n// [a, b, d, e, _, _, g]\r\n//\r\n// Now, we need to move all the elements from marker 1 to the end by two (not one)\r\n// slots to the left, which gives us\r\n//\r\n//        |0       |1\r\n// [a, b, d, e, _, _, g]\r\n//              ^------\r\n//\r\n// which gives us\r\n//\r\n//        |0       |1\r\n// [a, b, d, e, g, _, _]\r\n//\r\n// At this point, we can fill back the rightmost elements with the array we saved at\r\n// the beggining\r\n//\r\n//        |0       |1\r\n// [a, b, d, e, g, c, f]\r\n//\r\n// And we are done!\r\nexport function moveAllRight(elements, indicesToMove) {\r\n    const reversedIndicesToMove = indicesToMove.sort((a, b) => b - a);\r\n    // Copy the elements to move\r\n    const rightMostElements = reversedIndicesToMove.map(index => elements[index]);\r\n    indicesToMove = reversedIndicesToMove\r\n        // We go from left to right to avoid overriding elements.\r\n        .reverse()\r\n        // We last element index for the final marker\r\n        .concat([elements.length]);\r\n    indicesToMove.forEach((index, i) => {\r\n        // We skip the first one as it is not paired with anything else\r\n        if (i === 0) {\r\n            return;\r\n        }\r\n        // We go from the next marker to the left (i - 1) to the current one (index)\r\n        for (let pos = indicesToMove[i - 1] + 1; pos < index; ++pos) {\r\n            // We move by 1 the first time, 2 the second... So we can use the index i in the array\r\n            elements[pos - i] = elements[pos];\r\n        }\r\n    });\r\n    // The final step\r\n    rightMostElements.forEach((element, i) => {\r\n        elements[elements.length - i - 1] = element;\r\n    });\r\n    return elements;\r\n}\r\n","import React from \"react\";\r\nimport { moveOneLeft, moveOneRight, moveAllLeft, moveAllRight } from \"../zindex\";\r\nimport { getSelectedIndices } from \"../scene\";\r\nimport { META_KEY } from \"../keys\";\r\nexport const actionSendBackward = {\r\n    name: \"sendBackward\",\r\n    perform: (elements, appState) => {\r\n        return {\r\n            elements: moveOneLeft([...elements], getSelectedIndices(elements)),\r\n            appState\r\n        };\r\n    },\r\n    contextItemLabel: \"Send Backward\",\r\n    keyPriority: 40,\r\n    keyTest: event => event[META_KEY] && event.shiftKey && event.altKey && event.code === \"KeyB\",\r\n    PanelComponent: ({ updateData }) => (<button id = \"chalkboard_button\" type=\"button\" onClick={e => updateData(null)}>\r\n      Send backward\r\n    </button>)\r\n};\r\nexport const actionBringForward = {\r\n    name: \"bringForward\",\r\n    perform: (elements, appState) => {\r\n        return {\r\n            elements: moveOneRight([...elements], getSelectedIndices(elements)),\r\n            appState\r\n        };\r\n    },\r\n    contextItemLabel: \"Bring Forward\",\r\n    keyPriority: 40,\r\n    keyTest: event => event[META_KEY] && event.shiftKey && event.altKey && event.code === \"KeyF\",\r\n    PanelComponent: ({ updateData }) => (<button id = \"chalkboard_button\" type=\"button\" onClick={e => updateData(null)}>\r\n      Bring Forward\r\n    </button>)\r\n};\r\nexport const actionSendToBack = {\r\n    name: \"sendToBack\",\r\n    perform: (elements, appState) => {\r\n        return {\r\n            elements: moveAllLeft([...elements], getSelectedIndices(elements)),\r\n            appState\r\n        };\r\n    },\r\n    contextItemLabel: \"Send to Back\",\r\n    keyTest: event => event[META_KEY] && event.shiftKey && event.code === \"KeyB\",\r\n    PanelComponent: ({ updateData }) => (<button id = \"chalkboard_button\" type=\"button\" onClick={e => updateData(null)}>\r\n      Send to Back\r\n    </button>)\r\n};\r\nexport const actionBringToFront = {\r\n    name: \"bringToFront\",\r\n    perform: (elements, appState) => {\r\n        return {\r\n            elements: moveAllRight([...elements], getSelectedIndices(elements)),\r\n            appState\r\n        };\r\n    },\r\n    contextItemLabel: \"Bring to Front\",\r\n    keyTest: event => event[META_KEY] && event.shiftKey && event.code === \"KeyF\",\r\n    PanelComponent: ({ updateData }) => (<button id = \"chalkboard_button\" type=\"button\" onClick={e => updateData(null)}>\r\n      Bring to Front\r\n    </button>)\r\n};\r\n","import { META_KEY } from \"../keys\";\r\nexport const actionSelectAll = {\r\n    name: \"selectAll\",\r\n    perform: elements => {\r\n        return {\r\n            elements: elements.map(elem => ({ ...elem, isSelected: true }))\r\n        };\r\n    },\r\n    contextItemLabel: \"Select All\",\r\n    keyTest: event => event[META_KEY] && event.code === \"KeyA\"\r\n};\r\n","import React from \"react\";\r\nexport function ButtonSelect({ options, value, onChange }) {\r\n    return (<div className=\"buttonList\">\r\n      {options.map(option => (<button id = \"chalkboard_button\" key={option.text} onClick={() => onChange(option.value)} className={value === option.value ? \"active\" : \"\"}>\r\n          {option.text}\r\n        </button>))}\r\n    </div>);\r\n}\r\n","import React, { useEffect, lazy } from \"react\";\r\nimport { Popover } from \"./Popover\";\r\nconst TwitterPicker = lazy(() => import(\r\n/* webpackPrefetch: true */ \"react-color/lib/components/twitter/Twitter\"));\r\nexport function ColorPicker({ color, onChange }) {\r\n\r\n    useEffect(() => {\r\n       let allSpans = document.getElementsByTagName(\"span\");\r\n       var c = 6;\r\n       for(let i = 0; i < allSpans.length; i++){\r\n           \r\n           let divs = allSpans[i].getElementsByTagName(\"div\");\r\n      \r\n           if(divs[0] !== undefined){\r\n              divs[0].className = c;\r\n              c++;\r\n           }\r\n\r\n       }\r\n\r\n    });\r\n    const [isActive, setActive] = React.useState(false);\r\n    return (<div>\r\n      <button className=\"swatch\" id = \"chalkboard_button\" style={color ? { backgroundColor: color } : undefined} onClick={() => setActive(!isActive)}/>\r\n      <React.Suspense fallback=\"\">\r\n        {isActive ? (<Popover onCloseRequest={() => setActive(false)}>\r\n            <TwitterPicker className = \"colors\" colors={[\r\n        \"#000000\",\r\n        \"#ABB8C3\",\r\n        \"#FFFFFF\",\r\n        \"#FF6900\",\r\n        \"#FCB900\",\r\n        \"#00D084\",\r\n        \"#8ED1FC\",\r\n        \"#0693E3\",\r\n        \"#EB144C\",\r\n        \"#F78DA7\",\r\n        \"#9900EF\"\r\n    ]} width=\"205px\" color={color || undefined} onChange={changedColor => {\r\n        onChange(changedColor.hex);\r\n    }}/>\r\n          </Popover>) : null}\r\n      </React.Suspense>\r\n      <input type=\"text\" className=\"swatch-input\" value={color || \"\"} onPaste={e => onChange(e.clipboardData.getData(\"text\"))} onChange={e => onChange(e.target.value)}/>\r\n    </div>);\r\n}\r\n","import React from \"react\";\r\nimport { ColorPicker } from \"../ColorPicker\";\r\nexport const PanelColor = ({ title, onColorChange, colorValue }) => {\r\n    return (<>\r\n      <h5>{title}</h5>\r\n      <ColorPicker color={colorValue} onChange={color => onColorChange(color)}/>\r\n    </>);\r\n};\r\n","import React from \"react\";\r\nimport { getSelectedAttribute } from \"../scene\";\r\nimport { ButtonSelect } from \"../components/ButtonSelect\";\r\nimport { PanelColor } from \"../components/panels/PanelColor\";\r\nimport { isTextElement, redrawTextBoundingBox } from \"../element\";\r\nconst changeProperty = (elements, callback) => {\r\n    return elements.map(element => {\r\n        if (element.isSelected) {\r\n            return callback(element);\r\n        }\r\n        return element;\r\n    });\r\n};\r\nexport const actionChangeStrokeColor = {\r\n    name: \"changeStrokeColor\",\r\n    perform: (elements, appState, value) => {\r\n        return {\r\n            elements: changeProperty(elements, el => ({\r\n                ...el,\r\n                strokeColor: value\r\n            })),\r\n            appState: { ...appState, currentItemStrokeColor: value }\r\n        };\r\n    },\r\n    PanelComponent: ({ elements, appState, updateData }) => (<PanelColor title=\"Stroke Color\" onColorChange={(color) => {\r\n        updateData(color);\r\n    }} colorValue={getSelectedAttribute(elements, element => element.strokeColor)}/>)\r\n};\r\nexport const actionChangeBackgroundColor = {\r\n    name: \"changeBackgroundColor\",\r\n    perform: (elements, appState, value) => {\r\n        return {\r\n            elements: changeProperty(elements, el => ({\r\n                ...el,\r\n                backgroundColor: value\r\n            })),\r\n            appState: { ...appState, currentItemBackgroundColor: value }\r\n        };\r\n    },\r\n    PanelComponent: ({ elements, updateData }) => (<PanelColor title=\"Background Color\" onColorChange={(color) => {\r\n        updateData(color);\r\n    }} colorValue={getSelectedAttribute(elements, element => element.backgroundColor)}/>)\r\n};\r\nexport const actionChangeFillStyle = {\r\n    name: \"changeFillStyle\",\r\n    perform: (elements, appState, value) => {\r\n        return {\r\n            elements: changeProperty(elements, el => ({\r\n                ...el,\r\n                fillStyle: value\r\n            }))\r\n        };\r\n    },\r\n    PanelComponent: ({ elements, updateData }) => (<>\r\n      <h5>Fill</h5>\r\n      <ButtonSelect options={[\r\n        { value: \"solid\", text: \"Solid\" },\r\n        { value: \"hachure\", text: \"Hachure\" },\r\n        { value: \"cross-hatch\", text: \"Cross-hatch\" }\r\n    ]} value={getSelectedAttribute(elements, element => element.fillStyle)} onChange={value => {\r\n        updateData(value);\r\n    }}/>\r\n    </>)\r\n};\r\nexport const actionChangeStrokeWidth = {\r\n    name: \"changeStrokeWidth\",\r\n    perform: (elements, appState, value) => {\r\n        return {\r\n            elements: changeProperty(elements, el => ({\r\n                ...el,\r\n                strokeWidth: value\r\n            }))\r\n        };\r\n    },\r\n    PanelComponent: ({ elements, appState, updateData }) => (<>\r\n      <h5>Stroke Width</h5>\r\n      <ButtonSelect options={[\r\n        { value: 1, text: \"Thin\" },\r\n        { value: 2, text: \"Bold\" },\r\n        { value: 4, text: \"Extra Bold\" }\r\n    ]} value={getSelectedAttribute(elements, element => element.strokeWidth)} onChange={value => updateData(value)}/>\r\n    </>)\r\n};\r\nexport const actionChangeSloppiness = {\r\n    name: \"changeSloppiness\",\r\n    perform: (elements, appState, value) => {\r\n        return {\r\n            elements: changeProperty(elements, el => ({\r\n                ...el,\r\n                roughness: value\r\n            }))\r\n        };\r\n    },\r\n    PanelComponent: ({ elements, appState, updateData }) => (<>\r\n      <h5>Sloppiness</h5>\r\n      <ButtonSelect options={[\r\n        { value: 0, text: \"Draftsman\" },\r\n        { value: 1, text: \"Artist\" },\r\n        { value: 3, text: \"Cartoonist\" }\r\n    ]} value={getSelectedAttribute(elements, element => element.roughness)} onChange={value => updateData(value)}/>\r\n    </>)\r\n};\r\nexport const actionChangeOpacity = {\r\n    name: \"changeOpacity\",\r\n    perform: (elements, appState, value) => {\r\n        return {\r\n            elements: changeProperty(elements, el => ({\r\n                ...el,\r\n                opacity: value\r\n            }))\r\n        };\r\n    },\r\n    PanelComponent: ({ elements, updateData }) => (<>\r\n      <h5>Opacity</h5>\r\n      <input className = \"opacity\" type=\"range\" min=\"0\" max=\"100\" onChange={e => updateData(+e.target.value)} value={getSelectedAttribute(elements, element => element.opacity) ||\r\n        0 /* Put the opacity at 0 if there are two conflicting ones */}/>\r\n    </>)\r\n};\r\nexport const actionChangeFontSize = {\r\n    name: \"changeFontSize\",\r\n    perform: (elements, appState, value) => {\r\n        return {\r\n            elements: changeProperty(elements, el => {\r\n                if (isTextElement(el)) {\r\n                    const element = {\r\n                        ...el,\r\n                        font: `${value}px ${el.font.split(\"px \")[1]}`\r\n                    };\r\n                    redrawTextBoundingBox(element);\r\n                    return element;\r\n                }\r\n                return el;\r\n            })\r\n        };\r\n    },\r\n    PanelComponent: ({ elements, updateData }) => (<>\r\n      <h5>Font size</h5>\r\n      <ButtonSelect options={[\r\n        { value: 16, text: \"Small\" },\r\n        { value: 20, text: \"Medium\" },\r\n        { value: 28, text: \"Large\" },\r\n        { value: 36, text: \"Very Large\" }\r\n    ]} value={getSelectedAttribute(elements, element => isTextElement(element) && +element.font.split(\"px \")[0])} onChange={value => updateData(value)}/>\r\n    </>)\r\n};\r\nexport const actionChangeFontFamily = {\r\n    name: \"changeFontFamily\",\r\n    perform: (elements, appState, value) => {\r\n        return {\r\n            elements: changeProperty(elements, el => {\r\n                if (isTextElement(el)) {\r\n                    const element = {\r\n                        ...el,\r\n                        font: `${el.font.split(\"px \")[0]}px ${value}`\r\n                    };\r\n                    redrawTextBoundingBox(element);\r\n                    return element;\r\n                }\r\n                return el;\r\n            })\r\n        };\r\n    },\r\n    PanelComponent: ({ elements, updateData }) => (<>\r\n      <h5>Font family</h5>\r\n      <ButtonSelect options={[\r\n        { value: \"Virgil\", text: \"Virgil\" },\r\n        { value: \"Helvetica\", text: \"Helvetica\" },\r\n        { value: \"Courier\", text: \"Courier\" }\r\n    ]} value={getSelectedAttribute(elements, element => isTextElement(element) && element.font.split(\"px \")[1])} onChange={value => updateData(value)}/>\r\n    </>)\r\n};\r\n","import React from \"react\";\r\nimport { ColorPicker } from \"../components/ColorPicker\";\r\nexport const actionChangeViewBackgroundColor = {\r\n    name: \"changeViewBackgroundColor\",\r\n    perform: (elements, appState, value) => {\r\n        return { appState: { ...appState, viewBackgroundColor: value } };\r\n    },\r\n    PanelComponent: ({ appState, updateData }) => (<>\r\n      <h5>Canvas Background Color</h5>\r\n      <ColorPicker color={appState.viewBackgroundColor} onChange={color => updateData(color)}/>\r\n    </>)\r\n};\r\nexport const actionClearCanvas = {\r\n    name: \"clearCanvas\",\r\n    perform: (elements, appState, value) => {\r\n        return {\r\n            elements: [],\r\n            appState: {\r\n                ...appState,\r\n                viewBackgroundColor: \"#ffffff\",\r\n                scrollX: 0,\r\n                scrollY: 0\r\n            }\r\n        };\r\n    },\r\n    PanelComponent: ({ updateData }) => (<button id = \"chalkboard_button\" type=\"button\" onClick={() => {\r\n        if (window.confirm(\"This will clear the whole canvas. Are you sure?\")) {\r\n            updateData(null);\r\n        }\r\n    }} title=\"Clear the canvas & reset background color\">\r\n      Clear canvas\r\n    </button>)\r\n};\r\n","import React, { Fragment, Component } from \"react\";\r\nexport class EditableText extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            value: props.value,\r\n            edit: false\r\n        };\r\n    }\r\n    UNSAFE_componentWillReceiveProps(props) {\r\n        this.setState({ value: props.value });\r\n    }\r\n    handleEdit(e) {\r\n        this.setState({ value: e.target.value });\r\n    }\r\n    handleBlur() {\r\n        const { value } = this.state;\r\n        if (!value) {\r\n            this.setState({ value: this.props.value, edit: false });\r\n            return;\r\n        }\r\n        this.props.onChange(value);\r\n        this.setState({ edit: false });\r\n    }\r\n    render() {\r\n        const { value, edit } = this.state;\r\n        return (<Fragment>\r\n        {edit ? (<input className=\"project-name-input\" name=\"name\" maxLength={25} value={value} onChange={e => this.handleEdit(e)} onBlur={() => this.handleBlur()} onKeyDown={e => {\r\n            if (e.key === \"Enter\") {\r\n                this.handleBlur();\r\n            }\r\n        }} autoFocus/>) : (<span onClick={() => this.setState({ edit: true })} className=\"project-name\">\r\n            {value}\r\n          </span>)}\r\n      </Fragment>);\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport { EditableText } from \"../components/EditableText\";\r\nimport { saveAsJSON, loadFromJSON } from \"../scene\";\r\nexport const actionChangeProjectName = {\r\n    name: \"changeProjectName\",\r\n    perform: (elements, appState, value) => {\r\n        return { appState: { ...appState, name: value } };\r\n    },\r\n    PanelComponent: ({ appState, updateData }) => (<>\r\n      <h5>Name</h5>\r\n      {appState.name && (<EditableText value={appState.name} onChange={(name) => updateData(name)}/>)}\r\n    </>)\r\n};\r\nexport const actionChangeExportBackground = {\r\n    name: \"changeExportBackground\",\r\n    perform: (elements, appState, value) => {\r\n        return { appState: { ...appState, exportBackground: value } };\r\n    },\r\n    PanelComponent: ({ appState, updateData }) => (<label>\r\n      <input type=\"checkbox\" checked={appState.exportBackground} onChange={e => {\r\n        updateData(e.target.checked);\r\n    }}/>\r\n      background\r\n    </label>)\r\n};\r\nexport const actionSaveScene = {\r\n    name: \"saveScene\",\r\n    perform: (elements, appState, value) => {\r\n        saveAsJSON(elements, appState.name);\r\n        return {};\r\n    },\r\n    PanelComponent: ({ updateData }) => (<button id = \"chalkboard_button\" onClick={() => updateData(null)}>Save as...</button>)\r\n};\r\nexport const actionLoadScene = {\r\n    name: \"loadScene\",\r\n    perform: (elements, appState, loadedElements) => {\r\n        return { elements: loadedElements };\r\n    },\r\n    PanelComponent: ({ updateData }) => (<button id = \"chalkboard_button\" onClick={() => {\r\n        loadFromJSON().then(({ elements }) => {\r\n            updateData(elements);\r\n        });\r\n    }}>\r\n      Load file...\r\n    </button>)\r\n};\r\n","import { isTextElement, redrawTextBoundingBox } from \"../element\";\r\nimport { META_KEY } from \"../keys\";\r\nlet copiedStyles = \"{}\";\r\nexport const actionCopyStyles = {\r\n    name: \"copyStyles\",\r\n    perform: elements => {\r\n        const element = elements.find(el => el.isSelected);\r\n        if (element) {\r\n            copiedStyles = JSON.stringify(element);\r\n        }\r\n        return {};\r\n    },\r\n    contextItemLabel: \"Copy Styles\",\r\n    keyTest: event => event[META_KEY] && event.shiftKey && event.code === \"KeyC\",\r\n    contextMenuOrder: 0\r\n};\r\nexport const actionPasteStyles = {\r\n    name: \"pasteStyles\",\r\n    perform: elements => {\r\n        const pastedElement = JSON.parse(copiedStyles);\r\n        return {\r\n            elements: elements.map(element => {\r\n                var _a, _b, _c, _d, _e, _f, _g;\r\n                if (element.isSelected) {\r\n                    const newElement = {\r\n                        ...element,\r\n                        backgroundColor: (_a = pastedElement) === null || _a === void 0 ? void 0 : _a.backgroundColor,\r\n                        strokeWidth: (_b = pastedElement) === null || _b === void 0 ? void 0 : _b.strokeWidth,\r\n                        strokeColor: (_c = pastedElement) === null || _c === void 0 ? void 0 : _c.strokeColor,\r\n                        fillStyle: (_d = pastedElement) === null || _d === void 0 ? void 0 : _d.fillStyle,\r\n                        opacity: (_e = pastedElement) === null || _e === void 0 ? void 0 : _e.opacity,\r\n                        roughness: (_f = pastedElement) === null || _f === void 0 ? void 0 : _f.roughness\r\n                    };\r\n                    if (isTextElement(newElement)) {\r\n                        newElement.font = (_g = pastedElement) === null || _g === void 0 ? void 0 : _g.font;\r\n                        redrawTextBoundingBox(newElement);\r\n                    }\r\n                    return newElement;\r\n                }\r\n                return element;\r\n            })\r\n        };\r\n    },\r\n    contextItemLabel: \"Paste Styles\",\r\n    keyTest: event => event[META_KEY] && event.shiftKey && event.code === \"KeyV\",\r\n    contextMenuOrder: 1\r\n};\r\n","import React, { useState } from \"react\";\r\nexport const Panel = ({ title, children, defaultCollapsed = false, hide = false }) => {\r\n    const [collapsed, setCollapsed] = useState(defaultCollapsed);\r\n    if (hide)\r\n        return null;\r\n    return (<div className=\"panel\">\r\n      <h4>{title}</h4>\r\n      <button className=\"btn-panel-collapse\" id = \"chalkboard_button\" type=\"button\" onClick={e => {\r\n        e.preventDefault();\r\n        setCollapsed(collapsed => !collapsed);\r\n    }}>\r\n        {<span className={`btn-panel-collapse-icon ${collapsed ? \"btn-panel-collapse-icon-closed\" : \"\"}`}>\r\n            ▼\r\n          </span>}\r\n      </button>\r\n      {!collapsed && <div className=\"panelColumn\">{children}</div>}\r\n    </div>);\r\n};\r\n","import React from \"react\";\r\nimport { SHAPES } from \"../../shapes\";\r\nimport { capitalizeString } from \"../../utils\";\r\nimport { Panel } from \"../Panel\";\r\nexport const PanelTools = ({ activeTool, onToolChange }) => {\r\n    return (<Panel title=\"Shapes\">\r\n      <div className=\"panelTools\">\r\n        {SHAPES.map(({ value, icon }) => (<label key={value} className=\"tool\" title={`${capitalizeString(value)} - ${capitalizeString(value)[0]}`}>\r\n            <input type=\"radio\" className = {value} checked={activeTool === value} onChange={() => {\r\n        onToolChange(value);\r\n    }}/>\r\n            <div className=\"toolIcon\">{icon}</div>\r\n          </label>))}\r\n      </div>\r\n    </Panel>);\r\n};\r\n","import React from \"react\";\r\nexport const PanelSelection = ({ actionManager, elements, appState, syncActionResult }) => {\r\n    return (<div>\r\n      <div className=\"buttonList\">\r\n        {actionManager.renderAction(\"bringForward\", elements, appState, syncActionResult)}\r\n        {actionManager.renderAction(\"bringToFront\", elements, appState, syncActionResult)}\r\n        {actionManager.renderAction(\"sendBackward\", elements, appState, syncActionResult)}\r\n        {actionManager.renderAction(\"sendToBack\", elements, appState, syncActionResult)}\r\n      </div>\r\n    </div>);\r\n};\r\n","import React from \"react\";\r\nimport { Panel } from \"../Panel\";\r\nexport const PanelCanvas = ({ actionManager, elements, appState, syncActionResult }) => {\r\n    return (<Panel title=\"Canvas\">\r\n      {actionManager.renderAction(\"changeViewBackgroundColor\", elements, appState, syncActionResult)}\r\n\r\n      {actionManager.renderAction(\"clearCanvas\", elements, appState, syncActionResult)}\r\n    </Panel>);\r\n};\r\n","import React from \"react\";\r\nimport { Panel } from \"../Panel\";\r\nimport \"./panelExport.css\";\r\n// fa-clipboard\r\nconst ClipboardIcon = () => (<svg viewBox=\"0 0 384 512\">\r\n    <path fill=\"currentColor\" d=\"M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z\"></path>\r\n  </svg>);\r\nconst probablySupportsClipboard = \"toBlob\" in HTMLCanvasElement.prototype &&\r\n    \"clipboard\" in navigator &&\r\n    \"write\" in navigator.clipboard &&\r\n    \"ClipboardItem\" in window;\r\nexport const PanelExport = ({ actionManager, elements, appState, syncActionResult, onExportCanvas }) => {\r\n    return (<Panel title=\"Export\">\r\n      <div className=\"panelColumn\">\r\n        {actionManager.renderAction(\"changeProjectName\", elements, appState, syncActionResult)}\r\n        <h5>Image</h5>\r\n        <div className=\"panelExport-imageButtons\">\r\n          <button className=\"panelExport-exportToPngButton\" id = \"chalkboard_button\" onClick={() => onExportCanvas(\"png\")}>\r\n            Export to PNG\r\n          </button>\r\n          {probablySupportsClipboard && (<button className=\"panelExport-exportToClipboardButton\" id = \"chalkboard_button\" onClick={() => onExportCanvas(\"clipboard\")} title=\"Copy to clipboard (experimental)\">\r\n              <ClipboardIcon />\r\n            </button>)}\r\n        </div>\r\n        {actionManager.renderAction(\"changeExportBackground\", elements, appState, syncActionResult)}\r\n\r\n        <h5>Scene</h5>\r\n        {actionManager.renderAction(\"saveScene\", elements, appState, syncActionResult)}\r\n        {actionManager.renderAction(\"loadScene\", elements, appState, syncActionResult)}\r\n      </div>\r\n    </Panel>);\r\n};\r\n","import React from \"react\";\r\nimport { PanelTools } from \"./panels/PanelTools\";\r\nimport { Panel } from \"./Panel\";\r\nimport { PanelSelection } from \"./panels/PanelSelection\";\r\nimport {\r\n  hasBackground,\r\n  someElementIsSelected,\r\n  hasStroke,\r\n  hasText,\r\n  exportCanvas,\r\n} from \"../scene\";\r\nimport { PanelCanvas } from \"./panels/PanelCanvas\";\r\nimport { PanelExport } from \"./panels/PanelExport\";\r\nexport const SidePanel = ({\r\n  actionManager,\r\n  syncActionResult,\r\n  elements,\r\n  onToolChange,\r\n  appState,\r\n  canvas,\r\n}) => {\r\n  return (\r\n    <div className=\"sidePanel\">\r\n      <PanelTools\r\n        activeTool={appState.elementType}\r\n        onToolChange={(value) => {\r\n          onToolChange(value);\r\n        }}\r\n      />\r\n      <Panel title=\"Selection\" hide={!someElementIsSelected(elements)}>\r\n        <PanelSelection\r\n          actionManager={actionManager}\r\n          syncActionResult={syncActionResult}\r\n          elements={elements}\r\n          appState={appState}\r\n        />\r\n\r\n        {actionManager.renderAction(\r\n          \"changeStrokeColor\",\r\n          elements,\r\n          appState,\r\n          syncActionResult\r\n        )}\r\n\r\n        {hasBackground(elements) && (\r\n          <>\r\n            {actionManager.renderAction(\r\n              \"changeBackgroundColor\",\r\n              elements,\r\n              appState,\r\n              syncActionResult\r\n            )}\r\n\r\n            {actionManager.renderAction(\r\n              \"changeFillStyle\",\r\n              elements,\r\n              appState,\r\n              syncActionResult\r\n            )}\r\n          </>\r\n        )}\r\n\r\n        {hasStroke(elements) && (\r\n          <>\r\n            {actionManager.renderAction(\r\n              \"changeStrokeWidth\",\r\n              elements,\r\n              appState,\r\n              syncActionResult\r\n            )}\r\n\r\n            {actionManager.renderAction(\r\n              \"changeSloppiness\",\r\n              elements,\r\n              appState,\r\n              syncActionResult\r\n            )}\r\n          </>\r\n        )}\r\n\r\n        {hasText(elements) && (\r\n          <>\r\n            {actionManager.renderAction(\r\n              \"changeFontSize\",\r\n              elements,\r\n              appState,\r\n              syncActionResult\r\n            )}\r\n\r\n            {actionManager.renderAction(\r\n              \"changeFontFamily\",\r\n              elements,\r\n              appState,\r\n              syncActionResult\r\n            )}\r\n          </>\r\n        )}\r\n\r\n        {actionManager.renderAction(\r\n          \"changeOpacity\",\r\n          elements,\r\n          appState,\r\n          syncActionResult\r\n        )}\r\n\r\n        {actionManager.renderAction(\r\n          \"deleteSelectedElements\",\r\n          elements,\r\n          appState,\r\n          syncActionResult\r\n        )}\r\n      </Panel>\r\n      <PanelCanvas\r\n        actionManager={actionManager}\r\n        syncActionResult={syncActionResult}\r\n        elements={elements}\r\n        appState={appState}\r\n      />\r\n      <PanelExport\r\n        actionManager={actionManager}\r\n        syncActionResult={syncActionResult}\r\n        elements={elements}\r\n        appState={appState}\r\n        onExportCanvas={(type) =>\r\n          exportCanvas(type, elements, canvas, appState)\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport rough from \"roughjs/bundled/rough.esm\";\r\nimport {\r\n  newElement,\r\n  duplicateElement,\r\n  resizeTest,\r\n  isTextElement,\r\n  textWysiwyg,\r\n  getElementAbsoluteCoords,\r\n} from \"./element\";\r\nimport {\r\n  clearSelection,\r\n  deleteSelectedElements,\r\n  setSelection,\r\n  isOverScrollBars,\r\n  restoreFromLocalStorage,\r\n  saveToLocalStorage,\r\n  getElementAtPosition,\r\n  createScene,\r\n  getElementContainingPosition,\r\n} from \"./scene\";\r\nimport { renderScene } from \"./renderer\";\r\nimport { getDateTime, isInputLike, measureText } from \"./utils\";\r\nimport { KEYS, META_KEY, isArrowKey } from \"./keys\";\r\nimport { findShapeByKey, shapesShortcutKeys } from \"./shapes\";\r\nimport { createHistory } from \"./history\";\r\nimport ContextMenu from \"./components/ContextMenu\";\r\nimport \"./styles.css\";\r\nimport { getElementWithResizeHandler } from \"./element/resizeTest\";\r\nimport {\r\n  ActionManager,\r\n  actionDeleteSelected,\r\n  actionSendBackward,\r\n  actionBringForward,\r\n  actionSendToBack,\r\n  actionBringToFront,\r\n  actionSelectAll,\r\n  actionChangeStrokeColor,\r\n  actionChangeBackgroundColor,\r\n  actionChangeOpacity,\r\n  actionChangeStrokeWidth,\r\n  actionChangeFillStyle,\r\n  actionChangeSloppiness,\r\n  actionChangeFontSize,\r\n  actionChangeFontFamily,\r\n  actionChangeViewBackgroundColor,\r\n  actionClearCanvas,\r\n  actionChangeProjectName,\r\n  actionChangeExportBackground,\r\n  actionLoadScene,\r\n  actionSaveScene,\r\n  actionCopyStyles,\r\n  actionPasteStyles,\r\n} from \"./actions\";\r\nimport { SidePanel } from \"./components/SidePanel\";\r\nlet { elements } = createScene();\r\nconst { history } = createHistory();\r\nconst DEFAULT_PROJECT_NAME = `chalkboard-${getDateTime()}`;\r\nconst CANVAS_WINDOW_OFFSET_LEFT = 250;\r\nconst CANVAS_WINDOW_OFFSET_TOP = 0;\r\nfunction resetCursor() {\r\n  document.documentElement.style.cursor = \"\";\r\n}\r\nfunction addTextElement(element, text, font) {\r\n  resetCursor();\r\n  if (text === null || text === \"\") {\r\n    return false;\r\n  }\r\n  const metrics = measureText(text, font);\r\n  element.text = text;\r\n  element.font = font;\r\n  // Center the text\r\n  element.x -= metrics.width / 2;\r\n  element.y -= metrics.height / 2;\r\n  element.width = metrics.width;\r\n  element.height = metrics.height;\r\n  element.baseline = metrics.baseline;\r\n  return true;\r\n}\r\nconst ELEMENT_SHIFT_TRANSLATE_AMOUNT = 5;\r\nconst ELEMENT_TRANSLATE_AMOUNT = 1;\r\nconst TEXT_TO_CENTER_SNAP_THRESHOLD = 30;\r\nlet lastCanvasWidth = -1;\r\nlet lastCanvasHeight = -1;\r\nlet lastMouseUp = null;\r\nexport function viewportCoordsToSceneCoords(\r\n  { clientX, clientY },\r\n  { scrollX, scrollY }\r\n) {\r\n  const x = clientX - CANVAS_WINDOW_OFFSET_LEFT - scrollX;\r\n  const y = clientY - CANVAS_WINDOW_OFFSET_TOP - scrollY;\r\n  return { x, y };\r\n}\r\nexport default class App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.canvas = null;\r\n    this.rc = null;\r\n    this.actionManager = new ActionManager();\r\n    this.syncActionResult = (res) => {\r\n      if (res.elements !== undefined) {\r\n        elements = res.elements;\r\n        this.forceUpdate();\r\n      }\r\n      if (res.appState !== undefined) {\r\n        this.setState({ ...res.appState });\r\n      }\r\n    };\r\n    this.state = {\r\n      draggingElement: null,\r\n      resizingElement: null,\r\n      elementType: \"selection\",\r\n      exportBackground: true,\r\n      currentItemStrokeColor: \"#000000\",\r\n      currentItemBackgroundColor: \"#ffffff\",\r\n      currentItemFont: \"20px Virgil\",\r\n      viewBackgroundColor: \"#ffffff\",\r\n      scrollX: 0,\r\n      scrollY: 0,\r\n      cursorX: 0,\r\n      cursorY: 0,\r\n      name: DEFAULT_PROJECT_NAME,\r\n    };\r\n    this.onResize = () => {\r\n      this.forceUpdate();\r\n    };\r\n    this.getCurrentCursorPosition = (e) => {\r\n      this.setState({ cursorX: e.x, cursorY: e.y });\r\n    };\r\n    this.onKeyDown = (event) => {\r\n      if (event.key === KEYS.ESCAPE) {\r\n        elements = clearSelection(elements);\r\n        this.forceUpdate();\r\n        this.setState({ elementType: \"selection\" });\r\n        if (window.document.activeElement instanceof HTMLElement) {\r\n          window.document.activeElement.blur();\r\n        }\r\n        event.preventDefault();\r\n        return;\r\n      }\r\n      if (isInputLike(event.target)){\r\n       \r\n        return;\r\n      } \r\n      const data = this.actionManager.handleKeyDown(\r\n        event,\r\n        elements,\r\n        this.state\r\n      );\r\n      this.syncActionResult(data);\r\n      if (data.elements !== undefined && data.appState !== undefined) {\r\n        return;\r\n      }\r\n      if (isArrowKey(event.key)) {\r\n        const step = event.shiftKey\r\n          ? ELEMENT_SHIFT_TRANSLATE_AMOUNT\r\n          : ELEMENT_TRANSLATE_AMOUNT;\r\n        elements = elements.map((el) => {\r\n          if (el.isSelected) {\r\n            const element = { ...el };\r\n            if (event.key === KEYS.ARROW_LEFT) element.x -= step;\r\n            else if (event.key === KEYS.ARROW_RIGHT) element.x += step;\r\n            else if (event.key === KEYS.ARROW_UP) element.y -= step;\r\n            else if (event.key === KEYS.ARROW_DOWN) element.y += step;\r\n            return element;\r\n          }\r\n          return el;\r\n        });\r\n        this.forceUpdate();\r\n        event.preventDefault();\r\n      } else if (shapesShortcutKeys.includes(event.key.toLowerCase())) {\r\n        this.setState({ elementType: findShapeByKey(event.key) });\r\n      } else if (event[META_KEY] && event.code === \"KeyZ\") {\r\n        if (event.shiftKey) {\r\n          // Redo action\r\n          const data = history.redoOnce(elements);\r\n          if (data !== null) {\r\n            elements = data;\r\n          }\r\n        } else {\r\n          // undo action\r\n          const data = history.undoOnce(elements);\r\n          if (data !== null) {\r\n            elements = data;\r\n          }\r\n        }\r\n        this.forceUpdate();\r\n        event.preventDefault();\r\n      }\r\n    };\r\n    this.copyToClipboard = () => {\r\n      if (navigator.clipboard) {\r\n        const text = JSON.stringify(\r\n          elements.filter((element) => element.isSelected)\r\n        );\r\n        navigator.clipboard.writeText(text);\r\n      }\r\n    };\r\n    this.pasteFromClipboard = () => {\r\n      if (navigator.clipboard) {\r\n        navigator.clipboard\r\n          .readText()\r\n          .then((text) => this.addElementsFromPaste(text));\r\n      }\r\n    };\r\n    this.handleWheel = (e) => {\r\n      e.preventDefault();\r\n      const { deltaX, deltaY } = e;\r\n      this.setState((state) => ({\r\n        scrollX: state.scrollX - deltaX,\r\n        scrollY: state.scrollY - deltaY,\r\n      }));\r\n    };\r\n    this.addElementsFromPaste = (paste) => {\r\n      let parsedElements;\r\n      try {\r\n        parsedElements = JSON.parse(paste);\r\n      } catch (e) {}\r\n      if (\r\n        Array.isArray(parsedElements) &&\r\n        parsedElements.length > 0 &&\r\n        parsedElements[0].type // need to implement a better check here...\r\n      ) {\r\n        elements = clearSelection(elements);\r\n        let subCanvasX1 = Infinity;\r\n        let subCanvasX2 = 0;\r\n        let subCanvasY1 = Infinity;\r\n        let subCanvasY2 = 0;\r\n        const minX = Math.min(...parsedElements.map((element) => element.x));\r\n        const minY = Math.min(...parsedElements.map((element) => element.y));\r\n        const distance = (x, y) => {\r\n          return Math.abs(x > y ? x - y : y - x);\r\n        };\r\n        parsedElements.forEach((parsedElement) => {\r\n          const [x1, y1, x2, y2] = getElementAbsoluteCoords(parsedElement);\r\n          subCanvasX1 = Math.min(subCanvasX1, x1);\r\n          subCanvasY1 = Math.min(subCanvasY1, y1);\r\n          subCanvasX2 = Math.max(subCanvasX2, x2);\r\n          subCanvasY2 = Math.max(subCanvasY2, y2);\r\n        });\r\n        const elementsCenterX = distance(subCanvasX1, subCanvasX2) / 2;\r\n        const elementsCenterY = distance(subCanvasY1, subCanvasY2) / 2;\r\n        const dx =\r\n          this.state.cursorX -\r\n          this.state.scrollX -\r\n          CANVAS_WINDOW_OFFSET_LEFT -\r\n          elementsCenterX;\r\n        const dy =\r\n          this.state.cursorY -\r\n          this.state.scrollY -\r\n          CANVAS_WINDOW_OFFSET_TOP -\r\n          elementsCenterY;\r\n        elements = [\r\n          ...elements,\r\n          ...parsedElements.map((parsedElement) => {\r\n            const duplicate = duplicateElement(parsedElement);\r\n            duplicate.x += dx - minX;\r\n            duplicate.y += dy - minY;\r\n            return duplicate;\r\n          }),\r\n        ];\r\n        this.forceUpdate();\r\n      }\r\n    };\r\n    this.actionManager.registerAction(actionDeleteSelected);\r\n    this.actionManager.registerAction(actionSendToBack);\r\n    this.actionManager.registerAction(actionBringToFront);\r\n    this.actionManager.registerAction(actionSendBackward);\r\n    this.actionManager.registerAction(actionBringForward);\r\n    this.actionManager.registerAction(actionSelectAll);\r\n    this.actionManager.registerAction(actionChangeStrokeColor);\r\n    this.actionManager.registerAction(actionChangeBackgroundColor);\r\n    this.actionManager.registerAction(actionChangeFillStyle);\r\n    this.actionManager.registerAction(actionChangeStrokeWidth);\r\n    this.actionManager.registerAction(actionChangeOpacity);\r\n    this.actionManager.registerAction(actionChangeSloppiness);\r\n    this.actionManager.registerAction(actionChangeFontSize);\r\n    this.actionManager.registerAction(actionChangeFontFamily);\r\n    this.actionManager.registerAction(actionChangeViewBackgroundColor);\r\n    this.actionManager.registerAction(actionClearCanvas);\r\n    this.actionManager.registerAction(actionChangeProjectName);\r\n    this.actionManager.registerAction(actionChangeExportBackground);\r\n    this.actionManager.registerAction(actionSaveScene);\r\n    this.actionManager.registerAction(actionLoadScene);\r\n    this.actionManager.registerAction(actionCopyStyles);\r\n    this.actionManager.registerAction(actionPasteStyles);\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener(\"keydown\", this.onKeyDown, false);\r\n    document.addEventListener(\"mousemove\", this.getCurrentCursorPosition);\r\n    window.addEventListener(\"resize\", this.onResize, false);\r\n    const { elements: newElements, appState } = restoreFromLocalStorage();\r\n    if (newElements) {\r\n      elements = newElements;\r\n    }\r\n    if (appState) {\r\n      this.setState(appState);\r\n    } else {\r\n      this.forceUpdate();\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"keydown\", this.onKeyDown, false);\r\n    document.removeEventListener(\r\n      \"mousemove\",\r\n      this.getCurrentCursorPosition,\r\n      false\r\n    );\r\n    window.removeEventListener(\"resize\", this.onResize, false);\r\n  }\r\n\r\n  render() {\r\n    const canvasWidth = window.innerWidth - CANVAS_WINDOW_OFFSET_LEFT;\r\n    const canvasHeight = window.innerHeight - CANVAS_WINDOW_OFFSET_TOP;\r\n    return (\r\n      <div\r\n        className=\"chalkboard_container\"\r\n        onCut={(e) => {\r\n          e.clipboardData.setData(\r\n            \"text/plain\",\r\n            JSON.stringify(elements.filter((element) => element.isSelected))\r\n          );\r\n          elements = deleteSelectedElements(elements);\r\n          this.forceUpdate();\r\n          e.preventDefault();\r\n        }}\r\n        onCopy={(e) => {\r\n          e.clipboardData.setData(\r\n            \"text/plain\",\r\n            JSON.stringify(elements.filter((element) => element.isSelected))\r\n          );\r\n          e.preventDefault();\r\n        }}\r\n        onPaste={(e) => {\r\n          const paste = e.clipboardData.getData(\"text\");\r\n          this.addElementsFromPaste(paste);\r\n          e.preventDefault();\r\n        }}\r\n      >\r\n        <SidePanel\r\n          actionManager={this.actionManager}\r\n          syncActionResult={this.syncActionResult}\r\n          appState={{ ...this.state }}\r\n          elements={elements}\r\n          onToolChange={(value) => {\r\n            this.setState({ elementType: value });\r\n            elements = clearSelection(elements);\r\n            document.documentElement.style.cursor =\r\n              value === \"text\" ? \"text\" : \"crosshair\";\r\n            this.forceUpdate();\r\n          }}\r\n          canvas={this.canvas}\r\n        />\r\n        <canvas\r\n          id=\"canvas\"\r\n          style={{\r\n            width: canvasWidth,\r\n            height: canvasHeight,\r\n          }}\r\n          width={canvasWidth * window.devicePixelRatio}\r\n          height={canvasHeight * window.devicePixelRatio}\r\n          ref={(canvas) => {\r\n            if (this.canvas === null) {\r\n              this.canvas = canvas;\r\n              this.rc = rough.canvas(this.canvas);\r\n            }\r\n            if (this.removeWheelEventListener) {\r\n              this.removeWheelEventListener();\r\n              this.removeWheelEventListener = undefined;\r\n            }\r\n            if (canvas) {\r\n              canvas.addEventListener(\"wheel\", this.handleWheel, {\r\n                passive: false,\r\n              });\r\n              this.removeWheelEventListener = () =>\r\n                canvas.removeEventListener(\"wheel\", this.handleWheel);\r\n              // Whenever React sets the width/height of the canvas element,\r\n              // the context loses the scale transform. We need to re-apply it\r\n              if (\r\n                canvasWidth !== lastCanvasWidth ||\r\n                canvasHeight !== lastCanvasHeight\r\n              ) {\r\n                lastCanvasWidth = canvasWidth;\r\n                lastCanvasHeight = canvasHeight;\r\n                canvas\r\n                  .getContext(\"2d\")\r\n                  .scale(window.devicePixelRatio, window.devicePixelRatio);\r\n              }\r\n            }\r\n          }}\r\n          \r\n          onContextMenu={(e) => {\r\n            e.preventDefault();\r\n            const { x, y } = viewportCoordsToSceneCoords(e, this.state);\r\n            const element = getElementAtPosition(elements, x, y);\r\n            if (!element) {\r\n              ContextMenu.push({\r\n                options: [\r\n                  navigator.clipboard && {\r\n                    label: \"Paste\",\r\n                    action: () => this.pasteFromClipboard(),\r\n                  },\r\n                ],\r\n                top: e.clientY,\r\n                left: e.clientX,\r\n              });\r\n              return;\r\n            }\r\n            if (!element.isSelected) {\r\n              elements = clearSelection(elements);\r\n              element.isSelected = true;\r\n              this.forceUpdate();\r\n            }\r\n            ContextMenu.push({\r\n              options: [\r\n                navigator.clipboard && {\r\n                  label: \"Copy\",\r\n                  action: this.copyToClipboard,\r\n                },\r\n                navigator.clipboard && {\r\n                  label: \"Paste\",\r\n                  action: () => this.pasteFromClipboard(),\r\n                },\r\n                ...this.actionManager.getContextMenuItems(\r\n                  elements,\r\n                  this.state,\r\n                  this.syncActionResult\r\n                ),\r\n              ],\r\n              top: e.clientY,\r\n              left: e.clientX,\r\n            });\r\n          }}\r\n          onMouseDown =\r\n          {(e) => {\r\n            if (lastMouseUp !== null) {\r\n              // Unfortunately, sometimes we don't get a mouseup after a mousedown,\r\n              // this can happen when a contextual menu or alert is triggered. In order to avoid\r\n              // being in a weird state, we clean up on the next mousedown\r\n              lastMouseUp(e);\r\n            }\r\n            // only handle left mouse button\r\n            if (e.button !== 0) return;\r\n            // fixes mousemove causing selection of UI texts #32\r\n            e.preventDefault();\r\n            // Preventing the event above disables default behavior\r\n            //  of defocusing potentially focused input, which is what we want\r\n            //  when clicking inside the canvas.\r\n            if (isInputLike(document.activeElement)) {\r\n              document.activeElement.blur();\r\n            }\r\n            // Handle scrollbars dragging\r\n            const { isOverHorizontalScrollBar, isOverVerticalScrollBar } =\r\n              isOverScrollBars(\r\n                elements,\r\n                e.clientX - CANVAS_WINDOW_OFFSET_LEFT,\r\n                e.clientY - CANVAS_WINDOW_OFFSET_TOP,\r\n                canvasWidth,\r\n                canvasHeight,\r\n                this.state.scrollX,\r\n                this.state.scrollY\r\n              );\r\n            const { x, y } = viewportCoordsToSceneCoords(e, this.state);\r\n            const element = newElement(\r\n              this.state.elementType,\r\n              x,\r\n              y,\r\n              this.state.currentItemStrokeColor,\r\n              this.state.currentItemBackgroundColor,\r\n              \"hachure\",\r\n              1,\r\n              1,\r\n              100\r\n            );\r\n            let resizeHandle = false;\r\n            let isResizingElements = false;\r\n            let draggingOccured = false;\r\n            let hitElement = null;\r\n            let elementIsAddedToSelection = false;\r\n            if (this.state.elementType === \"selection\") {\r\n              const resizeElement = getElementWithResizeHandler(\r\n                elements,\r\n                { x, y },\r\n                this.state\r\n              );\r\n              this.setState({\r\n                resizingElement: resizeElement ? resizeElement.element : null,\r\n              });\r\n              if (resizeElement) {\r\n                resizeHandle = resizeElement.resizeHandle;\r\n                document.documentElement.style.cursor = `${resizeHandle}-resize`;\r\n                isResizingElements = true;\r\n              } else {\r\n                const selected = getElementAtPosition(\r\n                  elements.filter((el) => el.isSelected),\r\n                  x,\r\n                  y\r\n                );\r\n                // clear selection if shift is not clicked\r\n                if (!selected && !e.shiftKey) {\r\n                  elements = clearSelection(elements);\r\n                }\r\n                hitElement = getElementAtPosition(elements, x, y);\r\n                // If we click on something\r\n                if (hitElement) {\r\n                  // deselect if item is selected\r\n                  // if shift is not clicked, this will always return true\r\n                  // otherwise, it will trigger selection based on current\r\n                  // state of the box\r\n                  if (!hitElement.isSelected) {\r\n                    hitElement.isSelected = true;\r\n                    elementIsAddedToSelection = true;\r\n                  }\r\n                  // No matter what, we select it\r\n                  // We duplicate the selected element if alt is pressed on Mouse down\r\n                  if (e.altKey) {\r\n                    elements = [\r\n                      ...elements,\r\n                      ...elements.reduce((duplicates, element) => {\r\n                        if (element.isSelected) {\r\n                          duplicates = duplicates.concat(\r\n                            duplicateElement(element)\r\n                          );\r\n                          element.isSelected = false;\r\n                        }\r\n                        return duplicates;\r\n                      }, []),\r\n                    ];\r\n                  }\r\n                }\r\n              }\r\n            } \r\n            else {\r\n              elements = clearSelection(elements);\r\n            }\r\n            if (isTextElement(element)) {\r\n              let textX = e.clientX;\r\n              let textY = e.clientY;\r\n              if (!e.altKey) {\r\n                const snappedToCenterPosition =\r\n                  this.getTextWysiwygSnappedToCenterPosition(x, y);\r\n                if (snappedToCenterPosition) {\r\n                  element.x = snappedToCenterPosition.elementCenterX;\r\n                  element.y = snappedToCenterPosition.elementCenterY;\r\n                  textX = snappedToCenterPosition.wysiwygX;\r\n                  textY = snappedToCenterPosition.wysiwygY;\r\n                }\r\n              }\r\n              textWysiwyg({\r\n                initText: \"\",\r\n                x: textX,\r\n                y: textY,\r\n                strokeColor: this.state.currentItemStrokeColor,\r\n                font: this.state.currentItemFont,\r\n                onSubmit: (text) => {\r\n                  addTextElement(element, text, this.state.currentItemFont);\r\n                  elements = [...elements, { ...element, isSelected: true }];\r\n                  this.setState({\r\n                    draggingElement: null,\r\n                    elementType: \"selection\",\r\n                  });\r\n                },\r\n              });\r\n              return;\r\n            }\r\n            if (this.state.elementType === \"text\") {\r\n              elements = [...elements, { ...element, isSelected: true }];\r\n              this.setState({\r\n                draggingElement: null,\r\n                elementType: \"selection\",\r\n              });\r\n            } else {\r\n              elements = [...elements, element];\r\n              this.setState({ draggingElement: element });\r\n            }\r\n            let lastX = x;\r\n            let lastY = y;\r\n            if (isOverHorizontalScrollBar || isOverVerticalScrollBar) {\r\n              lastX = e.clientX - CANVAS_WINDOW_OFFSET_LEFT;\r\n              lastY = e.clientY - CANVAS_WINDOW_OFFSET_TOP;\r\n            }\r\n            const onMouseMove = (e) => {\r\n              var _a;\r\n              const target = e.target;\r\n              if (!(target instanceof HTMLElement)) {\r\n                return;\r\n              }\r\n              if (isOverHorizontalScrollBar) {\r\n                const x = e.clientX - CANVAS_WINDOW_OFFSET_LEFT;\r\n                const dx = x - lastX;\r\n                this.setState((state) => ({ scrollX: state.scrollX - dx }));\r\n                lastX = x;\r\n                return;\r\n              }\r\n              if (isOverVerticalScrollBar) {\r\n                const y = e.clientY - CANVAS_WINDOW_OFFSET_TOP;\r\n                const dy = y - lastY;\r\n                this.setState((state) => ({ scrollY: state.scrollY - dy }));\r\n                lastY = y;\r\n                return;\r\n              }\r\n              if (isResizingElements && this.state.resizingElement) {\r\n                const el = this.state.resizingElement;\r\n                const selectedElements = elements.filter((el) => el.isSelected);\r\n                if (selectedElements.length === 1) {\r\n                  const { x, y } = viewportCoordsToSceneCoords(e, this.state);\r\n                  selectedElements.forEach((element) => {\r\n                    switch (resizeHandle) {\r\n                      case \"nw\":\r\n                        element.width += element.x - lastX;\r\n                        element.x = lastX;\r\n                        if (e.shiftKey) {\r\n                          element.y += element.height - element.width;\r\n                          element.height = element.width;\r\n                        } else {\r\n                          element.height += element.y - lastY;\r\n                          element.y = lastY;\r\n                        }\r\n                        break;\r\n                      case \"ne\":\r\n                        element.width = lastX - element.x;\r\n                        if (e.shiftKey) {\r\n                          element.y += element.height - element.width;\r\n                          element.height = element.width;\r\n                        } else {\r\n                          element.height += element.y - lastY;\r\n                          element.y = lastY;\r\n                        }\r\n                        break;\r\n                      case \"sw\":\r\n                        element.width += element.x - lastX;\r\n                        element.x = lastX;\r\n                        if (e.shiftKey) {\r\n                          element.height = element.width;\r\n                        } else {\r\n                          element.height = lastY - element.y;\r\n                        }\r\n                        break;\r\n                      case \"se\":\r\n                        element.width += x - lastX;\r\n                        if (e.shiftKey) {\r\n                          element.height = element.width;\r\n                        } else {\r\n                          element.height += y - lastY;\r\n                        }\r\n                        break;\r\n                      case \"n\":\r\n                        element.height += element.y - lastY;\r\n                        element.y = lastY;\r\n                        break;\r\n                      case \"w\":\r\n                        element.width += element.x - lastX;\r\n                        element.x = lastX;\r\n                        break;\r\n                      case \"s\":\r\n                        element.height = lastY - element.y;\r\n                        break;\r\n                      case \"e\":\r\n                        element.width = lastX - element.x;\r\n                        break;\r\n                    }\r\n                    el.x = element.x;\r\n                    el.y = element.y;\r\n                  });\r\n                  lastX = x;\r\n                  lastY = y;\r\n                  // We don't want to save history when resizing an element\r\n                  history.skipRecording();\r\n                  this.forceUpdate();\r\n                  return;\r\n                }\r\n              }\r\n              if (\r\n                (_a = hitElement) === null || _a === void 0\r\n                  ? void 0\r\n                  : _a.isSelected\r\n              ) {\r\n                // Marking that click was used for dragging to check\r\n                // if elements should be deselected on mouseup\r\n                draggingOccured = true;\r\n                const selectedElements = elements.filter((el) => el.isSelected);\r\n                if (selectedElements.length) {\r\n                  const { x, y } = viewportCoordsToSceneCoords(e, this.state);\r\n                  selectedElements.forEach((element) => {\r\n                    element.x += x - lastX;\r\n                    element.y += y - lastY;\r\n                  });\r\n                  lastX = x;\r\n                  lastY = y;\r\n                  // We don't want to save history when dragging an element to initially size it\r\n                  history.skipRecording();\r\n                  this.forceUpdate();\r\n                  return;\r\n                }\r\n              }\r\n              // It is very important to read this.state within each move event,\r\n              // otherwise we would read a stale one!\r\n              const draggingElement = this.state.draggingElement;\r\n              if (!draggingElement) return;\r\n              let width =\r\n                e.clientX -\r\n                CANVAS_WINDOW_OFFSET_LEFT -\r\n                draggingElement.x -\r\n                this.state.scrollX;\r\n              let height =\r\n                e.clientY -\r\n                CANVAS_WINDOW_OFFSET_TOP -\r\n                draggingElement.y -\r\n                this.state.scrollY;\r\n              draggingElement.width = width;\r\n              // Make a perfect square or circle when shift is enabled\r\n              draggingElement.height = e.shiftKey\r\n                ? Math.abs(width) * Math.sign(height)\r\n                : height;\r\n              if (this.state.elementType === \"selection\") {\r\n                elements = setSelection(elements, draggingElement);\r\n              }\r\n              // We don't want to save history when moving an element\r\n              history.skipRecording();\r\n              this.forceUpdate();\r\n            };\r\n            \r\n            const onMouseUp = (e) => {\r\n              const { draggingElement, elementType } = this.state;\r\n              lastMouseUp = null;\r\n              window.removeEventListener(\"mousemove\", onMouseMove);\r\n              window.removeEventListener(\"mouseup\", onMouseUp);\r\n              resetCursor();\r\n              // If click occured on already selected element\r\n              // it is needed to remove selection from other elements\r\n              // or if SHIFT or META key pressed remove selection\r\n              // from hitted element\r\n              //\r\n              // If click occured and elements were dragged or some element\r\n              // was added to selection (on mousedown phase) we need to keep\r\n              // selection unchanged\r\n              if (\r\n                hitElement &&\r\n                !draggingOccured &&\r\n                !elementIsAddedToSelection\r\n              ) {\r\n                if (e.shiftKey) {\r\n                  hitElement.isSelected = false;\r\n                } else {\r\n                  elements = clearSelection(elements);\r\n                  hitElement.isSelected = true;\r\n                }\r\n              }\r\n              if (draggingElement === null) {\r\n                // if no element is clicked, clear the selection and redraw\r\n                elements = clearSelection(elements);\r\n                this.forceUpdate();\r\n                return;\r\n              }\r\n              if (elementType === \"selection\") {\r\n                elements = elements.slice(0, -1);\r\n              } else {\r\n                draggingElement.isSelected = true;\r\n              }\r\n              this.setState({\r\n                draggingElement: null,\r\n                elementType: \"selection\",\r\n              });\r\n              history.resumeRecording();\r\n              this.forceUpdate();\r\n            };\r\n\r\n            lastMouseUp = onMouseUp;\r\n            window.addEventListener(\"mousemove\", onMouseMove);\r\n            window.addEventListener(\"mouseup\", onMouseUp);\r\n            // We don't want to save history on mouseDown, only on mouseUp when it's fully configured\r\n            history.skipRecording();\r\n            this.forceUpdate();\r\n          }}\r\n\r\n          onDoubleClick={(e) => {\r\n            const { x, y } = viewportCoordsToSceneCoords(e, this.state);\r\n            const elementAtPosition = getElementAtPosition(elements, x, y);\r\n            const element = newElement(\r\n              \"text\",\r\n              x,\r\n              y,\r\n              this.state.currentItemStrokeColor,\r\n              this.state.currentItemBackgroundColor,\r\n              \"hachure\",\r\n              1,\r\n              1,\r\n              100\r\n            );\r\n            let initText = \"\";\r\n            let textX = e.clientX;\r\n            let textY = e.clientY;\r\n            if (elementAtPosition && isTextElement(elementAtPosition)) {\r\n              elements = elements.filter(\r\n                (element) => element.id !== elementAtPosition.id\r\n              );\r\n              this.forceUpdate();\r\n              Object.assign(element, elementAtPosition);\r\n              // x and y will change after calling addTextElement function\r\n              element.x = elementAtPosition.x + elementAtPosition.width / 2;\r\n              element.y = elementAtPosition.y + elementAtPosition.height / 2;\r\n              initText = elementAtPosition.text;\r\n              textX =\r\n                this.state.scrollX +\r\n                elementAtPosition.x +\r\n                CANVAS_WINDOW_OFFSET_LEFT +\r\n                elementAtPosition.width / 2;\r\n              textY =\r\n                this.state.scrollY +\r\n                elementAtPosition.y +\r\n                CANVAS_WINDOW_OFFSET_TOP +\r\n                elementAtPosition.height / 2;\r\n            } else if (!e.altKey) {\r\n              const snappedToCenterPosition =\r\n                this.getTextWysiwygSnappedToCenterPosition(x, y);\r\n              if (snappedToCenterPosition) {\r\n                element.x = snappedToCenterPosition.elementCenterX;\r\n                element.y = snappedToCenterPosition.elementCenterY;\r\n                textX = snappedToCenterPosition.wysiwygX;\r\n                textY = snappedToCenterPosition.wysiwygY;\r\n              }\r\n            }\r\n            textWysiwyg({\r\n              initText,\r\n              x: textX,\r\n              y: textY,\r\n              strokeColor: element.strokeColor,\r\n              font: element.font || this.state.currentItemFont,\r\n              onSubmit: (text) => {\r\n                addTextElement(\r\n                  element,\r\n                  text,\r\n                  element.font || this.state.currentItemFont\r\n                );\r\n                elements = [...elements, { ...element, isSelected: true }];\r\n                this.setState({\r\n                  draggingElement: null,\r\n                  elementType: \"selection\",\r\n                });\r\n              },\r\n            });\r\n          }}\r\n\r\n          onMouseMove={(e) => {\r\n            const hasDeselectedButton = Boolean(e.buttons);\r\n            if (hasDeselectedButton || this.state.elementType !== \"selection\") {\r\n              return;\r\n            }\r\n            const { x, y } = viewportCoordsToSceneCoords(e, this.state);\r\n            const resizeElement = getElementWithResizeHandler(\r\n              elements,\r\n              { x, y },\r\n              this.state\r\n            );\r\n            if (resizeElement && resizeElement.resizeHandle) {\r\n              document.documentElement.style.cursor = `${resizeElement.resizeHandle}-resize`;\r\n              return;\r\n            }\r\n            const hitElement = getElementAtPosition(elements, x, y);\r\n            if (hitElement) {\r\n              const resizeHandle = resizeTest(hitElement, x, y, {\r\n                scrollX: this.state.scrollX,\r\n                scrollY: this.state.scrollY,\r\n              });\r\n              document.documentElement.style.cursor = resizeHandle\r\n                ? `${resizeHandle}-resize`\r\n                : `move`;\r\n            } else {\r\n              document.documentElement.style.cursor = ``;\r\n            }\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n  getTextWysiwygSnappedToCenterPosition(x, y) {\r\n    const elementClickedInside = getElementContainingPosition(elements, x, y);\r\n    if (elementClickedInside) {\r\n      const elementCenterX =\r\n        elementClickedInside.x + elementClickedInside.width / 2;\r\n      const elementCenterY =\r\n        elementClickedInside.y + elementClickedInside.height / 2;\r\n      const distanceToCenter = Math.hypot(\r\n        x - elementCenterX,\r\n        y - elementCenterY\r\n      );\r\n      const isSnappedToCenter =\r\n        distanceToCenter < TEXT_TO_CENTER_SNAP_THRESHOLD;\r\n      if (isSnappedToCenter) {\r\n        const wysiwygX =\r\n          this.state.scrollX +\r\n          elementClickedInside.x +\r\n          CANVAS_WINDOW_OFFSET_LEFT +\r\n          elementClickedInside.width / 2;\r\n        const wysiwygY =\r\n          this.state.scrollY +\r\n          elementClickedInside.y +\r\n          CANVAS_WINDOW_OFFSET_TOP +\r\n          elementClickedInside.height / 2;\r\n        return { wysiwygX, wysiwygY, elementCenterX, elementCenterY };\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    renderScene(elements, this.rc, this.canvas, {\r\n      scrollX: this.state.scrollX,\r\n      scrollY: this.state.scrollY,\r\n      viewBackgroundColor: this.state.viewBackgroundColor,\r\n    });\r\n    saveToLocalStorage(elements, this.state);\r\n    if (history.isRecording()) {\r\n      history.pushEntry(history.generateCurrentEntry(elements));\r\n      history.clearRedoStack();\r\n    }\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport IDE from \"../IDE\";\r\nimport DrawingBoard from \"../DrawingBoard/index\";\r\nimport files from \"../../assets/files\";\r\nimport MicRecorder from 'mic-recorder-to-mp3';\r\nimport firebase from 'firebase/app'\r\nimport 'firebase/firestore'\r\nimport 'firebase/storage';\r\nimport './style.css'\r\n\r\nvar startTime;\r\nexport default function Recorder(props) {\r\n  const name = props.location.state.lectureType\r\n  const language = props.location.state.languageType\r\n  const Recording = { events: [] };\r\n  var lastMouse = {x : 0, y : 0};\r\n  var lastKey = \"\";\r\n  let fileName\r\n  if(name === \"dsa\"){\r\n    fileName= language\r\n  }else if(name=== \"ide\"){\r\n    fileName=\"index.html\"\r\n  }\r\n  let childValue;\r\n  var lastKeyClass = \"\";\r\n\r\n  function callbackFunction(childData){\r\n    childValue = childData\r\n    //console.log(childValue)\r\n  }\r\n  // Record each type of event\r\n  const handlers = [\r\n    {\r\n      eventName: \"mouseup\",\r\n      handler: function handleMouseMove(e) {\r\n        \r\n        Recording.events.push({\r\n          type: \"mouseup\",\r\n          time: Date.now() - startTime,\r\n        });\r\n      },\r\n    },\r\n    {\r\n      eventName: \"mousedown\",\r\n      handler: function handleMouseMove(e) {\r\n        \r\n        Recording.events.push({\r\n          type: \"mousedown\",\r\n          button: e.button,\r\n          clientX : e.clientX,\r\n          clientY : e.clientY,\r\n          shiftKey : e.shiftKey,\r\n          time: Date.now() - startTime,\r\n        });\r\n      },\r\n    },\r\n    {\r\n      eventName: \"mousemove\",\r\n      handler: function handleMouseMove(e) {\r\n        lastMouse  = {x : e.pageX, y :e.pageY};\r\n        Recording.events.push({\r\n          type: \"mousemove\",\r\n          clientX : e.clientX,\r\n          clientY : e.clientY,   \r\n          shiftKey : e.shiftKey,       \r\n          target: lastKeyClass,\r\n          x: e.pageX,\r\n          fileName : fileName,\r\n          y: e.pageY,\r\n          value: lastKey,\r\n          time: Date.now() - startTime,\r\n        });\r\n      },\r\n    },\r\n    {\r\n      eventName: \"dblclick\",\r\n      handler: function handleMouseMove(e) {\r\n        console.log(e);\r\n        Recording.events.push({\r\n          type: \"dblclick\",\r\n          button: e.button,\r\n          clientX : e.clientX,\r\n          clientY : e.clientY,\r\n          shiftKey : e.shiftKey,\r\n          altKey : e.altKey,\r\n          time: Date.now() - startTime,\r\n        });\r\n      },\r\n    },\r\n    {\r\n      eventName: \"click\",\r\n      handler: function handleClick(e) {\r\n        // if(name === \"ide\" || name === \"other\"){\r\n          if(e.target.className === \"cssfile\" || e.target.className === \"buttontext style\" || e.target.className === \"fab fa-css3-alt\") fileName = \"style.css\"\r\n          if(e.target.className === \"jsfile\" || e.target.className === \"buttontext script\" || e.target.className === \" fa-js-square\") fileName = \"script.js\" \r\n          if(e.target.className === \"htmlfile\" || e.target.className === \"buttontext html\" || e.target.className === \"fab fa-html5fab\") fileName = \"index.html\"\r\n          console.log(e.target.className);\r\n          Recording.events.push({\r\n            type: \"click\",\r\n            target: e.target.className,\r\n            x: e.pageX,\r\n            fileName: fileName,\r\n            y: e.pageY,\r\n            time: Date.now() - startTime,\r\n          });\r\n        //}\r\n      },\r\n    },\r\n    {\r\n      eventName: \"keyup\",\r\n      handler: function handleKeyPress(e) {\r\n        console.log(files[fileName])\r\n        if(name === \"ide\" || name === \"dsa\"){\r\n          lastKey = childValue\r\n          lastKeyClass = e.target.className\r\n          Recording.events.push({\r\n            type: \"keyup\",\r\n            target: e.target.className,\r\n            x: lastMouse.x,\r\n            y: lastMouse.y,\r\n            fileName: fileName,\r\n            value: (e.target.className === \"userInputArea\") ? e.target.value :files[fileName].value,\r\n            keyCode: e.keyCode,\r\n            time: Date.now() - startTime,\r\n          });\r\n        }\r\n      },\r\n    },\r\n    {\r\n      eventName: \"keydown\",\r\n      handler: function handleKeyPress(e) {\r\n          let innerText = document.getElementsByClassName(\"canvas_text\")[0].innerText\r\n          Recording.events.push({\r\n            type: \"keydown\",\r\n            key: e.key,\r\n            shiftKey: e.shiftKey,\r\n            innerText: innerText,\r\n            time: Date.now() - startTime,\r\n          });\r\n        \r\n      },\r\n    },\r\n    {\r\n      eventName: \"click\",\r\n      handler: function handleClick(e) {\r\n        if(name === \"dsa\"){\r\n          if(language  === \"c\" || \r\n          language === \"c99\" || \r\n          language === \"cpp\" || \r\n          language === \"cpp14\" || \r\n          language === \"cpp17\" || \r\n          language === \"python2\" || \r\n          language === \"python3\"){\r\n            fileName = language\r\n          }\r\n          Recording.events.push({\r\n            type: \"click\",\r\n            target: e.target.className,\r\n            x: e.pageX,\r\n            fileName :fileName,\r\n            y: e.pageY,\r\n            value:files[fileName].value,\r\n            time: Date.now() - startTime,\r\n          });\r\n        }\r\n      },\r\n      },\r\n    {\r\n      eventName:\"output\",\r\n      handler:function handleChange(e){\r\n        Recording.events.push({\r\n          type:\"output\",\r\n          target:\"userOutputArea\",\r\n          time:Date.now() - startTime,\r\n          value:e.detail.output\r\n        })\r\n      }\r\n    }\r\n  ];\r\n\r\n  const Mp3Recorder = new MicRecorder({ \r\n    bitRate: 128,\r\n    prefix: \"data:audio/wav;base64,\"\r\n  });\r\n\r\n  function listen(eventName, handler) {\r\n    return document.documentElement.addEventListener(eventName, handler, true);\r\n  }\r\n\r\n  function startRecording() {\r\n    startTime = Date.now()\r\n    Recording.events = [];\r\n    handlers.map((x) => listen(x.eventName, x.handler));\r\n    Mp3Recorder\r\n    .start()\r\n    .then(() => {\r\n      console.log(\"Started recording\")\r\n    }).catch((e) => console.error(e));\r\n  }\r\n\r\n  function removeListener(eventName, handler) {\r\n    return document.documentElement.removeEventListener(\r\n      eventName,\r\n      handler,\r\n      true\r\n    );\r\n  }\r\n\r\n  function handleClick(e) {\r\n    e.preventDefault();\r\n    document.getElementsByClassName(\"record\")[0].style.display=\"none\"\r\n    document.getElementsByClassName(\"stop-record\")[0].style.display=\"block\"\r\n    startRecording();\r\n    console.log(\"The Button was clicked.\");\r\n  }\r\n\r\n  function stopRecording() {\r\n    // stop recording\r\n    handlers.map((x) => removeListener(x.eventName, x.handler));\r\n    localStorage.setItem(\"recording\", JSON.stringify(Recording))\r\n    document.getElementsByClassName(\"stop-record\")[0].style.display=\"none\"\r\n    document.getElementsByClassName(\"record\")[0].style.display=\"block\"\r\n    const recordingString = JSON.stringify(Recording)\r\n    console.log(Recording)\r\n    firebase.firestore().collection(\"events\").add({\r\n      recordingString,\r\n      createdAt: firebase.firestore.FieldValue.serverTimestamp(),\r\n      name:props.location.state.lectureName,\r\n      creator:props.location.state.lectureCreator,\r\n      type:props.location.state.lectureType\r\n    }).then((result) => {\r\n      localStorage.setItem(\"recordingId\", JSON.stringify(result.id))\r\n      firebase.firestore().collection(\"recordIndex\").add({\r\n        createdAt: firebase.firestore.FieldValue.serverTimestamp(),\r\n        name:props.location.state.lectureName,\r\n        type:props.location.state.lectureType,\r\n        creator:props.location.state.lectureCreator,\r\n        language:language,\r\n        id:result.id\r\n      }).then((result) => {\r\n        console.log(\"Recording Tally Saved\")\r\n      })\r\n      console.log(\"Recording Saved\")\r\n      let audioString\r\n      Mp3Recorder\r\n      .stop()\r\n      .getMp3()\r\n      .then(([buffer, blob]) => {\r\n        new File(buffer, 'me-at-thevoice.mp3', {\r\n          type: blob.type,\r\n          lastModified: Date.now()\r\n        })\r\n        var reader = new FileReader();\r\n        reader.readAsDataURL(blob);\r\n        reader.onloadend = () => {\r\n            audioString =(reader.result)\r\n            var storageRef = firebase.storage().ref();\r\n              const id = JSON.parse(localStorage.getItem(\"recordingId\"))\r\n              //console.log(id)\r\n              localStorage.removeItem('recordingId');\r\n              var audioRef = storageRef.child(id);\r\n              audioRef.putString(audioString, 'data_url').then((snapshot) => {\r\n                alert('Audio saved!');\r\n              }).catch((e) => {\r\n                console.log(e)\r\n              })\r\n          }\r\n      }).catch((e) => console.log(e));\r\n    })\r\n  }\r\n\r\n  function handleStop(e) {\r\n    e.preventDefault();\r\n    stopRecording();\r\n    console.log(\"Recording Stopped.\");\r\n  }\r\n  //console.log(Recording)\r\n  return (\r\n    <>\r\n      <div className=\"recorder\">\r\n      <div className = \"recorder-button\">\r\n        <i className=\"fas fa-microphone record\" onClick={handleClick}></i>\r\n        <i className=\"fas fa-microphone-slash stop-record\" onClick={handleStop}></i>\r\n      </div>\r\n      {name === \"dra\" ?<DrawingBoard/>:<IDE name={name} language={language} parentCallBack = {callbackFunction}/>}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport IDE from \"../IDE\";\r\nimport files from \"../../assets/files\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { js, css, html, outputModalTrue, outputModalFalse, setSrcDocs } from \"../../actions\";\r\nimport firebase from 'firebase/app'\r\nimport 'firebase/firestore';\r\nimport 'firebase/storage';\r\nimport \"./style.css\";\r\nimport DrawingBoardPlayer from \"../DrawingBoard/index\";\r\nimport img from \"../../assets/Gear-0.2s-200px.png\"\r\nimport e from \"cors\";\r\nfunction Preloader(){\r\n  return(\r\n    <div className = \"loader\">\r\n       <div className =\"preloader\">\r\n        <div className = \"load\">\r\n\t         <img src= {img} border=\"0\"/>\r\n        </div>\r\n       </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default function Video(props) {\r\n  const name = props.location.state.type.slice(0,3)\r\n  const language = props.location.state.type.slice(3, 10)\r\n  const [refresh, setRefresh] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n  let drawingEvent=''\r\n  const [drawing, setDrawing] = useState('')\r\n  \r\n  useEffect(() => {\r\n    let offsetPlay = 0;\r\n    localStorage.setItem(\"lastSessionTimeStamp\", JSON.stringify(offsetPlay));\r\n    const videoPlayer = document.getElementsByClassName('videoplayer')[0]\r\n    const playButton = document.getElementsByClassName(\"playButton\")[0]\r\n    // fetch recording from local storage\r\n    let recording = { events: [] };\r\n    const recordingJsonValue = localStorage.getItem(\"recording\");\r\n    //const audioValue = JSON.parse(localStorage.getItem(\"file\"));\r\n    const id = (props.location.state.id)\r\n    firebase.firestore().collection('events').where(firebase.firestore.FieldPath.documentId(), '==', id).get()\r\n    .then((snap) => {\r\n        snap.forEach((doc) => {\r\n             console.log(doc.data())\r\n             recording = JSON.parse(doc.data().recordingString)\r\n        })\r\n      }).catch((err) => {\r\n        console.log(err)\r\n      })\r\n\r\n    if (recordingJsonValue != null) recording = JSON.parse(recordingJsonValue);\r\n\r\n    // console.log(recording);\r\n\r\n    var storageRef = firebase.storage().ref();\r\n    storageRef.child((id)).getDownloadURL().then((url) => {\r\n      audioPlayer.src = url\r\n      localStorage.setItem(\"url\", url)\r\n    }).catch((e) => {\r\n      console.log(e)\r\n    })\r\n\r\n    //fake cursor for playing\r\n    const fakeCursor = document.createElement(\"div\");\r\n    document.getElementById(\"root\").appendChild(fakeCursor);\r\n    fakeCursor.style.display = 'none'\r\n    const audioPlayer = document.getElementById(\"audio_player\")\r\n    var startPlay;\r\n    // console.log(playButton)\r\n    audioPlayer.addEventListener(\"onclick\", (e) => {\r\n      console.log(\"Click on the audioPlayer\")\r\n      console.log(e)\r\n    })\r\n\r\n    fakeCursor.className = \"customCursor\";\r\n    \r\n    var i = 0;\r\n    var paused = false;\r\n\r\n    audioPlayer.addEventListener(\"canplay\", () => {\r\n      document.getElementsByClassName(\"player-content\")[0].style.display = \"block\";\r\n      document.getElementsByClassName(\"loader\")[0].style.display = \"none\";\r\n      console.log(\"loaded\")\r\n    })\r\n  \r\n    audioPlayer.addEventListener(\"play\", () => {\r\n      playButton.style.display=\"none\"\r\n      playfunction();\r\n      console.log(\"audio play\")\r\n    })\r\n\r\n    audioPlayer.addEventListener(\"pause\", () => {\r\n      console.log(\"clicked pause\");\r\n      pausefunction();\r\n    })\r\n    \r\n    audioPlayer.addEventListener(\"ended\", () => {\r\n      pausefunction();\r\n      console.log(\"ended audio\")\r\n    })\r\n\r\n    audioPlayer.addEventListener(\"seeking\", () => {\r\n      fakeCursor.style.display = 'none';\r\n      pausefunction()\r\n      audioPlayer.pause()\r\n      //returns the time at which the audio is after seeking it\r\n      const curTime = audioPlayer.currentTime\r\n     \r\n      //TODO: Implement binary search or lower bound\r\n      for(let x=0;x<recording.events.length;x++){\r\n        if(recording.events[x].time>curTime*1000){\r\n          i=x;\r\n          break;\r\n        }\r\n      }\r\n\r\n      console.log(i)\r\n      console.log(recording.events[i].time)\r\n      console.log(curTime)\r\n      //localStorage.setItem(\"lastSessionTimeStamp\", JSON.stringify(recording.events[i].time))\r\n      if( recording.events[i].time>(curTime*1000)){\r\n        localStorage.setItem(\"lastSessionTimeStamp\", recording.events[i].time)\r\n      }else{\r\n        localStorage.setItem(\"lastSessionTimeStamp\", curTime*1000)\r\n      }\r\n      //handlePlayerClick()\r\n    })\r\n\r\n    playButton.addEventListener(\"click\", () => {\r\n      playButton.style.display=\"none\"\r\n      videoPlayer.style.display=\"flex\"\r\n      audioPlayer.play();\r\n      playfunction();\r\n    })\r\n\r\n    function pausefunction() {\r\n      fakeCursor.style.display = 'none';\r\n      paused = true;\r\n      localStorage.setItem(\"lastSessionTimeStamp\", JSON.stringify(offsetPlay));\r\n    }\r\n\r\n\r\n    function playfunction() {\r\n       \r\n      if( document.getElementsByClassName(\"videoscreen\")[0] != null) document.getElementsByClassName(\"videoscreen\")[0].className = \"visiblescreen\";\r\n       //append fake cursor when user clicks play button\r\n       fakeCursor.style.display = 'block';\r\n       startPlay = Date.now()\r\n       paused = false;\r\n       var frames;\r\n       //draw event to play all events in requestAnimationFrames\r\n       function draw() {\r\n           //select an event and check if its empty\r\n           let event = recording.events[i];\r\n           if (!event) {\r\n             return;\r\n           }\r\n\r\n           if(localStorage.getItem(\"lastSessionTimeStamp\") !== null){\r\n            offsetPlay = JSON.parse(localStorage.getItem(\"lastSessionTimeStamp\")) + Date.now() - startPlay;\r\n           }\r\n           else{\r\n            offsetPlay = (Date.now() - startPlay) * 1;\r\n           }\r\n\r\n         if (event.time <= offsetPlay) {\r\n           //draws event amd matches with listner\r\n           drawEvent(event, fakeCursor);\r\n           i++;\r\n         }\r\n\r\n         \r\n         if (i >= recording.events.length || paused) {\r\n           clearInterval(frames);\r\n          //  if(i >= (recording.events.length - 1)){\r\n          //    paused = true\r\n          //  }\r\n         } \r\n     };\r\n\r\n     frames = setInterval(() => {\r\n       if(!paused) draw();\r\n     }, 1)\r\n    }\r\n\r\n    \r\n    function handleButtonEvents(target) {\r\n      switch (target) {\r\n        case \"outputtext\":\r\n             dispatch(setSrcDocs());\r\n             dispatch(outputModalTrue());\r\n          break;\r\n        case \"output\":\r\n            dispatch(setSrcDocs());\r\n            dispatch(outputModalTrue());\r\n         break;\r\n        case \"buttontext output\":\r\n            dispatch(setSrcDocs());\r\n            dispatch(outputModalTrue());\r\n         break;\r\n        case \"fas fa-play\":\r\n          dispatch(setSrcDocs());\r\n          dispatch(outputModalTrue());\r\n          break;\r\n        case \"fas fa-window-close\":\r\n             dispatch(outputModalFalse());\r\n          break;\r\n        case \"style.css\":\r\n            dispatch(css());             \r\n         break;\r\n        case \"buttontext style\":\r\n          dispatch(css());             \r\n         break;\r\n        case \"index.html\":\r\n            dispatch(html());     \r\n         break;\r\n        case \"script.js\":\r\n            dispatch(js());\r\n         break;\r\n        case \"buttontext script\":\r\n            dispatch(js());\r\n         break;\r\n        default: \r\n          break;\r\n      }\r\n    }\r\n\r\n    function drawEvent(event, fakeCursor) {\r\n      if (event.type === \"mousedown\") {\r\n\r\n        let eve = new MouseEvent(\"mousedown\", {\r\n          bubbles: true,\r\n          cancelable: true,\r\n          button: event.button,\r\n          clientX : event.clientX,\r\n          clientY : event.clientY,\r\n          shiftKey : event.shiftKey,\r\n        });\r\n\r\n        if(document.getElementById(\"canvas\"))document.getElementById(\"canvas\").dispatchEvent(eve);\r\n\r\n      }\r\n      else if (event.type === \"mousemove\") {\r\n        \r\n        // TODO: Add e.buttons too\r\n        let eve = new MouseEvent(\"mousemove\", {\r\n          bubbles: true,\r\n          cancelable: true,\r\n          button: event.button,\r\n          clientX : event.clientX,\r\n          clientY : event.clientY,\r\n          shiftKey : event.shiftKey,\r\n        });\r\n\r\n        if(document.getElementById(\"canvas\"))document.getElementById(\"canvas\").dispatchEvent(eve);\r\n        \r\n       //document.getElementsByClassName(\"cursor\")[0].style.top = JSON.stringify(event.y) + \"px\";\r\n        fakeCursor.style.left = JSON.stringify(event.x) + \"px\";\r\n        fakeCursor.style.top = JSON.stringify(event.y) + \"px\";\r\n        const path = event.target;\r\n        handleButtonEvents(event.fileName);\r\n        var tar = document.getElementsByClassName(path)[0];\r\n        if (tar != null) {\r\n          tar.focus();\r\n\r\n        }\r\n      }\r\n      else if (event.type === \"keydown\") {\r\n        if(document.getElementsByClassName(\"canvas_text\")[0]){\r\n          document.getElementsByClassName(\"canvas_text\")[0].innerText =  event.innerText;\r\n        } \r\n      }\r\n      else if (event.type === \"mouseup\") {\r\n\r\n        let eve = new MouseEvent(\"mouseup\", {\r\n          bubbles: true,\r\n          cancelable: true\r\n        });\r\n        if(document.getElementById(\"canvas\"))document.getElementById(\"canvas\").dispatchEvent(eve);\r\n      }\r\n      else if (event.type === \"click\") {\r\n \r\n        if(document.getElementsByClassName(event.target)[0] !== undefined){\r\n          let clickEvent = new MouseEvent(\"click\", {\r\n            pageX: event.x,\r\n            pageY: event.y, \r\n            bubbles: true,\r\n            cancelable: true,\r\n          });\r\n          document.getElementsByClassName(event.target)[0].dispatchEvent(clickEvent);\r\n        }\r\n        if(event.target === \"rectangle\" || event.target === \"ellipse\" || event.target === \"arrow\" || event.target === \"selection\") document.getElementsByClassName(event.target)[0].click();\r\n        flashClass(fakeCursor, \"click\");\r\n        tar = document.getElementsByClassName(event.target)[0];\r\n        if(tar !=  null){\r\n          handleButtonEvents(event.fileName);\r\n          handleButtonEvents(event.target);\r\n          flashClass(tar, \"clicked\");\r\n        }\r\n      }\r\n      else if (event.type === \"keyup\") {\r\n        const path = event.target;\r\n        tar = document.getElementsByClassName(path)[0];\r\n        if (tar != null) {\r\n          tar.focus();\r\n          if(path===\"userInputArea\"){\r\n            tar.value = event.value\r\n            }else{\r\n              files[event.fileName].value = event.value;\r\n              handleButtonEvents(event.fileName);\r\n              setRefresh(event.value);\r\n            }\r\n        }\r\n      }\r\n      else if(event.type === \"output\") {\r\n        const path = event.target;\r\n        tar = document.getElementsByClassName(path)[0];\r\n        if (tar != null) {\r\n          tar.focus();\r\n          if(path===\"userOutputArea\"){\r\n            tar.value = event.value\r\n            }\r\n        }\r\n      }\r\n      else{\r\n        setDrawing(event)\r\n      }\r\n    }\r\n\r\n    function flashClass(el, className) {\r\n      el.classList.add(className);\r\n      setTimeout(function () {\r\n        el.classList.remove(className);\r\n      }, 200);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <Preloader/>\r\n      <div className = \"player-content\">\r\n      <div className = \"videoscreen\">\r\n      {/* <IDE name={name} refresh = {refresh}/> */}\r\n      {name===\"dra\" ? <DrawingBoardPlayer event={drawing}/>: <IDE name={name} language={language} refresh={refresh}/>}\r\n      </div>\r\n      <div className=\"playButton\">\r\n      <div className=\"container\"><a className=\"button button-play\"></a></div>\r\n      </div>\r\n      <div className = \"videoplayer\"> \r\n      <audio id=\"audio_player\" controls=\"controls\" controlsList=\"nodownload\"></audio>\r\n      </div>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect} from 'react'\r\nimport {useHistory} from \"react-router-dom\";\r\nimport \"./style.css\"\r\nfunction RecorderForm() {\r\n    const history = useHistory();\r\n    let lectureName;\r\n    let lectureType;\r\n    let lectureCreator;\r\n    let languageType;\r\n    const navigateToRecorderWeb = () => history.push({\r\n        pathname:'/recorder',\r\n        state:{lectureType,lectureName, lectureCreator, languageType}}\r\n    );\r\n\r\n    const languageList = {\r\n        \"Python 2\": \"python2\", \r\n        C: \"c\",\r\n        \"C-99\": \"c99\",\r\n        \"C++\": \"cpp\",\r\n        \"C++ 14\": \"cpp14\",\r\n        \"C++ 17\": \"cpp17\",\r\n        \"Python 3\": \"python3\",\r\n      };\r\n    \r\n\r\n    useEffect(() => {\r\n\r\n        const select = document.getElementById(\"language\");\r\n        for (let key in languageList) {\r\n          var option = document.createElement(\"option\");\r\n          option.text = key;\r\n          option.value = languageList[key];\r\n          option.className = languageList[key];\r\n          select.add(option);\r\n        }\r\n\r\n        const type = document.getElementById(\"lectureType\")\r\n        const name = document.getElementById(\"lectureName\")\r\n        const creator = document.getElementById(\"creator\")\r\n        const button = document.getElementById(\"submit\")\r\n\r\n        button.addEventListener(\"click\", () => {\r\n            lectureType = type.value\r\n            lectureName = name.value\r\n            lectureCreator = creator.value\r\n            if(lectureType === \"dsa\"){\r\n                languageType = select.value\r\n            }else{\r\n                languageType = ''\r\n            }\r\n        })\r\n        type.addEventListener(\"change\", (e) =>{\r\n            if(e.target.value === \"dsa\"){\r\n                select.style.display = \"block\"\r\n            }else{\r\n                select.style.display = \"none\"\r\n            }\r\n        })\r\n    },[])\r\n\r\n    return (\r\n        <>\r\n        <form>\r\n            <input id=\"lectureName\" placeholder=\"Lecture Title\"/>\r\n            <input id=\"creator\" placeholder=\"Creator\"/>\r\n            <select name=\"language\" id=\"language\"></select>\r\n            <select id=\"lectureType\">\r\n                <option value=\"ide\">Web Developerment</option>\r\n                <option value=\"dsa\">DSA</option>\r\n                <option value=\"dra\">Chalk Board</option>\r\n            </select>\r\n            <button type=\"button\"  onClick={navigateToRecorderWeb} id=\"submit\">Submit</button>\r\n        </form>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default RecorderForm","const filenameReducer = (state = \"index.html\", action) => {\r\n  switch (action.type) {\r\n    case \"js\":\r\n      state = \"script.js\";\r\n      return state;\r\n    case \"css\":\r\n      state = \"style.css\";\r\n      return state;\r\n    case \"html\":\r\n      state = \"index.html\";\r\n      return state;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\n\r\nconst languageReducer = (state=\"c\", action) => {\r\n  switch(action.type){\r\n    case \"c\":\r\n      state = \"c\";\r\n      return state;\r\n    case \"c99\":\r\n      state = \"c99\";\r\n      return state;\r\n    case \"cpp\":\r\n      state = \"cpp\";\r\n      return state;\r\n    case \"cpp14\":\r\n      state = \"cpp14\";\r\n      return state;\r\n    case \"cpp17\":\r\n      state = \"cpp17\";\r\n      return state;\r\n    case \"python2\":\r\n      state = \"python2\";\r\n      return state;\r\n    case \"python3\":\r\n      state = \"python3\";\r\n      return state;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default filenameReducer;\r\n","import files from \"../assets/files\"\r\n\r\nconst outputModalReducer = (state = false, action) => {\r\n\r\n    switch(action.type){\r\n        case \"outputtrue\":\r\n            state = true\r\n            return state\r\n        case \"outputfalse\":\r\n            state = false\r\n            return state\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const outputSrcReducer = (state = \"\", action) => {\r\n\r\n    switch(action.type){\r\n        case \"setSrcdoc\":\r\n            state = `\r\n            <html>\r\n              <body>${files[\"index.html\"].value}</body>\r\n              <style>${files[\"style.css\"].value}</style>\r\n              <script>${files[\"script.js\"].value}</script>\r\n            </html>\r\n          `\r\n            return state\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default outputModalReducer;","const languageReducer = (state=\"c\", action) => {\r\n    switch(action.type){\r\n      case \"c\":\r\n        state = \"c\";\r\n        return state;\r\n      case \"c99\":\r\n        state = \"c99\";\r\n        return state;\r\n      case \"cpp\":\r\n        state = \"cpp\";\r\n        return state;\r\n      case \"cpp14\":\r\n        state = \"cpp14\";\r\n        return state;\r\n      case \"cpp17\":\r\n        state = \"cpp17\";\r\n        return state;\r\n      case \"python2\":\r\n        state = \"python2\";\r\n        return state;\r\n      case \"python3\":\r\n        state = \"python3\";\r\n        return state;\r\n      default:\r\n        return state;\r\n    }\r\n  }\r\n  \r\n  export default languageReducer;\r\n  ","import filenameReducer from \"./filenameSelection\";\r\nimport outputModalReducer, { outputSrcReducer } from \"./outputModalReducer\";\r\nimport { combineReducers } from \"redux\";\r\nimport languageReducer from \"./languageSelection\";\r\nconst allReducers = combineReducers({\r\n    fileName: filenameReducer,\r\n    outputModal: outputModalReducer,\r\n    srcDocs: outputSrcReducer,\r\n    language:languageReducer\r\n})\r\n\r\nexport default allReducers;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport DrawingBoard from '../DrawingBoard/index'\r\nimport Peer from \"simple-peer\"\r\nimport * as io from 'socket.io-client'\r\n\r\nfunction LiveClassEmitter() {\r\n\r\n    const socketRef = useRef()\r\n    const [ stream, setStream ] = useState()\r\n    //while in development mode change document.location.origin to http://localhost:5000\r\n    socketRef.current = io.connect(document.location.origin)\r\n    // Record each type of event\r\n\tconst myVideo = useRef()\r\n    const userVideo = useRef()\r\n\tconst connectionRef= useRef()\r\n    useEffect(() => {\r\n        //console.log(document.location.origin)\r\n        navigator.mediaDevices.getUserMedia({ video:true,audio: true}).then((stream) => {\r\n            setStream(stream)\r\n            myVideo.current.srcObject = stream\r\n        })\r\n    }, [])\r\n\r\n    const handlers = [\r\n        {\r\n            eventName: \"mouseup\",\r\n            handler: function handleMouseMove(e) {\r\n                const data = {\r\n                    type: \"mouseup\"\r\n                }\r\n                sendData(data)\r\n            }\r\n        },\r\n        {\r\n            eventName: \"mousedown\",\r\n            handler: function handleMouseMove(e) {\r\n                const data = {\r\n                    type: \"mousedown\",\r\n                    button: e.button,\r\n                    clientX : e.clientX,\r\n                    clientY : e.clientY,\r\n                    shiftKey : e.shiftKey,\r\n                }\r\n                sendData(data)\r\n            },\r\n        },\r\n        {\r\n            eventName: \"mousemove\",\r\n            handler: function handleMouseMove(e) {\r\n                const data = {\r\n                    type: \"mousemove\",\r\n                    button: e.button,\r\n                    clientX : e.clientX,\r\n                    clientY : e.clientY,\r\n                    shiftKey : e.shiftKey,  \r\n                }\r\n                sendData(data)\r\n            },\r\n        },\r\n        {\r\n            eventName: \"click\",\r\n            handler: function handleMouseMove(e) {\r\n                const data = {\r\n                    type: \"click\",\r\n                    target: e.target.className,\r\n                }\r\n                sendData(data)\r\n\r\n            },\r\n        },\r\n        {\r\n            eventName: \"keydown\",\r\n            handler: function handleMouseMove(e) {\r\n                let innerText = document.getElementsByClassName(\"canvas_text\")[0].innerText\r\n                const data = {\r\n                    type: \"keydown\",\r\n                    target: e.target.className,\r\n                    shiftKey: e.shiftKey,\r\n                    innerText: innerText,\r\n                }\r\n                sendData(data)\r\n            },\r\n        }\r\n    ];\r\n\r\n    function sendData(data) {\r\n        socketRef.current.emit(\"emitData\", {data})\r\n    }\r\n\r\n    function removeListener(eventName, handler) {\r\n        return document.documentElement.removeEventListener(\r\n          eventName,\r\n          handler,\r\n          true\r\n        );\r\n      }\r\n    \r\n    function listen(eventName, handler) {\r\n        return document.documentElement.addEventListener(eventName, handler, true);\r\n    }\r\n\r\n    function startLive() {\r\n        const peer = new Peer({\r\n            initiator: true,\r\n            trickle: false,\r\n            stream: stream\r\n        })\r\n        peer.on(\"signal\", (data) => {\r\n            socketRef.current.emit(\"sendStream\", {\r\n                signalData: data\r\n            })\r\n        })\r\n\r\n        socketRef.current.on(\"callAccepted\", (data) => {\r\n            peer.signal(data.signalData)\r\n\t\t})\r\n\r\n        handlers.map((x) => listen(x.eventName, x.handler));\r\n    }\r\n\r\n    function stopLive() {\r\n        handlers.map((x) => removeListener(x.eventName, x.handler));\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div style={{display:\"flex\", flexDirection:\"row-reverse\"}}>\r\n            <div style={{position:\"absolute\", zIndex:\"3\",display:\"flex\", flexDirection:\"column\", paddingRight:\"10px\"}}>\r\n                <button style={{backgroundColor:\"red\"}} onClick = {() => startLive()}>Start</button>\r\n                <button style={{backgroundColor:\"yellow\"}} onClick = {() => stopLive()}>Stop</button>\r\n                {stream && <video playsInline muted ref={myVideo} autoPlay style={{width: \"300px\" }} />}\r\n            </div>\r\n            <DrawingBoard/>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default LiveClassEmitter","import React, { useEffect,useState,useRef} from \"react\";\r\nimport DrawingBoard from '../DrawingBoard/index'\r\nimport Peer from \"simple-peer\"\r\nimport * as io from 'socket.io-client'\r\n\r\nfunction LiveClassReceiver() {\r\n    const socketRef = useRef()\r\n    const [ stream, setStream ] = useState()\r\n    const [ receivingCall, setReceivingCall ] = useState(false)\r\n    const [ callerSignal, setCallerSignal ] = useState()\r\n    const userVideo = useRef()\r\n    //while in development mode change document.location.origin to http://localhost:5000\r\n    socketRef.current = io.connect(document.location.origin)\r\n    useEffect(() => {\r\n        socketRef.current.on(\"receiveData\", ({data}) => {\r\n            //console.log(data)\r\n            if (data.type === \"mousedown\") {\r\n                let eve = new MouseEvent(\"mousedown\", {\r\n                  bubbles: true,\r\n                  cancelable: true,\r\n                  button: data.button,\r\n                  clientX : data.clientX,\r\n                  clientY : data.clientY,\r\n                  shiftKey : data.shiftKey,\r\n                });\r\n        \r\n                if(document.getElementById(\"canvas\"))document.getElementById(\"canvas\").dispatchEvent(eve);\r\n        \r\n              }\r\n              else if (data.type === \"mousemove\") {\r\n                \r\n                // TODO: Add e.buttons too\r\n                let eve = new MouseEvent(\"mousemove\", {\r\n                  bubbles: true,\r\n                  cancelable: true,\r\n                  button: data.button,\r\n                  clientX : data.clientX,\r\n                  clientY : data.clientY,\r\n                  shiftKey : data.shiftKey,\r\n                });\r\n        \r\n                if(document.getElementById(\"canvas\"))document.getElementById(\"canvas\").dispatchEvent(eve);\r\n                const path = data.target;\r\n                var tar = document.getElementsByClassName(path)[0];\r\n                if (tar != null) {\r\n                  tar.focus();\r\n        \r\n                }\r\n              }\r\n              else if (data.type === \"mouseup\") {\r\n                let eve = new MouseEvent(\"mouseup\", {\r\n                  bubbles: true,\r\n                  cancelable: true\r\n                });\r\n                if(document.getElementById(\"canvas\"))document.getElementById(\"canvas\").dispatchEvent(eve);\r\n              }\r\n              else if (data.type === \"click\") {\r\n                if(document.getElementsByClassName(data.target)[0] !== undefined && document.getElementsByClassName(data.target)[0].nodeName === \"INPUT\"){\r\n                    document.getElementsByClassName(data.target)[0].click();\r\n                }\r\n              }\r\n              else if(data.type === \"keydown\"){\r\n                if(document.getElementsByClassName(\"canvas_text\")[0]){\r\n                  document.getElementsByClassName(\"canvas_text\")[0].innerText =  data.innerText;\r\n                } \r\n              }\r\n        })\r\n\r\n        socketRef.current.on(\"emitStream\", (data) => {\r\n          setCallerSignal(data.signalData)\r\n        })\r\n\r\n    }, [])\r\n    \r\n    function answerCall() {\r\n      const peer = new Peer({\r\n        initiator: false,\r\n        trickle: false,\r\n        stream: stream\r\n      })\r\n\r\n      peer.on(\"signal\", (data) => {\r\n        socketRef.current.emit(\"answerCall\", { \r\n          signalData: data\r\n        })\r\n      })\r\n  \r\n      peer.signal(callerSignal)\r\n\r\n      peer.on(\"stream\", (stream) => {\r\n        setStream(stream)\r\n        userVideo.current.srcObject = stream\r\n      })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div style={{display:\"flex\", flexDirection:\"row-reverse\"}}>\r\n            <div style={{position:\"absolute\", zIndex:\"3\",display:\"flex\", flexDirection:\"column\", paddingRight:\"10px\"}}>\r\n            <button onClick={() => answerCall()}>Answer Call</button>\r\n            {stream && <video playsInline ref={userVideo} autoPlay style={{width: \"300px\" }}/>}\r\n            </div>\r\n            <DrawingBoard/>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\n\r\n\r\nexport default LiveClassReceiver","import React, {useEffect} from 'react'\r\nimport {useHistory} from \"react-router-dom\";\r\nimport './styles.css'\r\nfunction Card(props) {\r\n    const history = useHistory();\r\n    useEffect(() => {\r\n        const mainWindow = document.getElementById(\"lectureCard\")\r\n        for(let i=0;i<props.lectures.length;i++){\r\n            var lecture = document.createElement(\"div\")\r\n            var playButton = document.createElement(\"button\")\r\n            playButton.textContent = \"Play Lecture\"\r\n            var nameHeading = document.createElement(\"h3\")\r\n            var creator = document.createElement(\"h3\")\r\n            var language = document.createElement(\"h3\")\r\n            nameHeading.className = \"nameoflecture\"\r\n            creator.className = \"nameofcreator\" \r\n            language.className = \"languageofLecture\"\r\n            playButton.className = props.lectures[i].type + props.lectures[i].language\r\n            playButton.id = props.lectures[i].id \r\n            lecture.appendChild(nameHeading)\r\n            lecture.appendChild(creator)\r\n            lecture.appendChild(language)\r\n            lecture.appendChild(playButton)\r\n            nameHeading.innerHTML = \"Name - \" + props.lectures[i].name\r\n            creator.innerHTML = \"Creator - \" + props.lectures[i].creator\r\n            if(props.lectures[i].language !== ''){\r\n                language.innerHTML = \"Language- \" + props.lectures[i].language\r\n            }\r\n            mainWindow.appendChild(lecture)\r\n        }\r\n        \r\n        mainWindow.addEventListener(\"click\", (e) => {\r\n            const id =  e.target.id\r\n            console.log(e)\r\n            const type =  e.target.className\r\n            console.log(type)\r\n             console.log(e.target.id)\r\n            history.push({\r\n                pathname:'/videoplayer',\r\n                state:{id,type}\r\n            });\r\n        })\r\n    },[])   \r\n\r\n    return (\r\n        <>\r\n        <div id=\"lectureCard\">\r\n        </div>\r\n        </>    \r\n    )\r\n}\r\n\r\nexport default Card","import React , {useEffect, useLayoutEffect, useState} from 'react'\r\nimport firebase from 'firebase/app'\r\nimport 'firebase/firestore'\r\nimport Card from '../Card/card'\r\nfunction Preloader(){\r\n    return(\r\n      <div className = \"loader\">\r\n      <div className =\"preloader\">\r\n      <div className =\"box\">\r\n          <div className =\"box__inner\">\r\n              <div className =\"box__back-flap\"></div>\r\n              <div className =\"box__right-flap\"></div>\r\n              <div className =\"box__front-flap\"></div>\r\n              <div className =\"box__left-flap\"></div>\r\n              <div className =\"box__front\"></div>\r\n          </div>\r\n      </div>\r\n      <div className =\"box\">\r\n          <div className =\"box__inner\">\r\n              <div className =\"box__back-flap\"></div>\r\n              <div className =\"box__right-flap\"></div>\r\n              <div className =\"box__front-flap\"></div>\r\n              <div className =\"box__left-flap\"></div>\r\n              <div className =\"box__front\"></div>\r\n          </div>\r\n      </div>\r\n      <div className =\"line\">\r\n          <div className =\"line__inner\"></div>\r\n      </div>\r\n      <div className =\"line\">\r\n          <div className =\"line__inner\"></div>\r\n      </div>\r\n      <div className =\"line\">\r\n          <div className =\"line__inner\"></div>\r\n      </div>\r\n      <div className =\"line\">\r\n          <div className =\"line__inner\"></div>\r\n      </div>\r\n      <div className =\"line\">\r\n          <div className =\"line__inner\"></div>\r\n      </div>\r\n      <div className =\"line\">\r\n          <div className =\"line__inner\"></div>\r\n      </div>\r\n      <div className =\"line\">\r\n          <div className =\"line__inner\"></div>\r\n      </div>\r\n  </div>\r\n  </div>\r\n    )\r\n  }\r\nfunction AllLectures() {\r\n    const [lectures, setLectures] = useState('')\r\n    let lecturesArray = []\r\n    const [isLoading, setLoading] = useState(false)\r\n    useEffect(() => {\r\n        firebase.firestore().collection(\"recordIndex\").orderBy(\"createdAt\", 'desc')\r\n        .limit(10).get().then((result) => {\r\n            result.forEach((doc) => {\r\n                lecturesArray.push(doc.data())\r\n            })\r\n            setLectures(lecturesArray)\r\n            setLoading(true)\r\n        })\r\n    }, [])\r\n    return (\r\n        <>\r\n            {isLoading ? <Card lectures={lectures}/>: <Preloader/>}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AllLectures","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport { createStore, compose, applyMiddleware} from 'redux';\r\nimport { Provider } from 'react-redux';\r\nimport './index.css';\r\nimport Recorder from './components/Recorder/Recorder';\r\nimport Video from './components/Player/Player';\r\nimport RecorderForm from './components/RecorderForm/recorderForm';\r\nimport DrawingBoard from './components/DrawingBoard/index';\r\nimport DrawingBoardPlayer from './components/DrawingBoard/index'\r\nimport allReducer from './reducers';\r\nimport LiveClassEmitter from './components/LiveClasses/liveClassEmitter'\r\nimport LiveClassReceiver from './components/LiveClasses/liveClassReceiver';\r\nimport thunk from 'redux-thunk'\r\nimport firebase from 'firebase/app';\r\nimport StartingComponent from './components/StartingComponent/startingCompoent';\r\nimport AllLectures from './components/Lectures/allLectures';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyAp2cQvNNp8fUKOv6kO_7wR5IsKROCoh14\",\r\n  authDomain: \"engage-6ef42.firebaseapp.com\",\r\n  projectId: \"engage-6ef42\",\r\n  storageBucket: \"engage-6ef42.appspot.com\",\r\n  messagingSenderId: \"27842359842\",\r\n  appId: \"1:27842359842:web:e8f5b15f6a86ac66fa507b\",\r\n  measurementId: \"G-EVEY2DP36T\",\r\n};\r\n\r\nif (firebase.apps.length===0){\r\n  firebase.initializeApp(firebaseConfig);\r\n}\r\n\r\nconst middleware = [thunk]\r\n\r\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(\r\n  allReducer, \r\n  composeEnhancer(applyMiddleware(...middleware)),\r\n);\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n  <React.StrictMode>\r\n    <Router>\r\n      <Switch>\r\n        <Route exact path = \"/lectures\" component = {AllLectures} />\r\n        <Route exact path = \"/drawboard\" component = {DrawingBoard}/>\r\n        <Route exact path = \"/emitter\" component = {LiveClassEmitter}/>\r\n        <Route exact path = \"/receiver\" component = {LiveClassReceiver}/>\r\n        <Route exact path = \"/recordform\" component = {RecorderForm}/>\r\n        <Route exact path = \"/recorder\" component = {Recorder} ide=\"web\"/>\r\n        <Route exact path = \"/videoplayer\" component = {Video}/>\r\n        <Route exact path = \"/\" component = {StartingComponent}/>\r\n    </Switch>\r\n    </Router>\r\n  </React.StrictMode>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n","import React from 'react';\r\nimport {useHistory} from \"react-router-dom\";\r\n\r\nexport default function StartingComponent() {\r\n\r\n    const history = useHistory();\r\n    const navigateToLectureScreen = () => history.push('/lectures')\r\n    const navigateToDrawBoard = () => history.push('/drawboard')\r\n    const navigateToDrawBoardStart = () => history.push('/emitter')\r\n    const navigateToDrawBoardEnd = () => history.push('/receiver')\r\n    const navigateToRecorderDraw = () => history.push('/recorder/drawboard');\r\n    const navigateToRecordForm = () => history.push('/recordform');\r\n    const navigateToPlayerDraw = () => history.push('/videoplayer/drawboard');\r\n    return (\r\n        <>\r\n        <button className = \"recordWebD\" onClick={navigateToRecordForm}>Recorder A Lecture</button>\r\n        {/* <button className = \"recordOther\" onClick={navigateToRecorderOther}>Recorder with Other</button> */}\r\n        <button className = \"playWebD\" onClick={navigateToLectureScreen}>Watch lectures </button>\r\n        {/* <button className = \"playOther\" onClick={navigateToPlayerOther}>Player with Other</button> */}\r\n        <button onClick={navigateToDrawBoard}>Drawing Board</button>\r\n        <button className = \"recordWebD\" onClick={navigateToRecorderDraw}>Recorder with Drawing Board</button>\r\n        {/* <button className = \"recordOther\" onClick={navigateToRecorderOther}>Recorder with Other</button> */}\r\n        <button className = \"playWebD\" onClick={navigateToDrawBoardStart}>Drawing Board Start</button>\r\n        <button className = \"playWebD\" onClick={navigateToDrawBoardEnd}>Drawing Board End</button>\r\n        </>\r\n    )\r\n}","module.exports = \"data:image/png;base64,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\""],"sourceRoot":""}