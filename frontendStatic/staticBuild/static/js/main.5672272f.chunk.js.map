{"version":3,"sources":["assets/files.js","components/TextEditor/TextEditor.js","actions/index.js","components/MultilanguageEditor/multiFile.js","actions/outputAction.js","components/IDE.js","components/DrawingBoard/random.js","components/DrawingBoard/element/newElement.js","components/DrawingBoard/math.js","components/DrawingBoard/element/bounds.js","components/DrawingBoard/element/handlerRectangles.js","components/DrawingBoard/element/collision.js","components/DrawingBoard/element/resizeTest.js","components/DrawingBoard/element/typeChecks.js","components/DrawingBoard/keys.js","components/DrawingBoard/element/textWysiwyg.js","components/DrawingBoard/utils.js","components/DrawingBoard/element/textElement.js","components/DrawingBoard/scene/scrollbars.js","components/DrawingBoard/scene/selection.js","components/DrawingBoard/renderer/roundRect.js","components/DrawingBoard/renderer/renderElement.js","components/DrawingBoard/renderer/renderScene.js","components/DrawingBoard/scene/data.js","components/DrawingBoard/scene/comparisons.js","components/DrawingBoard/scene/createScene.js","components/DrawingBoard/shapes.js","components/DrawingBoard/history.js","components/DrawingBoard/components/Popover.js","components/DrawingBoard/components/ContextMenu.js","components/DrawingBoard/actions/manager.js","components/DrawingBoard/actions/actionDeleteSelected.js","components/DrawingBoard/zindex.js","components/DrawingBoard/actions/actionZindex.js","components/DrawingBoard/actions/actionSelectAll.js","components/DrawingBoard/components/ButtonSelect.js","components/DrawingBoard/components/ColorPicker.js","components/DrawingBoard/components/panels/PanelColor.js","components/DrawingBoard/actions/actionProperties.js","components/DrawingBoard/actions/actionCanvas.js","components/DrawingBoard/components/EditableText.js","components/DrawingBoard/actions/actionExport.js","components/DrawingBoard/actions/actionStyles.js","components/DrawingBoard/components/Panel.js","components/DrawingBoard/components/panels/PanelTools.js","components/DrawingBoard/components/panels/PanelSelection.js","components/DrawingBoard/components/panels/PanelCanvas.js","components/DrawingBoard/components/panels/PanelExport.js","components/DrawingBoard/components/SidePanel.js","components/DrawingBoard/index.js","components/Recorder/Recorder.js","components/Player/Player.js","components/RecorderForm/recorderForm.js","reducers/filenameSelection.js","reducers/outputModalReducer.js","reducers/languageSelection.js","reducers/index.js","components/LiveClasses/liveClassEmitter.js","components/LiveClasses/liveClassReceiver.js","components/Card/card.js","components/Lectures/allLectures.js","index.js","components/StartingComponent/startingCompoent.js","assets/Gear-0.2s-200px.png"],"names":["files","name","language","value","TextEditor","props","srcDoc","useSelector","state","srcDocs","modalActive","outputModal","fileName","dispatch","useDispatch","file","handleCloseModal","type","className","id","disabled","onClick","console","log","style","color","backgroundColor","padding","borderRadius","height","width","theme","path","defaultLanguage","defaultValue","saveViewState","onChange","cursorSmoothCaretAnimation","isOpen","contentLabel","onRequestClose","overlayClassName","ariaHideApp","title","sandbox","frameBorder","MultiFile","useState","outputValue","setOutputValue","inputValue","setInputValue","words","split","code","i","length","input","a","url","axios","post","stdin","versionIndex","script","runCode","then","e","data","output","event","CustomEvent","detail","document","documentElement","dispatchEvent","class","options","fontSize","fontWeight","fontFamily","beforeMount","monaco","editor","defineTheme","base","inherit","rules","colors","rows","cols","target","placeholder","App","refresh","randomSeed","Math","floor","random","withCustomMathRandom","seed","cb","imul","LCG","result","newElement","x","y","strokeColor","fillStyle","strokeWidth","roughness","opacity","element","nextId","isSelected","duplicateElement","copy","distanceBetweenPointAndSegment","x1","y1","x2","y2","xx","yy","C","D","lenSquare","param","dx","dy","hypot","rotate","angle","cos","sin","getElementAbsoluteCoords","getDiamondPoints","topX","rightX","rightY","getArrowPoints","distance","minSize","min","xs","ys","PI","x3","y3","handlerRectangles","scrollX","scrollY","elementX1","elementX2","elementY1","elementY2","handlers","marginX","marginY","abs","nw","se","hitTest","px","py","tx","ty","b","forEach","ex","ey","rx","ry","qx","qy","r","q","max","t","topY","bottomX","bottomY","leftX","leftY","x4","y4","warn","Error","resizeTest","filter","Object","keys","key","handler","getElementWithResizeHandler","elements","reduce","resizeHandle","isTextElement","KEYS","META_KEY","test","window","navigator","platform","textWysiwyg","initText","font","onSubmit","editable","createElement","stopEvent","ev","stopPropagation","handleSubmit","innerText","cleanup","onblur","onkeydown","onpaste","removeEventListener","body","removeChild","contentEditable","tabIndex","dataset","assign","position","top","left","transform","textAlign","display","outline","whiteSpace","minHeight","preventDefault","text","clipboardData","getData","replace","textContent","addEventListener","appendChild","focus","selection","getSelection","range","createRange","selectNodeContents","removeAllRanges","addRange","capitalizeString","str","charAt","toUpperCase","slice","isInputLike","HTMLElement","HTMLInputElement","HTMLTextAreaElement","HTMLSelectElement","measureText","line","offsetWidth","offsetHeight","span","overflow","baseline","offsetTop","redrawTextBoundingBox","metrics","getScrollBars","canvasWidth","canvasHeight","minX","Infinity","maxX","minY","maxY","leftOverflow","rightOverflow","topOverflow","bottomOverflow","horizontalScrollBar","SCROLLBAR_MARGIN","verticalScrollBar","SCROLLBAR_WIDTH","horizontal","vertical","clearSelection","newElements","deleteSelectedElements","el","getSelectedIndices","selectedIndices","index","push","someElementIsSelected","some","getSelectedAttribute","getAttribute","attributes","Array","from","Set","map","roundRect","context","radius","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","fill","stroke","generator","rough","renderElement","rc","fillRect","shape","rectangle","globalAlpha","translate","draw","polygon","ellipse","shapes","fillText","actualBoundingBoxAscent","renderScene","canvas","sceneState","offsetX","offsetY","renderScrollbars","renderSelection","getContext","viewBackgroundColor","clearRect","selectedElements","lineDash","getLineDash","setLineDash","strokeRect","margin","values","scrollBars","devicePixelRatio","strokeStyle","scrollBar","saveFile","link","setAttribute","click","remove","restore","savedElements","savedState","undefined","appState","getElementAtPosition","hitElement","SHAPES","icon","viewBox","d","shapesShortcutKeys","SceneHistory","this","recording","stateHistory","redoStack","JSON","stringify","newEntry","entry","skipRecording","parse","splice","currentEntry","generateCurrentEntry","entryToRestore","pop","restoreEntry","Popover","children","onCloseRequest","onContextMenu","contextMenuNode","ContextMenu","option","idx","ContextMenuOption","label","action","getContextMenuNode","div","handleClose","unmountComponentAtNode","params","of","render","ActionManager","actions","updater","sort","keyPriority","keyTest","perform","contextItemLabel","contextMenuOrder","PanelComponent","updateData","formState","actionDeleteSelected","swap","indexA","indexB","moveOneLeft","indicesToMove","isSorted","moveOneRight","reversedIndicesToMove","moveAllLeft","leftMostElements","reverse","concat","pos","moveAllRight","rightMostElements","actionSendBackward","shiftKey","altKey","actionBringForward","actionSendToBack","actionBringToFront","actionSelectAll","elem","ButtonSelect","TwitterPicker","lazy","ColorPicker","React","isActive","setActive","Suspense","fallback","changedColor","hex","onPaste","PanelColor","onColorChange","colorValue","changeProperty","callback","actionChangeStrokeColor","currentItemStrokeColor","actionChangeBackgroundColor","currentItemBackgroundColor","actionChangeFillStyle","actionChangeStrokeWidth","actionChangeSloppiness","actionChangeOpacity","actionChangeFontSize","actionChangeFontFamily","actionChangeViewBackgroundColor","actionClearCanvas","confirm","EditableText","edit","setState","maxLength","handleEdit","onBlur","handleBlur","onKeyDown","autoFocus","Component","actionChangeProjectName","actionChangeExportBackground","exportBackground","checked","actionSaveScene","serialized","version","source","location","origin","encodeURIComponent","saveAsJSON","actionLoadScene","loadedElements","reader","FileReader","accept","onchange","readAsText","alert","Promise","resolve","onloadend","readyState","DONE","loadFromJSON","copiedStyles","actionCopyStyles","find","actionPasteStyles","pastedElement","_a","_b","_c","_d","_e","_f","_g","Panel","defaultCollapsed","hide","collapsed","setCollapsed","PanelTools","activeTool","onToolChange","PanelSelection","actionManager","syncActionResult","renderAction","PanelCanvas","ClipboardIcon","probablySupportsClipboard","HTMLCanvasElement","prototype","clipboard","PanelExport","onExportCanvas","SidePanel","elementType","hasBackground","hasStroke","hasText","exportPadding","subCanvasX1","subCanvasX2","subCanvasY1","subCanvasY2","tempCanvas","toDataURL","toBlob","blob","write","ClipboardItem","err","exportCanvas","history","DEFAULT_PROJECT_NAME","date","Date","year","getFullYear","month","getMonth","day","getDate","hr","getHours","getMinutes","secs","getSeconds","getDateTime","resetCursor","cursor","addTextElement","lastCanvasWidth","lastCanvasHeight","lastMouseUp","viewportCoordsToSceneCoords","clientX","clientY","startTime","res","forceUpdate","draggingElement","resizingElement","currentItemFont","cursorX","cursorY","onResize","getCurrentCursorPosition","activeElement","blur","keyCode","handleKeyDown","step","includes","toLowerCase","redoOnce","undoOnce","copyToClipboard","writeText","pasteFromClipboard","readText","addElementsFromPaste","handleWheel","deltaX","deltaY","paste","parsedElements","isArray","parsedElement","elementsCenterX","elementsCenterY","duplicate","registerAction","localStorage","getItem","restoreFromLocalStorage","innerWidth","innerHeight","onCut","setData","onCopy","ref","removeWheelEventListener","passive","scale","getContextMenuItems","onMouseDown","button","isOverHorizontalScrollBar","isOverVerticalScrollBar","isOverScrollBars","isResizingElements","draggingOccured","elementIsAddedToSelection","resizeElement","duplicates","textX","textY","snappedToCenterPosition","getTextWysiwygSnappedToCenterPosition","elementCenterX","elementCenterY","wysiwygX","wysiwygY","lastX","lastY","onMouseMove","sign","selectionX1","selectionY1","selectionX2","selectionY2","setSelection","onMouseUp","resumeRecording","onDoubleClick","elementAtPosition","Boolean","buttons","elementClickedInside","getElementContainingPosition","setItem","isRecording","pushEntry","clearRedoStack","Preloader","src","img","border","RecorderForm","lectureName","lectureType","lectureCreator","languageType","useHistory","languageList","useEffect","select","getElementById","add","creator","pathname","filenameReducer","outputModalReducer","languageReducer","allReducers","combineReducers","LiveClassEmitter","socketRef","useRef","current","io","eventName","sendData","emit","startLive","stopLive","zIndex","LiveClassReceiver","on","eve","MouseEvent","bubbles","cancelable","tar","getElementsByClassName","nodeName","Card","mainWindow","lectures","lecture","playButton","nameHeading","innerHTML","AllLectures","setLectures","lecturesArray","isLoading","setLoading","firebase","firestore","collection","orderBy","limit","get","doc","apps","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","middleware","thunk","composeEnhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","allReducer","applyMiddleware","ReactDOM","StrictMode","exact","component","DrawingBoard","childValue","Recording","events","lastMouse","lastKey","lastKeyClass","time","now","pageX","pageY","Mp3Recorder","MicRecorder","bitRate","prefix","startRecording","start","catch","error","stopRecording","recordingString","createdAt","FieldValue","serverTimestamp","audioString","stop","getMp3","buffer","File","lastModified","readAsDataURL","storageRef","storage","removeItem","child","putString","snapshot","IDE","parentCallBack","childData","ide","setRefresh","drawing","setDrawing","offsetPlay","videoPlayer","recordingJsonValue","where","FieldPath","documentId","snap","getDownloadURL","audioPlayer","fakeCursor","startPlay","paused","pausefunction","playfunction","frames","handleButtonEvents","flashClass","drawEvent","clearInterval","setInterval","classList","setTimeout","pause","curTime","currentTime","play","controls","controlsList","module","exports"],"mappings":"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","file":"static/js/main.5672272f.chunk.js","sourcesContent":["const someJSCodeExample = ``;\n\nconst someCSSCodeExample = ``;\n\nconst someHTMLCodeExample = ``;\n\nconst someCCodeExample = ``;\n\nconst someCpp99CodeExample = ``\n\nconst someCppCodeExample = ``\n\nconst someCpp14CodeExample = ``\n\nconst someCpp17CodeExample = ``\n\nconst somePython2CodeExample = ``\n\nconst somePython3CodeExample = ``\n\nconst files = {\n  \"script.js\": {\n    name: \"script.js\",\n    language: \"javascript\",\n    value: someJSCodeExample\n  },\n  \"style.css\": {\n    name: \"style.css\",\n    language: \"css\",\n    value: someCSSCodeExample\n  },\n  \"index.html\": {\n    name: \"index.html\",\n    language: \"html\",\n    value: someHTMLCodeExample\n  },\n  \"c\": {\n    name: \"main.c\",\n    language: \"cpp\",\n    value: someCCodeExample\n  },\n  \"c99\": {\n    name: \"main.cpp\",\n    language: \"cpp\",\n    value: someCpp99CodeExample\n  },\n  \"cpp\": {\n    name: \"main.cpp\",\n    language: \"cpp\",\n    value: someCppCodeExample\n  },\n  \"cpp14\": {\n    name: \"main.cpp\",\n    language: \"cpp\",\n    value: someCpp14CodeExample\n  },\n  \"cpp17\": {\n    name: \"main.cpp\",\n    language: \"cpp\",\n    value: someCpp17CodeExample\n  },\n  \"python2\": {\n    name: \"python\",\n    language: \"python\",\n    value: somePython2CodeExample\n  },\n  \"python3\": {\n    name: \"python\",\n    language: \"python\",\n    value: somePython3CodeExample\n  }\n};\n\nexport default files;\n","import React from \"react\";\nimport ReactModal from \"react-modal\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Editor from \"@monaco-editor/react\";\nimport { js, css, html, outputModalTrue, outputModalFalse, setSrcDocs } from '../../actions'\nimport files from \"../../assets/files\";\nimport \"./style.css\"\n\nfunction TextEditor(props) {\n  const srcDoc = useSelector(state => state.srcDocs);\n  const modalActive = useSelector(state => state.outputModal);\n\n  const fileName = useSelector(state => state.fileName);\n  const dispatch = useDispatch();\n\n  const file = files[fileName];\n\n  function handleEditorChange(value) {\n    file.value = value;\n  }\n\n  const handleOutput = () => {\n    dispatch(setSrcDocs());\n    dispatch(outputModalTrue());\n    console.log(\"l\")\n  }\n\n  function handleCloseModal() {\n    dispatch(outputModalFalse());\n  }\n\n  return (\n    <div className = \"text-editor\">\n\n    {/* Sidebar   */}\n    <div className = \"editor-sidebar\">\n    <div className = \"sidebar-heading\">\n      <span id = \"explorer-spam\" >Explorer</span>\n      <button className = \"sidebar-add-file\">\n        {/* <i className = \"fas fa-plus\" style = {{color : \"#fffffe\" }}></i>  */}\n      </button>\n    </div>\n    <div className = \"sidebar-navbutton\">\n\n     <button\n        className = \"htmlfile\"\n        disabled={fileName === \"index.html\"}\n        onClick={() => dispatch(html()) }\n      >\n      <i className =\"fab fa-html5\"></i> <span className = \"buttontext html\" >{files[\"index.html\"].name} </span>\n     </button>\n\n     <button\n        className = \"cssfile\"\n        disabled={fileName === \"style.css\"}\n        onClick={() => dispatch(css())}\n      > \n      <i className = \"fab fa-css3-alt\"></i> <span className = \"buttontext style\" >{files[\"style.css\"].name} </span>\n      </button>\n\n      <button\n        className = \"jsfile\"\n        disabled={fileName === \"script.js\"}\n        onClick={() => dispatch(js())}\n      >\n      <i className=\"fab fa-js-square\"></i> <span className = \"buttontext script\" >{files[\"script.js\"].name} </span>\n      </button>\n\n\n    </div>\n    <div className = \"sidebar-footer\">\n    <button onClick={handleOutput} style = {{color : \"white\", backgroundColor: \"green\", padding: \"5px\", borderRadius: \"5px\"}} className=\"output\"><i style = {{color : \"white\"}} className=\"fas fa-play\"></i><span className = \"outputtext\" style = {{color : \"white\", backgroundColor: \"green\"}}> See Output</span></button>\n    </div>\n    </div>\n\n    {/* Editor */}\n    <div className = \"editor\">\n    <Editor\n            height=\"100vh\"\n            width=\"94vw\"\n            theme=\"vs-light\"\n            path={file.name}\n            defaultLanguage={file.language}\n            defaultValue={file.value}\n            saveViewState={true}\n            onChange={handleEditorChange}\n            cursorSmoothCaretAnimation = \"true\"\n            value={file.value}\n          />\n    </div>\n\n\n    <ReactModal\n            className=\"outputModal Modal\"\n            isOpen={modalActive}\n            contentLabel=\"onRequestClose Example\"\n            onRequestClose={handleCloseModal}\n            overlayClassName=\"Overlay\"\n            ariaHideApp={false}\n          >\n           \n            <div className=\"closeButton\"><i className=\"fas fa-window-close\" onClick={handleCloseModal}></i></div>\n            <iframe\n              srcDoc={srcDoc}\n              title=\"output\"\n              className=\"outputiframe\"\n              sandbox=\"allow-scripts\"\n              frameBorder=\"0\"\n            />\n          \n          </ReactModal>\n\n    </div>\n  );\n}\n\nexport default TextEditor;\n","export const js = () => {\n    return {\n        type: \"js\"\n    };\n};\n\nexport const css = () => {\n    return {\n        type: \"css\"\n    };\n};\n\nexport const html = () => {\n    return {\n        type: \"html\"\n    };\n};\n\nexport const outputModalTrue = () => {\n    return {\n        type: \"outputtrue\"\n    };\n};\n\nexport const outputModalFalse = () => {\n    return {\n        type: \"outputfalse\"\n    };\n};\n\nexport const setSrcDocs = () => {\n    return {\n        type : \"setSrcdoc\",\n    }\n}\n\nexport const c = () => {\n    return {\n        type : \"c\",\n    }\n}\n\nexport const c99 = () => {\n    return {\n        type : \"c99\",\n    }\n}\n\nexport const cpp = () => {\n    return {\n        type : \"cpp\",\n    }\n}\n\nexport const cpp14 = () => {\n    return {\n        type : \"cpp14\",\n    }\n}\n\nexport const cpp17 = () => {\n    return {\n        type : \"cpp17\",\n    }\n}\n\nexport const python2 = () => {\n    return {\n        type : \"python2\",\n    }\n}\n\nexport const python3 = () => {\n    return {\n        type : \"python3\",\n    }\n}","import React, { useState, useEffect } from \"react\";\nimport Editor from \"@monaco-editor/react\";\nimport files from \"../../assets/files\";\nimport { c, c99, cpp, cpp14, cpp17, python2, python3 } from \"../../actions\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { runCode } from \"../../actions/outputAction\";\nimport \"./style.css\";\nfunction MultiFile(props) {\n  const [language, setLanguage] = useState(props.language);\n  const fileName = useSelector((state) => state.language);\n  const dispatch = useDispatch();\n  const [outputValue, setOutputValue] = useState(\"\");\n  const [inputValue, setInputValue] = useState(\"\");\n  const file = files[language];\n\n  function handleEditorChange(value) {\n    file.value = value;\n  }\n\n  function handleEditorWillMount(monaco) {\n    monaco.editor.defineTheme(\"my-cool-theme\", {\n      base: \"vs-dark\",\n      inherit: true,\n      rules: [],\n      colors: { \"editor.background\": \"#293738\" }\n    });\n  }\n\n  const languageList = {\n    \"Python 2\": \"python2\", \n    C: \"c\",\n    \"C-99\": \"c99\",\n    \"C++\": \"cpp\",\n    \"C++ 14\": \"cpp14\",\n    \"C++ 17\": \"cpp17\",\n    \"Python 3\": \"python3\",\n  };\n\n  // useEffect(() => {\n  //   const select = document.getElementsByClassName(\"language\")[0]\n  //   for (let key in languageList) {\n  //     var option = document.createElement(\"option\");\n  //     option.text = key;\n  //     option.value = languageList[key];\n  //     option.className = languageList[key];\n  //     select.add(option);\n  //   }\n\n  //   select.addEventListener(\"change\", (e) => {\n  //     setLanguage(select.value);\n  //     if (select.value === \"c\") {\n  //       dispatch(c());\n  //     }\n  //     if (select.value === \"c99\") {\n  //       dispatch(c99());\n  //     }\n  //     if (select.value === \"cpp\") {\n  //       dispatch(cpp());\n  //     }\n  //     if (select.value === \"cpp\") {\n  //       dispatch(cpp());\n  //     }\n  //     if (select.value === \"cpp14\") {\n  //       dispatch(cpp14());\n  //     }\n  //     if (select.value === \"cpp17\") {\n  //       dispatch(cpp17());\n  //     }\n  //     if (select.value === \"python2\") {\n  //       dispatch(python2());\n  //     }\n  //     if (select.value === \"python3\") {\n  //       dispatch(python3());\n  //     }\n  //   });\n  // }, []);\n\n  function userOutput(e) {\n    console.log(e);\n  }\n\n  function handleInput(e) {\n    setInputValue(e.target.value);\n  }\n\n  function handleOutput() {\n    const words = file.value.split(\"\\r\");\n    let code = \"\";\n    for (let i = 0; i < words.length; i++) {\n      code = code + words[i];\n    }\n    dispatch(runCode(language, code, inputValue)).then((e) => {\n      setOutputValue(e.data.output);\n      const data = {\n        output: e.data.output,\n      };\n      //creating a custom like predefined events like click or mousemove and more\n      const event = new CustomEvent(\"output\", { detail: data });\n      //dispatching the event in document.documentElement where we listen for it in while recording\n      document.documentElement.dispatchEvent(event);\n    });\n  }\n\n  return (\n    <>\n      <div className=\"multilanguageIde\">\n        <div className=\"navbar\">\n        <div className=\"editor\">\n        <div className=\"navbar\">\n          <span className=\"fileName\">main \n          {language === \"python2\" || language === \"python3\" ? \".py\": \".cpp\"}\n          </span>\n          <div className=\"optionButton\">\n            <button\n              className=\"showCodeOutput\"\n              onClick={handleOutput}\n            >\n              <i class=\"fas fa-play\"></i> Execute\n            </button>\n          </div>\n        </div>\n          <Editor\n            height=\"96vh\"\n            width=\"80vw\"\n            theme=\"vs-light\"\n            language=\"python\"\n            options={{ fontSize: 18, fontWeight: 400, fontFamily: \"cursive\" }}\n            onChange={handleEditorChange}\n            value={file.value}\n            beforeMount={handleEditorWillMount}\n          />\n        </div>\n          <div className=\"inputOutput\">\n            <div className=\"inputArea\">\n              <h3>Input</h3>\n              <textarea\n                rows=\"20\"\n                cols=\"52\"\n                className=\"userInputArea\"\n                onChange={handleInput}\n                placeholder=\"Enter Input\"\n              ></textarea>\n            </div>\n            <div className=\"outputArea\">\n              <h3>Output</h3>\n              <textarea\n                rows=\"20\"\n                cols=\"52\"\n                className=\"userOutputArea\"\n                onChange={userOutput}\n                value={outputValue}\n              ></textarea>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default MultiFile;\n","import axios from \"axios\";\n\nconst env = process.env.NODE_ENV; // current environment\n\nexport const runCode = (language, code, input) => async dispatch => {\n    let url\n    if(env === \"development\") {\n        url = 'http://localhost:5000/'\n    }else{\n        url = 'https://fierce-reef-05156.herokuapp.com/' \n    }\n    return await axios.post( url+'api/compile', {\n        language: language, \n        stdin:input,\n        versionIndex: \"0\",\n        script:code\n    })\n}\n","import React from 'react';\nimport TextEditor from './TextEditor/TextEditor';\nimport MultiFile from './MultilanguageEditor/multiFile';\n\nfunction App(props) {\n  return (\n    <>\n    {props.name === \"ide\" ? <TextEditor refresh = {props.refresh}/> :<MultiFile language={props.language} refresh = {props.refresh}/>}\n    </>\n  )\n}\n\nexport default App;","// https://stackoverflow.com/questions/521295/seeding-the-random-number-generator-in-javascript/47593316#47593316\nexport const LCG = (seed) => () => ((2 ** 31 - 1) & (seed = Math.imul(48271, seed))) / 2 ** 31;\nexport function randomSeed() {\n    return Math.floor(Math.random() * 2 ** 31);\n}\n// Unfortunately, roughjs doesn't support a seed attribute (https://github.com/pshihn/rough/issues/27).\n// We can achieve the same result by overriding the Math.random function with a\n// pseudo random generator that supports a random seed and swapping it back after.\nexport function withCustomMathRandom(seed, cb) {\n    const random = Math.random;\n    Math.random = LCG(seed);\n    const result = cb();\n    Math.random = random;\n    return result;\n}\n","import { randomSeed } from \"../random\";\nimport nextId from \"react-id-generator\";\nexport function newElement(type, x, y, strokeColor, backgroundColor, fillStyle, strokeWidth, roughness, opacity, width = 0, height = 0) {\n    const element = {\n        id: nextId(),\n        type,\n        x,\n        y,\n        width,\n        height,\n        strokeColor,\n        backgroundColor,\n        fillStyle,\n        strokeWidth,\n        roughness,\n        opacity,\n        isSelected: false,\n        seed: randomSeed()\n    };\n    return element;\n}\nexport function duplicateElement(element) {\n    const copy = { ...element };\n    copy.id = nextId();\n    copy.seed = randomSeed();\n    return copy;\n}\n","// https://stackoverflow.com/a/6853926/232122\nexport function distanceBetweenPointAndSegment(x, y, x1, y1, x2, y2) {\n    const A = x - x1;\n    const B = y - y1;\n    const C = x2 - x1;\n    const D = y2 - y1;\n    const dot = A * C + B * D;\n    const lenSquare = C * C + D * D;\n    let param = -1;\n    if (lenSquare !== 0) {\n        // in case of 0 length line\n        param = dot / lenSquare;\n    }\n    let xx, yy;\n    if (param < 0) {\n        xx = x1;\n        yy = y1;\n    }\n    else if (param > 1) {\n        xx = x2;\n        yy = y2;\n    }\n    else {\n        xx = x1 + param * C;\n        yy = y1 + param * D;\n    }\n    const dx = x - xx;\n    const dy = y - yy;\n    return Math.hypot(dx, dy);\n}\nexport function rotate(x1, y1, x2, y2, angle) {\n    // =()cos()sin+\n    // =()sin+()cos+.\n    // https://math.stackexchange.com/questions/2204520/how-do-i-rotate-a-line-segment-in-a-specific-point-on-the-line\n    return [\n        (x1 - x2) * Math.cos(angle) - (y1 - y2) * Math.sin(angle) + x2,\n        (x1 - x2) * Math.sin(angle) + (y1 - y2) * Math.cos(angle) + y2\n    ];\n}\n","import { rotate } from \"../math\";\n// If the element is created from right to left, the width is going to be negative\n// This set of functions retrieves the absolute position of the 4 points.\n// We can't just always normalize it since we need to remember the fact that an arrow\n// is pointing left or right.\nexport function getElementAbsoluteCoords(element) {\n    return [\n        element.width >= 0 ? element.x : element.x + element.width,\n        element.height >= 0 ? element.y : element.y + element.height,\n        element.width >= 0 ? element.x + element.width : element.x,\n        element.height >= 0 ? element.y + element.height : element.y // y2\n    ];\n}\nexport function getDiamondPoints(element) {\n    // Here we add +1 to avoid these numbers to be 0\n    // otherwise rough.js will throw an error complaining about it\n    const topX = Math.floor(element.width / 2) + 1;\n    const topY = 0;\n    const rightX = element.width;\n    const rightY = Math.floor(element.height / 2) + 1;\n    const bottomX = topX;\n    const bottomY = element.height;\n    const leftX = topY;\n    const leftY = rightY;\n    return [topX, topY, rightX, rightY, bottomX, bottomY, leftX, leftY];\n}\nexport function getArrowPoints(element) {\n    const x1 = 0;\n    const y1 = 0;\n    const x2 = element.width;\n    const y2 = element.height;\n    const size = 30; // pixels\n    const distance = Math.hypot(x2 - x1, y2 - y1);\n    // Scale down the arrow until we hit a certain size so that it doesn't look weird\n    const minSize = Math.min(size, distance / 2);\n    const xs = x2 - ((x2 - x1) / distance) * minSize;\n    const ys = y2 - ((y2 - y1) / distance) * minSize;\n    const angle = 20; // degrees\n    const [x3, y3] = rotate(xs, ys, x2, y2, (-angle * Math.PI) / 180);\n    const [x4, y4] = rotate(xs, ys, x2, y2, (angle * Math.PI) / 180);\n    return [x1, y1, x2, y2, x3, y3, x4, y4];\n}\n","export function handlerRectangles(element, { scrollX, scrollY }) {\n    const elementX1 = element.x;\n    const elementX2 = element.x + element.width;\n    const elementY1 = element.y;\n    const elementY2 = element.y + element.height;\n    const margin = 4;\n    const minimumSize = 40;\n    const handlers = {};\n    const marginX = element.width < 0 ? 8 : -8;\n    const marginY = element.height < 0 ? 8 : -8;\n    if (Math.abs(elementX2 - elementX1) > minimumSize) {\n        handlers[\"n\"] = [\n            elementX1 + (elementX2 - elementX1) / 2 + scrollX - 4,\n            elementY1 - margin + scrollY + marginY,\n            8,\n            8\n        ];\n        handlers[\"s\"] = [\n            elementX1 + (elementX2 - elementX1) / 2 + scrollX - 4,\n            elementY2 - margin + scrollY - marginY,\n            8,\n            8\n        ];\n    }\n    if (Math.abs(elementY2 - elementY1) > minimumSize) {\n        handlers[\"w\"] = [\n            elementX1 - margin + scrollX + marginX,\n            elementY1 + (elementY2 - elementY1) / 2 + scrollY - 4,\n            8,\n            8\n        ];\n        handlers[\"e\"] = [\n            elementX2 - margin + scrollX - marginX,\n            elementY1 + (elementY2 - elementY1) / 2 + scrollY - 4,\n            8,\n            8\n        ];\n    }\n    handlers[\"nw\"] = [\n        elementX1 - margin + scrollX + marginX,\n        elementY1 - margin + scrollY + marginY,\n        8,\n        8\n    ]; // nw\n    handlers[\"ne\"] = [\n        elementX2 - margin + scrollX - marginX,\n        elementY1 - margin + scrollY + marginY,\n        8,\n        8\n    ]; // ne\n    handlers[\"sw\"] = [\n        elementX1 - margin + scrollX + marginX,\n        elementY2 - margin + scrollY - marginY,\n        8,\n        8\n    ]; // sw\n    handlers[\"se\"] = [\n        elementX2 - margin + scrollX - marginX,\n        elementY2 - margin + scrollY - marginY,\n        8,\n        8\n    ]; // se\n    if (element.type === \"arrow\") {\n        return {\n            nw: handlers.nw,\n            se: handlers.se\n        };\n    }\n    return handlers;\n}\n","import { distanceBetweenPointAndSegment } from \"../math\";\nimport { getArrowPoints, getDiamondPoints, getElementAbsoluteCoords } from \"./bounds\";\nexport function hitTest(element, x, y) {\n    // For shapes that are composed of lines, we only enable point-selection when the distance\n    // of the click is less than x pixels of any of the lines that the shape is composed of\n    const lineThreshold = 10;\n    if (element.type === \"ellipse\") {\n        // https://stackoverflow.com/a/46007540/232122\n        const px = Math.abs(x - element.x - element.width / 2);\n        const py = Math.abs(y - element.y - element.height / 2);\n        let tx = 0.707;\n        let ty = 0.707;\n        const a = Math.abs(element.width) / 2;\n        const b = Math.abs(element.height) / 2;\n        [0, 1, 2, 3].forEach(x => {\n            const xx = a * tx;\n            const yy = b * ty;\n            const ex = ((a * a - b * b) * tx ** 3) / a;\n            const ey = ((b * b - a * a) * ty ** 3) / b;\n            const rx = xx - ex;\n            const ry = yy - ey;\n            const qx = px - ex;\n            const qy = py - ey;\n            const r = Math.hypot(ry, rx);\n            const q = Math.hypot(qy, qx);\n            tx = Math.min(1, Math.max(0, ((qx * r) / q + ex) / a));\n            ty = Math.min(1, Math.max(0, ((qy * r) / q + ey) / b));\n            const t = Math.hypot(ty, tx);\n            tx /= t;\n            ty /= t;\n        });\n        return Math.hypot(a * tx - px, b * ty - py) < lineThreshold;\n    }\n    else if (element.type === \"rectangle\") {\n        const [x1, y1, x2, y2] = getElementAbsoluteCoords(element);\n        // (x1, y1) --A-- (x2, y1)\n        //    |D             |B\n        // (x1, y2) --C-- (x2, y2)\n        return (distanceBetweenPointAndSegment(x, y, x1, y1, x2, y1) < lineThreshold || // A\n            distanceBetweenPointAndSegment(x, y, x2, y1, x2, y2) < lineThreshold || // B\n            distanceBetweenPointAndSegment(x, y, x2, y2, x1, y2) < lineThreshold || // C\n            distanceBetweenPointAndSegment(x, y, x1, y2, x1, y1) < lineThreshold // D\n        );\n    }\n    else if (element.type === \"diamond\") {\n        x -= element.x;\n        y -= element.y;\n        const [topX, topY, rightX, rightY, bottomX, bottomY, leftX, leftY] = getDiamondPoints(element);\n        return (distanceBetweenPointAndSegment(x, y, topX, topY, rightX, rightY) <\n            lineThreshold ||\n            distanceBetweenPointAndSegment(x, y, rightX, rightY, bottomX, bottomY) <\n                lineThreshold ||\n            distanceBetweenPointAndSegment(x, y, bottomX, bottomY, leftX, leftY) <\n                lineThreshold ||\n            distanceBetweenPointAndSegment(x, y, leftX, leftY, topX, topY) <\n                lineThreshold);\n    }\n    else if (element.type === \"arrow\") {\n        let [x1, y1, x2, y2, x3, y3, x4, y4] = getArrowPoints(element);\n        // The computation is done at the origin, we need to add a translation\n        x -= element.x;\n        y -= element.y;\n        return (\n        //    \\\n        distanceBetweenPointAndSegment(x, y, x3, y3, x2, y2) < lineThreshold ||\n            // -----\n            distanceBetweenPointAndSegment(x, y, x1, y1, x2, y2) < lineThreshold ||\n            //    /\n            distanceBetweenPointAndSegment(x, y, x4, y4, x2, y2) < lineThreshold);\n    }\n    else if (element.type === \"text\") {\n        const [x1, y1, x2, y2] = getElementAbsoluteCoords(element);\n        return x >= x1 && x <= x2 && y >= y1 && y <= y2;\n    }\n    else if (element.type === \"selection\") {\n        console.warn(\"This should not happen, we need to investigate why it does.\");\n        return false;\n    }\n    else {\n        throw new Error(\"Unimplemented type \" + element.type);\n    }\n}\n","import { handlerRectangles } from \"./handlerRectangles\";\nexport function resizeTest(element, x, y, { scrollX, scrollY }) {\n    if (!element.isSelected || element.type === \"text\")\n        return false;\n    const handlers = handlerRectangles(element, { scrollX, scrollY });\n    const filter = Object.keys(handlers).filter(key => {\n        const handler = handlers[key];\n        return (x + scrollX >= handler[0] &&\n            x + scrollX <= handler[0] + handler[2] &&\n            y + scrollY >= handler[1] &&\n            y + scrollY <= handler[1] + handler[3]);\n    });\n    if (filter.length > 0) {\n        return filter[0];\n    }\n    return false;\n}\nexport function getElementWithResizeHandler(elements, { x, y }, { scrollX, scrollY }) {\n    return elements.reduce((result, element) => {\n        if (result) {\n            return result;\n        }\n        const resizeHandle = resizeTest(element, x, y, {\n            scrollX,\n            scrollY\n        });\n        return resizeHandle ? { element, resizeHandle } : null;\n    }, null);\n}\n","export function isTextElement(element) {\n    return element.type === \"text\";\n}\n","export const KEYS = {\n    ARROW_LEFT: \"ArrowLeft\",\n    ARROW_RIGHT: \"ArrowRight\",\n    ARROW_DOWN: \"ArrowDown\",\n    ARROW_UP: \"ArrowUp\",\n    ENTER: \"Enter\",\n    ESCAPE: \"Escape\",\n    DELETE: \"Delete\",\n    BACKSPACE: \"Backspace\"\n};\nexport const META_KEY = /Mac|iPod|iPhone|iPad/.test(window.navigator.platform)\n    ? \"metaKey\"\n    : \"ctrlKey\";\nexport function isArrowKey(keyCode) {\n    return (keyCode === KEYS.ARROW_LEFT ||\n        keyCode === KEYS.ARROW_RIGHT ||\n        keyCode === KEYS.ARROW_DOWN ||\n        keyCode === KEYS.ARROW_UP);\n}\n","import { KEYS } from \"../keys\";\nexport function textWysiwyg({ initText, x, y, strokeColor, font, onSubmit }) {\n    // Using contenteditable here as it has dynamic width.\n    // But this solution has an issue  it allows to paste\n    // multiline text, which is not currently supported\n   \n    const editable = document.createElement(\"div\");\n    editable.contentEditable = \"true\";\n    editable.tabIndex = 0;\n    editable.className = \"canvas_text\";\n    editable.innerText = initText;\n    editable.dataset.type = \"wysiwyg\";\n    Object.assign(editable.style, {\n        color: strokeColor,\n        position: \"absolute\",\n        top: y + \"px\",\n        left: x + \"px\",\n        transform: \"translate(-50%, -50%)\",\n        textAlign: \"center\",\n        display: \"inline-block\",\n        font: font,\n        padding: \"4px\",\n        outline: \"transparent\",\n        whiteSpace: \"nowrap\",\n        minHeight: \"1em\"\n    });\n    editable.onkeydown = ev => {\n       \n        if (ev.key === KEYS.ESCAPE) {\n            ev.preventDefault();\n            if (initText) {\n                editable.innerText = initText;\n                handleSubmit();\n                return;\n            }\n            cleanup();         \n            return;\n        }\n        if (ev.key === KEYS.ENTER) {\n            ev.preventDefault();\n            handleSubmit();\n        }\n    };\n\n    editable.onblur = handleSubmit;\n    // override paste to disallow non-textual data, and replace newlines\n    editable.onpaste = ev => {\n        ev.preventDefault();\n        try {\n            const text = ev.clipboardData.getData(\"text\").replace(/\\n+/g, \" \");\n            editable.textContent = text;\n        }\n        catch { }\n    };\n    function stopEvent(ev) {\n        ev.stopPropagation();\n    }\n    function handleSubmit() {\n        if (editable.innerText) {\n            onSubmit(editable.innerText);\n        }\n        cleanup();\n    }\n    function cleanup() {\n        editable.onblur = null;\n        editable.onkeydown = null;\n        editable.onpaste = null;\n        window.removeEventListener(\"wheel\", stopEvent, true);\n        document.body.removeChild(editable);\n    }\n    window.addEventListener(\"wheel\", stopEvent, true);\n    document.body.appendChild(editable);\n    editable.focus();\n    const selection = window.getSelection();\n    if (selection) {\n        const range = document.createRange();\n        range.selectNodeContents(editable);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    }\n}\n","export function getDateTime() {\n    const date = new Date();\n    const year = date.getFullYear();\n    const month = date.getMonth() + 1;\n    const day = date.getDate();\n    const hr = date.getHours();\n    const min = date.getMinutes();\n    const secs = date.getSeconds();\n    return `${year}${month}${day}${hr}${min}${secs}`;\n}\nexport function capitalizeString(str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n}\nexport function isInputLike(target) {\n    return ((target instanceof HTMLElement && target.dataset.type === \"wysiwyg\") ||\n        target instanceof HTMLInputElement ||\n        target instanceof HTMLTextAreaElement ||\n        target instanceof HTMLSelectElement);\n}\n// https://github.com/grassator/canvas-text-editor/blob/master/lib/FontMetrics.js\nexport function measureText(text, font) {\n    const line = document.createElement(\"div\");\n    const body = document.body;\n    line.style.position = \"absolute\";\n    line.style.whiteSpace = \"nowrap\";\n    line.style.font = font;\n    body.appendChild(line);\n    // Now we can measure width and height of the letter\n    line.innerText = text;\n    const width = line.offsetWidth;\n    const height = line.offsetHeight;\n    // Now creating 1px sized item that will be aligned to baseline\n    // to calculate baseline shift\n    const span = document.createElement(\"span\");\n    span.style.display = \"inline-block\";\n    span.style.overflow = \"hidden\";\n    span.style.width = \"1px\";\n    span.style.height = \"1px\";\n    line.appendChild(span);\n    // Baseline is important for positioning text on canvas\n    const baseline = span.offsetTop + span.offsetHeight;\n    document.body.removeChild(line);\n    return { width, height, baseline };\n}\n","import { measureText } from \"../utils\";\nexport const redrawTextBoundingBox = (element) => {\n    const metrics = measureText(element.text, element.font);\n    element.width = metrics.width;\n    element.height = metrics.height;\n    element.baseline = metrics.baseline;\n};\n","import { getElementAbsoluteCoords } from \"../element\";\nconst SCROLLBAR_MIN_SIZE = 15;\nconst SCROLLBAR_MARGIN = 4;\nexport const SCROLLBAR_WIDTH = 6;\nexport const SCROLLBAR_COLOR = \"rgba(0,0,0,0.3)\";\nexport function getScrollBars(elements, canvasWidth, canvasHeight, scrollX, scrollY) {\n    let minX = Infinity;\n    let maxX = 0;\n    let minY = Infinity;\n    let maxY = 0;\n    elements.forEach(element => {\n        const [x1, y1, x2, y2] = getElementAbsoluteCoords(element);\n        minX = Math.min(minX, x1);\n        minY = Math.min(minY, y1);\n        maxX = Math.max(maxX, x2);\n        maxY = Math.max(maxY, y2);\n    });\n    minX += scrollX;\n    maxX += scrollX;\n    minY += scrollY;\n    maxY += scrollY;\n    const leftOverflow = Math.max(-minX, 0);\n    const rightOverflow = Math.max(-(canvasWidth - maxX), 0);\n    const topOverflow = Math.max(-minY, 0);\n    const bottomOverflow = Math.max(-(canvasHeight - maxY), 0);\n    // horizontal scrollbar\n    let horizontalScrollBar = null;\n    if (leftOverflow || rightOverflow) {\n        horizontalScrollBar = {\n            x: Math.min(leftOverflow + SCROLLBAR_MARGIN, canvasWidth - SCROLLBAR_MIN_SIZE - SCROLLBAR_MARGIN),\n            y: canvasHeight - SCROLLBAR_WIDTH - SCROLLBAR_MARGIN,\n            width: Math.max(canvasWidth - rightOverflow - leftOverflow - SCROLLBAR_MARGIN * 2, SCROLLBAR_MIN_SIZE),\n            height: SCROLLBAR_WIDTH\n        };\n    }\n    // vertical scrollbar\n    let verticalScrollBar = null;\n    if (topOverflow || bottomOverflow) {\n        verticalScrollBar = {\n            x: canvasWidth - SCROLLBAR_WIDTH - SCROLLBAR_MARGIN,\n            y: Math.min(topOverflow + SCROLLBAR_MARGIN, canvasHeight - SCROLLBAR_MIN_SIZE - SCROLLBAR_MARGIN),\n            width: SCROLLBAR_WIDTH,\n            height: Math.max(canvasHeight - bottomOverflow - topOverflow - SCROLLBAR_WIDTH * 2, SCROLLBAR_MIN_SIZE)\n        };\n    }\n    return {\n        horizontal: horizontalScrollBar,\n        vertical: verticalScrollBar\n    };\n}\nexport function isOverScrollBars(elements, x, y, canvasWidth, canvasHeight, scrollX, scrollY) {\n    const scrollBars = getScrollBars(elements, canvasWidth, canvasHeight, scrollX, scrollY);\n    const [isOverHorizontalScrollBar, isOverVerticalScrollBar] = [\n        scrollBars.horizontal,\n        scrollBars.vertical\n    ].map(scrollBar => scrollBar &&\n        scrollBar.x <= x &&\n        x <= scrollBar.x + scrollBar.width &&\n        scrollBar.y <= y &&\n        y <= scrollBar.y + scrollBar.height);\n    return {\n        isOverHorizontalScrollBar,\n        isOverVerticalScrollBar\n    };\n}\n","import { getElementAbsoluteCoords } from \"../element\";\nexport function setSelection(elements, selection) {\n    const [selectionX1, selectionY1, selectionX2, selectionY2] = getElementAbsoluteCoords(selection);\n    elements.forEach(element => {\n        const [elementX1, elementY1, elementX2, elementY2] = getElementAbsoluteCoords(element);\n        element.isSelected =\n            element.type !== \"selection\" &&\n                selectionX1 <= elementX1 &&\n                selectionY1 <= elementY1 &&\n                selectionX2 >= elementX2 &&\n                selectionY2 >= elementY2;\n    });\n    return elements;\n}\nexport function clearSelection(elements) {\n    const newElements = [...elements];\n    newElements.forEach(element => {\n        element.isSelected = false;\n    });\n    return newElements;\n}\nexport function deleteSelectedElements(elements) {\n    return elements.filter(el => !el.isSelected);\n}\nexport function getSelectedIndices(elements) {\n    const selectedIndices = [];\n    elements.forEach((element, index) => {\n        if (element.isSelected) {\n            selectedIndices.push(index);\n        }\n    });\n    return selectedIndices;\n}\nexport const someElementIsSelected = (elements) => elements.some(element => element.isSelected);\nexport function getSelectedAttribute(elements, getAttribute) {\n    const attributes = Array.from(new Set(elements\n        .filter(element => element.isSelected)\n        .map(element => getAttribute(element))));\n    return attributes.length === 1 ? attributes[0] : null;\n}\n","/**\n * https://stackoverflow.com/a/3368118\n * Draws a rounded rectangle using the current state of the canvas.\n * @param {CanvasRenderingContext2D} context\n * @param {Number} x The top left x coordinate\n * @param {Number} y The top left y coordinate\n * @param {Number} width The width of the rectangle\n * @param {Number} height The height of the rectangle\n * @param {Number} radius The corner radius\n */\nexport function roundRect(context, x, y, width, height, radius) {\n    context.beginPath();\n    context.moveTo(x + radius, y);\n    context.lineTo(x + width - radius, y);\n    context.quadraticCurveTo(x + width, y, x + width, y + radius);\n    context.lineTo(x + width, y + height - radius);\n    context.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\n    context.lineTo(x + radius, y + height);\n    context.quadraticCurveTo(x, y + height, x, y + height - radius);\n    context.lineTo(x, y + radius);\n    context.quadraticCurveTo(x, y, x + radius, y);\n    context.closePath();\n    context.fill();\n    context.stroke();\n}\n","import rough from \"roughjs/bundled/rough.esm\";\nimport { withCustomMathRandom } from \"../random\";\nimport { isTextElement } from \"../element/typeChecks\";\nimport { getDiamondPoints, getArrowPoints } from \"../element/bounds\";\n// Casting second argument (DrawingSurface) to any,\n// because it is requred by TS definitions and not required at runtime\nconst generator = rough.generator(null, null);\nexport function renderElement(element, rc, context, { scrollX, scrollY }) {\n    if (element.type === \"selection\") {\n        const fillStyle = context.fillStyle;\n        context.fillStyle = \"rgba(0, 0, 255, 0.10)\";\n        context.fillRect(element.x + scrollX, element.y + scrollY, element.width, element.height);\n        context.fillStyle = fillStyle;\n    }\n\n    else if (element.type === \"rectangle\") {\n        const shape = withCustomMathRandom(element.seed, () => {\n            return generator.rectangle(0, 0, element.width, element.height, {\n                stroke: element.strokeColor,\n                fill: element.backgroundColor,\n                fillStyle: element.fillStyle,\n                strokeWidth: element.strokeWidth,\n                roughness: element.roughness\n            });\n        });\n        context.globalAlpha = element.opacity / 100;\n        context.translate(element.x + scrollX, element.y + scrollY);\n        rc.draw(shape);\n        context.translate(-element.x - scrollX, -element.y - scrollY);\n        context.globalAlpha = 1;\n    }\n\n    else if (element.type === \"diamond\") {\n        const shape = withCustomMathRandom(element.seed, () => {\n            const [topX, topY, rightX, rightY, bottomX, bottomY, leftX, leftY] = getDiamondPoints(element);\n            return generator.polygon([\n                [topX, topY],\n                [rightX, rightY],\n                [bottomX, bottomY],\n                [leftX, leftY]\n            ], {\n                stroke: element.strokeColor,\n                fill: element.backgroundColor,\n                fillStyle: element.fillStyle,\n                strokeWidth: element.strokeWidth,\n                roughness: element.roughness\n            });\n        });\n        context.globalAlpha = element.opacity / 100;\n        context.translate(element.x + scrollX, element.y + scrollY);\n        rc.draw(shape);\n        context.translate(-element.x - scrollX, -element.y - scrollY);\n        context.globalAlpha = 1;\n    }\n\n    else if (element.type === \"ellipse\") {\n        const shape = withCustomMathRandom(element.seed, () => generator.ellipse(element.width / 2, element.height / 2, element.width, element.height, {\n            stroke: element.strokeColor,\n            fill: element.backgroundColor,\n            fillStyle: element.fillStyle,\n            strokeWidth: element.strokeWidth,\n            roughness: element.roughness\n        }));\n        context.globalAlpha = element.opacity / 100;\n        context.translate(element.x + scrollX, element.y + scrollY);\n        rc.draw(shape);\n        context.translate(-element.x - scrollX, -element.y - scrollY);\n        context.globalAlpha = 1;\n    }\n    \n    else if (element.type === \"arrow\") {\n        const [x1, y1, x2, y2, x3, y3, x4, y4] = getArrowPoints(element);\n        const options = {\n            stroke: element.strokeColor,\n            strokeWidth: element.strokeWidth,\n            roughness: element.roughness\n        };\n        const shapes = withCustomMathRandom(element.seed, () => [\n            //    \\\n            generator.line(x3, y3, x2, y2, options),\n            // -----\n            generator.line(x1, y1, x2, y2, options),\n            //    /\n            generator.line(x4, y4, x2, y2, options)\n        ]);\n        context.globalAlpha = element.opacity / 100;\n        context.translate(element.x + scrollX, element.y + scrollY);\n        shapes.forEach(shape => rc.draw(shape));\n        context.translate(-element.x - scrollX, -element.y - scrollY);\n        context.globalAlpha = 1;\n        return;\n    }\n    else if (isTextElement(element)) {\n        context.globalAlpha = element.opacity / 100;\n        const font = context.font;\n        context.font = element.font;\n        const fillStyle = context.fillStyle;\n        context.fillStyle = element.strokeColor;\n        context.fillText(element.text, element.x + scrollX, element.y +\n            scrollY +\n            (element.baseline || element.actualBoundingBoxAscent || 0));\n        context.fillStyle = fillStyle;\n        context.font = font;\n        context.globalAlpha = 1;\n    }\n    else {\n        throw new Error(\"Unimplemented type \" + element.type);\n    }\n}\n","import { getElementAbsoluteCoords, handlerRectangles } from \"../element\";\nimport { roundRect } from \"./roundRect\";\nimport { getScrollBars, SCROLLBAR_COLOR, SCROLLBAR_WIDTH } from \"../scene/scrollbars\";\nimport { renderElement } from \"./renderElement\";\nexport function renderScene(elements, rc, canvas, sceneState, \n// extra options, currently passed by export helper\n{ offsetX, offsetY, renderScrollbars = true, renderSelection = true } = {}) {\n    if (!canvas)\n        return;\n    const context = canvas.getContext(\"2d\");\n    const fillStyle = context.fillStyle;\n    if (typeof sceneState.viewBackgroundColor === \"string\") {\n        context.fillStyle = sceneState.viewBackgroundColor;\n        context.fillRect(0, 0, canvas.width, canvas.height);\n    }\n    else {\n        context.clearRect(0, 0, canvas.width, canvas.height);\n    }\n    context.fillStyle = fillStyle;\n    sceneState = {\n        ...sceneState,\n        scrollX: typeof offsetX === \"number\" ? offsetX : sceneState.scrollX,\n        scrollY: typeof offsetY === \"number\" ? offsetY : sceneState.scrollY\n    };\n    elements.forEach(element => {\n        renderElement(element, rc, context, sceneState);\n    });\n    if (renderSelection) {\n        const selectedElements = elements.filter(el => el.isSelected);\n        selectedElements.forEach(element => {\n            const margin = 4;\n            const [elementX1, elementY1, elementX2, elementY2] = getElementAbsoluteCoords(element);\n            const lineDash = context.getLineDash();\n            context.setLineDash([8, 4]);\n            context.strokeRect(elementX1 - margin + sceneState.scrollX, elementY1 - margin + sceneState.scrollY, elementX2 - elementX1 + margin * 2, elementY2 - elementY1 + margin * 2);\n            context.setLineDash(lineDash);\n        });\n        if (selectedElements.length === 1 && selectedElements[0].type !== \"text\") {\n            const handlers = handlerRectangles(selectedElements[0], sceneState);\n            Object.values(handlers).forEach(handler => {\n                context.strokeRect(handler[0], handler[1], handler[2], handler[3]);\n            });\n        }\n    }\n    if (renderScrollbars) {\n        const scrollBars = getScrollBars(elements, context.canvas.width / window.devicePixelRatio, context.canvas.height / window.devicePixelRatio, sceneState.scrollX, sceneState.scrollY);\n        const strokeStyle = context.strokeStyle;\n        context.fillStyle = SCROLLBAR_COLOR;\n        context.strokeStyle = \"rgba(255,255,255,0.8)\";\n        [scrollBars.horizontal, scrollBars.vertical].forEach(scrollBar => {\n            if (scrollBar)\n                roundRect(context, scrollBar.x, scrollBar.y, scrollBar.width, scrollBar.height, SCROLLBAR_WIDTH / 2);\n        });\n        context.strokeStyle = strokeStyle;\n        context.fillStyle = fillStyle;\n    }\n}\n","import rough from \"roughjs/bundled/rough.esm\";\nimport { getElementAbsoluteCoords } from \"../element\";\nimport { renderScene } from \"../renderer\";\nimport nextId from \"react-id-generator\";\nconst LOCAL_STORAGE_KEY = \"chalkboard\";\nconst LOCAL_STORAGE_KEY_STATE = \"chalkboard-state\";\nfunction saveFile(name, data) {\n    // create a temporary <a> elem which we'll use to download the image\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"download\", name);\n    link.setAttribute(\"href\", data);\n    link.click();\n    // clean up\n    link.remove();\n}\nexport function saveAsJSON(elements, name) {\n    const serialized = JSON.stringify({\n        version: 1,\n        source: window.location.origin,\n        elements\n    });\n    saveFile(`${name}.json`, \"data:text/plain;charset=utf-8,\" + encodeURIComponent(serialized));\n}\n\nexport function loadFromJSON() {\n    const input = document.createElement(\"input\");\n    const reader = new FileReader();\n    input.type = \"file\";\n    input.accept = \".json\";\n    input.onchange = () => {\n        if (!input.files.length) {\n            alert(\"A file was not selected.\");\n            return;\n        }\n        reader.readAsText(input.files[0], \"utf8\");\n    };\n    input.click();\n    return new Promise(resolve => {\n        reader.onloadend = () => {\n            if (reader.readyState === FileReader.DONE) {\n                let elements = [];\n                try {\n                    const data = JSON.parse(reader.result);\n                    elements = data.elements || [];\n                }\n                catch (e) {\n                    // Do nothing because elements array is already empty\n                }\n                resolve(restore(elements, null));\n            }\n        };\n    });\n}\n\nexport function exportCanvas(type, elements, canvas, { exportBackground, exportPadding = 10, viewBackgroundColor, name }) {\n    if (!elements.length)\n        return window.alert(\"Cannot export empty canvas.\");\n    // calculate smallest area to fit the contents in\n    let subCanvasX1 = Infinity;\n    let subCanvasX2 = 0;\n    let subCanvasY1 = Infinity;\n    let subCanvasY2 = 0;\n    elements.forEach(element => {\n        const [x1, y1, x2, y2] = getElementAbsoluteCoords(element);\n        subCanvasX1 = Math.min(subCanvasX1, x1);\n        subCanvasY1 = Math.min(subCanvasY1, y1);\n        subCanvasX2 = Math.max(subCanvasX2, x2);\n        subCanvasY2 = Math.max(subCanvasY2, y2);\n    });\n    function distance(x, y) {\n        return Math.abs(x > y ? x - y : y - x);\n    }\n    const tempCanvas = document.createElement(\"canvas\");\n    tempCanvas.style.display = \"none\";\n    document.body.appendChild(tempCanvas);\n    tempCanvas.width = distance(subCanvasX1, subCanvasX2) + exportPadding * 2;\n    tempCanvas.height = distance(subCanvasY1, subCanvasY2) + exportPadding * 2;\n    renderScene(elements, rough.canvas(tempCanvas), tempCanvas, {\n        viewBackgroundColor: exportBackground ? viewBackgroundColor : null,\n        scrollX: 0,\n        scrollY: 0\n    }, {\n        offsetX: -subCanvasX1 + exportPadding,\n        offsetY: -subCanvasY1 + exportPadding,\n        renderScrollbars: false,\n        renderSelection: false\n    });\n    if (type === \"png\") {\n        saveFile(`${name}.png`, tempCanvas.toDataURL(\"image/png\"));\n    }\n    else if (type === \"clipboard\") {\n        try {\n            tempCanvas.toBlob(async function (blob) {\n                try {\n                    await navigator.clipboard.write([\n                        new window.ClipboardItem({ \"image/png\": blob })\n                    ]);\n                }\n                catch (err) {\n                    window.alert(\"Couldn't copy to clipboard. Try using Chrome browser.\");\n                }\n            });\n        }\n        catch (err) {\n            window.alert(\"Couldn't copy to clipboard. Try using Chrome browser.\");\n        }\n    }\n    // clean up the DOM\n    if (tempCanvas !== canvas)\n        tempCanvas.remove();\n}\n\nfunction restore(savedElements, savedState) {\n    return {\n        elements: savedElements.map(element => ({\n            ...element,\n            id: element.id || nextId(),\n            fillStyle: element.fillStyle || \"hachure\",\n            strokeWidth: element.strokeWidth || 1,\n            roughness: element.roughness || 1,\n            opacity: element.opacity === null || element.opacity === undefined\n                ? 100\n                : element.opacity\n        })),\n        appState: savedState\n    };\n}\n\nexport function restoreFromLocalStorage() {\n    const savedElements = localStorage.getItem(LOCAL_STORAGE_KEY);\n    const savedState = localStorage.getItem(LOCAL_STORAGE_KEY_STATE);\n    let elements = [];\n    if (savedElements) {\n        try {\n            elements = JSON.parse(savedElements);\n        }\n        catch (e) {\n            // Do nothing because elements array is already empty\n        }\n    }\n    let appState = null;\n    if (savedState) {\n        try {\n            appState = JSON.parse(savedState);\n        }\n        catch (e) {\n            // Do nothing because appState is already null\n        }\n    }\n    return restore(elements, appState);\n}\n\nexport function saveToLocalStorage(elements, state) {\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(elements));\n    localStorage.setItem(LOCAL_STORAGE_KEY_STATE, JSON.stringify(state));\n}\n","import { hitTest } from \"../element/collision\";\nimport { getElementAbsoluteCoords } from \"../element\";\nexport const hasBackground = (elements) => elements.some(element => element.isSelected &&\n    (element.type === \"rectangle\" ||\n        element.type === \"ellipse\" ||\n        element.type === \"diamond\"));\nexport const hasStroke = (elements) => elements.some(element => element.isSelected &&\n    (element.type === \"rectangle\" ||\n        element.type === \"ellipse\" ||\n        element.type === \"diamond\" ||\n        element.type === \"arrow\"));\nexport const hasText = (elements) => elements.some(element => element.isSelected && element.type === \"text\");\nexport function getElementAtPosition(elements, x, y) {\n    let hitElement = null;\n    // We need to to hit testing from front (end of the array) to back (beginning of the array)\n    for (let i = elements.length - 1; i >= 0; --i) {\n        if (hitTest(elements[i], x, y)) {\n            hitElement = elements[i];\n            break;\n        }\n    }\n    return hitElement;\n}\nexport function getElementContainingPosition(elements, x, y) {\n    let hitElement = null;\n    // We need to to hit testing from front (end of the array) to back (beginning of the array)\n    for (let i = elements.length - 1; i >= 0; --i) {\n        const [x1, y1, x2, y2] = getElementAbsoluteCoords(elements[i]);\n        if (x1 < x && x < x2 && y1 < y && y < y2) {\n            hitElement = elements[i];\n            break;\n        }\n    }\n    return hitElement;\n}\n","export const createScene = () => {\n    const elements = [];\n    return { elements };\n};\n","import React from \"react\";\n// We inline font-awesome icons in order to save on js size rather than including the font awesome react library\nexport const SHAPES = [\n    {\n        icon: (\n        // fa-mouse-pointer\n        <svg viewBox=\"0 0 320 512\">\n        <path d=\"M302.189 329.126H196.105l55.831 135.993c3.889 9.428-.555 19.999-9.444 23.999l-49.165 21.427c-9.165 4-19.443-.571-23.332-9.714l-53.053-129.136-86.664 89.138C18.729 472.71 0 463.554 0 447.977V18.299C0 1.899 19.921-6.096 30.277 5.443l284.412 292.542c11.472 11.179 3.007 31.141-12.5 31.141z\"/>\n      </svg>),\n        value: \"selection\"\n    },\n    {\n        icon: (\n        // fa-square\n        <svg viewBox=\"0 0 448 512\">\n        <path d=\"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z\"/>\n      </svg>),\n        value: \"rectangle\"\n    },\n    {\n        icon: (\n        // custom\n        <svg viewBox=\"0 0 223.646 223.646\">\n        <path d=\"M111.823 0L16.622 111.823 111.823 223.646 207.025 111.823z\"/>\n      </svg>),\n        value: \"diamond\"\n    },\n    {\n        icon: (\n        // fa-circle\n        <svg viewBox=\"0 0 512 512\">\n        <path d=\"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z\"/>\n      </svg>),\n        value: \"ellipse\"\n    },\n    {\n        icon: (\n        // fa-long-arrow-alt-right\n        <svg viewBox=\"0 0 448 512\">\n        <path d=\"M313.941 216H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h301.941v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.569 0-33.941l-86.059-86.059c-15.119-15.119-40.971-4.411-40.971 16.971V216z\"/>\n      </svg>),\n        value: \"arrow\"\n    },\n    {\n        icon: (\n        // fa-font\n        <svg viewBox=\"0 0 448 512\">\n        <path d=\"M432 416h-23.41L277.88 53.69A32 32 0 0 0 247.58 32h-47.16a32 32 0 0 0-30.3 21.69L39.41 416H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-19.58l23.3-64h152.56l23.3 64H304a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM176.85 272L224 142.51 271.15 272z\"/>\n      </svg>),\n        value: \"text\"\n    }\n];\nexport const shapesShortcutKeys = SHAPES.map(shape => shape.value[0]);\nexport function findShapeByKey(key) {\n    const defaultElement = \"selection\";\n    return SHAPES.reduce((element, shape) => {\n        if (shape.value[0] !== key)\n            return element;\n        return shape.value;\n    }, defaultElement);\n}\n","class SceneHistory {\n    constructor() {\n        this.recording = true;\n        this.stateHistory = [];\n        this.redoStack = [];\n    }\n    generateCurrentEntry(elements) {\n        return JSON.stringify(elements.map(element => ({ ...element, isSelected: false })));\n    }\n    pushEntry(newEntry) {\n        if (this.stateHistory.length > 0 &&\n            this.stateHistory[this.stateHistory.length - 1] === newEntry) {\n            // If the last entry is the same as this one, ignore it\n            return;\n        }\n        this.stateHistory.push(newEntry);\n    }\n    restoreEntry(entry) {\n        // When restoring, we shouldn't add an history entry otherwise we'll be stuck with it and can't go back\n        this.skipRecording();\n        try {\n            return JSON.parse(entry);\n        }\n        catch {\n            return null;\n        }\n    }\n    clearRedoStack() {\n        this.redoStack.splice(0, this.redoStack.length);\n    }\n    redoOnce(elements) {\n        const currentEntry = this.generateCurrentEntry(elements);\n        const entryToRestore = this.redoStack.pop();\n        if (entryToRestore !== undefined) {\n            this.stateHistory.push(currentEntry);\n            return this.restoreEntry(entryToRestore);\n        }\n        return null;\n    }\n    undoOnce(elements) {\n        const currentEntry = this.generateCurrentEntry(elements);\n        let entryToRestore = this.stateHistory.pop();\n        // If nothing was changed since last, take the previous one\n        if (currentEntry === entryToRestore) {\n            entryToRestore = this.stateHistory.pop();\n        }\n        if (entryToRestore !== undefined) {\n            this.redoStack.push(currentEntry);\n            return this.restoreEntry(entryToRestore);\n        }\n        return null;\n    }\n    isRecording() {\n        return this.recording;\n    }\n    skipRecording() {\n        this.recording = false;\n    }\n    resumeRecording() {\n        this.recording = true;\n    }\n}\nexport const createHistory = () => {\n    const history = new SceneHistory();\n    return { history };\n};\n","import React from \"react\";\nexport function Popover({ children, left, onCloseRequest, top }) {\n    return (<div className=\"popover\" style={{ top: top, left: left }}>\n      <div className=\"cover\" onClick={onCloseRequest} onContextMenu={e => {\n        e.preventDefault();\n        if (onCloseRequest)\n            onCloseRequest();\n    }}/>\n      {children}\n    </div>);\n}\n","import React from \"react\";\nimport { Popover } from \"./Popover\";\nimport { render, unmountComponentAtNode } from \"react-dom\";\nimport \"./ContextMenu.css\";\nfunction ContextMenu({ options, onCloseRequest, top, left }) {\n    return (<Popover onCloseRequest={onCloseRequest} top={top} left={left}>\n      <ul className=\"context-menu\" onContextMenu={e => e.preventDefault()}>\n        {options.map((option, idx) => (<li key={idx} className=\"context-menu__option\" onClick={onCloseRequest}>\n            <ContextMenuOption {...option}/>\n          </li>))}\n      </ul>\n    </Popover>);\n}\nfunction ContextMenuOption({ label, action }) {\n    return (<button className=\"context-menu-option\" onClick={action}>\n      {label}\n    </button>);\n}\nlet contextMenuNode;\nfunction getContextMenuNode() {\n    if (contextMenuNode) {\n        return contextMenuNode;\n    }\n    const div = document.createElement(\"div\");\n    document.body.appendChild(div);\n    return (contextMenuNode = div);\n}\nfunction handleClose() {\n    unmountComponentAtNode(getContextMenuNode());\n}\nexport default {\n    push(params) {\n        const options = Array.of();\n        params.options.forEach(option => {\n            if (option) {\n                options.push(option);\n            }\n        });\n        if (options.length) {\n            render(<ContextMenu top={params.top} left={params.left} options={options} onCloseRequest={handleClose}/>, getContextMenuNode());\n        }\n    }\n};\n","import React from \"react\";\nexport class ActionManager {\n    constructor() {\n        this.actions = {};\n        this.updater = null;\n    }\n    setUpdater(updater) {\n        this.updater = updater;\n    }\n    registerAction(action) {\n        this.actions[action.name] = action;\n    }\n    handleKeyDown(event, elements, appState) {\n        const data = Object.values(this.actions)\n            .sort((a, b) => (b.keyPriority || 0) - (a.keyPriority || 0))\n            .filter(action => action.keyTest && action.keyTest(event, elements, appState));\n        if (data.length === 0)\n            return {};\n        event.preventDefault();\n        return data[0].perform(elements, appState, null);\n    }\n    getContextMenuItems(elements, appState, updater) {\n        console.log(Object.values(this.actions)\n            .filter(action => \"contextItemLabel\" in action)\n            .map(a => ({ name: a.name, label: a.contextItemLabel })));\n        return Object.values(this.actions)\n            .filter(action => \"contextItemLabel\" in action)\n            .sort((a, b) => (a.contextMenuOrder !== undefined ? a.contextMenuOrder : 999) -\n            (b.contextMenuOrder !== undefined ? b.contextMenuOrder : 999))\n            .map(action => ({\n            label: action.contextItemLabel,\n            action: () => {\n                updater(action.perform(elements, appState, null));\n            }\n        }));\n    }\n    renderAction(name, elements, appState, updater) {\n        if (this.actions[name] && \"PanelComponent\" in this.actions[name]) {\n            const action = this.actions[name];\n            const PanelComponent = action.PanelComponent;\n            const updateData = (formState) => {\n                updater(action.perform(elements, appState, formState));\n            };\n            return (<PanelComponent elements={elements} appState={appState} updateData={updateData}/>);\n        }\n        return null;\n    }\n}\n","import React from \"react\";\nimport { deleteSelectedElements } from \"../scene\";\nimport { KEYS } from \"../keys\";\nexport const actionDeleteSelected = {\n    name: \"deleteSelectedElements\",\n    perform: elements => {\n        return {\n            elements: deleteSelectedElements(elements)\n        };\n    },\n    contextItemLabel: \"Delete\",\n    contextMenuOrder: 3,\n    keyTest: event => event.key === KEYS.BACKSPACE || event.key === KEYS.DELETE,\n    PanelComponent: ({ updateData }) => (<button id = \"chalkboard_button\" onClick={() => updateData(null)}>Delete selected</button>)\n};\n","function swap(elements, indexA, indexB) {\n    const element = elements[indexA];\n    elements[indexA] = elements[indexB];\n    elements[indexB] = element;\n}\nexport function moveOneLeft(elements, indicesToMove) {\n    indicesToMove.sort((a, b) => a - b);\n    let isSorted = true;\n    // We go from left to right to avoid overriding the wrong elements\n    indicesToMove.forEach((index, i) => {\n        // We don't want to bubble the first elements that are sorted as they are\n        // already in their correct position\n        isSorted = isSorted && index === i;\n        if (isSorted) {\n            return;\n        }\n        swap(elements, index - 1, index);\n    });\n    return elements;\n}\nexport function moveOneRight(elements, indicesToMove) {\n    const reversedIndicesToMove = indicesToMove.sort((a, b) => b - a);\n    let isSorted = true;\n    // We go from right to left to avoid overriding the wrong elements\n    reversedIndicesToMove.forEach((index, i) => {\n        // We don't want to bubble the first elements that are sorted as they are\n        // already in their correct position\n        isSorted = isSorted && index === elements.length - i - 1;\n        if (isSorted) {\n            return;\n        }\n        swap(elements, index + 1, index);\n    });\n    return elements;\n}\n// Let's go through an example\n//        |        |\n// [a, b, c, d, e, f, g]\n// -->\n// [c, f, a, b, d, e, g]\n//\n// We are going to override all the elements we want to move, so we keep them in an array\n// that we will restore at the end.\n// [c, f]\n//\n// From now on, we'll never read those values from the array anymore\n//        |1       |0\n// [a, b, _, d, e, _, g]\n//\n// The idea is that we want to shift all the elements between the marker 0 and 1\n// by one slot to the right.\n//\n//        |1       |0\n// [a, b, _, d, e, _, g]\n//          -> ->\n//\n// which gives us\n//\n//        |1       |0\n// [a, b, _, _, d, e, g]\n//\n// Now, we need to move all the elements from marker 1 to the beginning by two (not one)\n// slots to the right, which gives us\n//\n//        |1       |0\n// [a, b, _, _, d, e, g]\n//  ---|--^  ^\n//     ------|\n//\n// which gives us\n//\n//        |1       |0\n// [_, _, a, b, d, e, g]\n//\n// At this point, we can fill back the leftmost elements with the array we saved at\n// the beggining\n//\n//        |1       |0\n// [c, f, a, b, d, e, g]\n//\n// And we are done!\nexport function moveAllLeft(elements, indicesToMove) {\n    indicesToMove.sort((a, b) => a - b);\n    // Copy the elements to move\n    const leftMostElements = indicesToMove.map(index => elements[index]);\n    const reversedIndicesToMove = indicesToMove\n        // We go from right to left to avoid overriding elements.\n        .reverse()\n        // We add 0 for the final marker\n        .concat([0]);\n    reversedIndicesToMove.forEach((index, i) => {\n        // We skip the first one as it is not paired with anything else\n        if (i === 0) {\n            return;\n        }\n        // We go from the next marker to the right (i - 1) to the current one (index)\n        for (let pos = reversedIndicesToMove[i - 1] - 1; pos >= index; --pos) {\n            // We move by 1 the first time, 2 the second... So we can use the index i in the array\n            elements[pos + i] = elements[pos];\n        }\n    });\n    // The final step\n    leftMostElements.forEach((element, i) => {\n        elements[i] = element;\n    });\n    return elements;\n}\n// Let's go through an example\n//        |        |\n// [a, b, c, d, e, f, g]\n// -->\n// [a, b, d, e, g, c, f]\n//\n// We are going to override all the elements we want to move, so we keep them in an array\n// that we will restore at the end.\n// [c, f]\n//\n// From now on, we'll never read those values from the array anymore\n//        |0       |1\n// [a, b, _, d, e, _, g]\n//\n// The idea is that we want to shift all the elements between the marker 0 and 1\n// by one slot to the left.\n//\n//        |0       |1\n// [a, b, _, d, e, _, g]\n//          <- <-\n//\n// which gives us\n//\n//        |0       |1\n// [a, b, d, e, _, _, g]\n//\n// Now, we need to move all the elements from marker 1 to the end by two (not one)\n// slots to the left, which gives us\n//\n//        |0       |1\n// [a, b, d, e, _, _, g]\n//              ^------\n//\n// which gives us\n//\n//        |0       |1\n// [a, b, d, e, g, _, _]\n//\n// At this point, we can fill back the rightmost elements with the array we saved at\n// the beggining\n//\n//        |0       |1\n// [a, b, d, e, g, c, f]\n//\n// And we are done!\nexport function moveAllRight(elements, indicesToMove) {\n    const reversedIndicesToMove = indicesToMove.sort((a, b) => b - a);\n    // Copy the elements to move\n    const rightMostElements = reversedIndicesToMove.map(index => elements[index]);\n    indicesToMove = reversedIndicesToMove\n        // We go from left to right to avoid overriding elements.\n        .reverse()\n        // We last element index for the final marker\n        .concat([elements.length]);\n    indicesToMove.forEach((index, i) => {\n        // We skip the first one as it is not paired with anything else\n        if (i === 0) {\n            return;\n        }\n        // We go from the next marker to the left (i - 1) to the current one (index)\n        for (let pos = indicesToMove[i - 1] + 1; pos < index; ++pos) {\n            // We move by 1 the first time, 2 the second... So we can use the index i in the array\n            elements[pos - i] = elements[pos];\n        }\n    });\n    // The final step\n    rightMostElements.forEach((element, i) => {\n        elements[elements.length - i - 1] = element;\n    });\n    return elements;\n}\n","import React from \"react\";\nimport { moveOneLeft, moveOneRight, moveAllLeft, moveAllRight } from \"../zindex\";\nimport { getSelectedIndices } from \"../scene\";\nimport { META_KEY } from \"../keys\";\nexport const actionSendBackward = {\n    name: \"sendBackward\",\n    perform: (elements, appState) => {\n        return {\n            elements: moveOneLeft([...elements], getSelectedIndices(elements)),\n            appState\n        };\n    },\n    contextItemLabel: \"Send Backward\",\n    keyPriority: 40,\n    keyTest: event => event[META_KEY] && event.shiftKey && event.altKey && event.code === \"KeyB\",\n    PanelComponent: ({ updateData }) => (<button id = \"chalkboard_button\" type=\"button\" onClick={e => updateData(null)}>\n      Send backward\n    </button>)\n};\nexport const actionBringForward = {\n    name: \"bringForward\",\n    perform: (elements, appState) => {\n        return {\n            elements: moveOneRight([...elements], getSelectedIndices(elements)),\n            appState\n        };\n    },\n    contextItemLabel: \"Bring Forward\",\n    keyPriority: 40,\n    keyTest: event => event[META_KEY] && event.shiftKey && event.altKey && event.code === \"KeyF\",\n    PanelComponent: ({ updateData }) => (<button id = \"chalkboard_button\" type=\"button\" onClick={e => updateData(null)}>\n      Bring Forward\n    </button>)\n};\nexport const actionSendToBack = {\n    name: \"sendToBack\",\n    perform: (elements, appState) => {\n        return {\n            elements: moveAllLeft([...elements], getSelectedIndices(elements)),\n            appState\n        };\n    },\n    contextItemLabel: \"Send to Back\",\n    keyTest: event => event[META_KEY] && event.shiftKey && event.code === \"KeyB\",\n    PanelComponent: ({ updateData }) => (<button id = \"chalkboard_button\" type=\"button\" onClick={e => updateData(null)}>\n      Send to Back\n    </button>)\n};\nexport const actionBringToFront = {\n    name: \"bringToFront\",\n    perform: (elements, appState) => {\n        return {\n            elements: moveAllRight([...elements], getSelectedIndices(elements)),\n            appState\n        };\n    },\n    contextItemLabel: \"Bring to Front\",\n    keyTest: event => event[META_KEY] && event.shiftKey && event.code === \"KeyF\",\n    PanelComponent: ({ updateData }) => (<button id = \"chalkboard_button\" type=\"button\" onClick={e => updateData(null)}>\n      Bring to Front\n    </button>)\n};\n","import { META_KEY } from \"../keys\";\nexport const actionSelectAll = {\n    name: \"selectAll\",\n    perform: elements => {\n        return {\n            elements: elements.map(elem => ({ ...elem, isSelected: true }))\n        };\n    },\n    contextItemLabel: \"Select All\",\n    keyTest: event => event[META_KEY] && event.code === \"KeyA\"\n};\n","import React from \"react\";\nexport function ButtonSelect({ options, value, onChange }) {\n    return (<div className=\"buttonList\">\n      {options.map(option => (<button id = \"chalkboard_button\" key={option.text} onClick={() => onChange(option.value)} className={value === option.value ? \"active\" : \"\"}>\n          {option.text}\n        </button>))}\n    </div>);\n}\n","import React, { lazy } from \"react\";\nimport { Popover } from \"./Popover\";\nconst TwitterPicker = lazy(() => import(\n/* webpackPrefetch: true */ \"react-color/lib/components/twitter/Twitter\"));\nexport function ColorPicker({ color, onChange }) {\n    const [isActive, setActive] = React.useState(false);\n    return (<div>\n      <button className=\"swatch\" id = \"chalkboard_button\" style={color ? { backgroundColor: color } : undefined} onClick={() => setActive(!isActive)}/>\n      <React.Suspense fallback=\"\">\n        {isActive ? (<Popover onCloseRequest={() => setActive(false)}>\n            <TwitterPicker colors={[\n        \"#000000\",\n        \"#ABB8C3\",\n        \"#FFFFFF\",\n        \"#FF6900\",\n        \"#FCB900\",\n        \"#00D084\",\n        \"#8ED1FC\",\n        \"#0693E3\",\n        \"#EB144C\",\n        \"#F78DA7\",\n        \"#9900EF\"\n    ]} width=\"205px\" color={color || undefined} onChange={changedColor => {\n        onChange(changedColor.hex);\n    }}/>\n          </Popover>) : null}\n      </React.Suspense>\n      <input type=\"text\" className=\"swatch-input\" value={color || \"\"} onPaste={e => onChange(e.clipboardData.getData(\"text\"))} onChange={e => onChange(e.target.value)}/>\n    </div>);\n}\n","import React from \"react\";\nimport { ColorPicker } from \"../ColorPicker\";\nexport const PanelColor = ({ title, onColorChange, colorValue }) => {\n    return (<>\n      <h5>{title}</h5>\n      <ColorPicker color={colorValue} onChange={color => onColorChange(color)}/>\n    </>);\n};\n","import React from \"react\";\nimport { getSelectedAttribute } from \"../scene\";\nimport { ButtonSelect } from \"../components/ButtonSelect\";\nimport { PanelColor } from \"../components/panels/PanelColor\";\nimport { isTextElement, redrawTextBoundingBox } from \"../element\";\nconst changeProperty = (elements, callback) => {\n    return elements.map(element => {\n        if (element.isSelected) {\n            return callback(element);\n        }\n        return element;\n    });\n};\nexport const actionChangeStrokeColor = {\n    name: \"changeStrokeColor\",\n    perform: (elements, appState, value) => {\n        return {\n            elements: changeProperty(elements, el => ({\n                ...el,\n                strokeColor: value\n            })),\n            appState: { ...appState, currentItemStrokeColor: value }\n        };\n    },\n    PanelComponent: ({ elements, appState, updateData }) => (<PanelColor title=\"Stroke Color\" onColorChange={(color) => {\n        updateData(color);\n    }} colorValue={getSelectedAttribute(elements, element => element.strokeColor)}/>)\n};\nexport const actionChangeBackgroundColor = {\n    name: \"changeBackgroundColor\",\n    perform: (elements, appState, value) => {\n        return {\n            elements: changeProperty(elements, el => ({\n                ...el,\n                backgroundColor: value\n            })),\n            appState: { ...appState, currentItemBackgroundColor: value }\n        };\n    },\n    PanelComponent: ({ elements, updateData }) => (<PanelColor title=\"Background Color\" onColorChange={(color) => {\n        updateData(color);\n    }} colorValue={getSelectedAttribute(elements, element => element.backgroundColor)}/>)\n};\nexport const actionChangeFillStyle = {\n    name: \"changeFillStyle\",\n    perform: (elements, appState, value) => {\n        return {\n            elements: changeProperty(elements, el => ({\n                ...el,\n                fillStyle: value\n            }))\n        };\n    },\n    PanelComponent: ({ elements, updateData }) => (<>\n      <h5>Fill</h5>\n      <ButtonSelect options={[\n        { value: \"solid\", text: \"Solid\" },\n        { value: \"hachure\", text: \"Hachure\" },\n        { value: \"cross-hatch\", text: \"Cross-hatch\" }\n    ]} value={getSelectedAttribute(elements, element => element.fillStyle)} onChange={value => {\n        updateData(value);\n    }}/>\n    </>)\n};\nexport const actionChangeStrokeWidth = {\n    name: \"changeStrokeWidth\",\n    perform: (elements, appState, value) => {\n        return {\n            elements: changeProperty(elements, el => ({\n                ...el,\n                strokeWidth: value\n            }))\n        };\n    },\n    PanelComponent: ({ elements, appState, updateData }) => (<>\n      <h5>Stroke Width</h5>\n      <ButtonSelect options={[\n        { value: 1, text: \"Thin\" },\n        { value: 2, text: \"Bold\" },\n        { value: 4, text: \"Extra Bold\" }\n    ]} value={getSelectedAttribute(elements, element => element.strokeWidth)} onChange={value => updateData(value)}/>\n    </>)\n};\nexport const actionChangeSloppiness = {\n    name: \"changeSloppiness\",\n    perform: (elements, appState, value) => {\n        return {\n            elements: changeProperty(elements, el => ({\n                ...el,\n                roughness: value\n            }))\n        };\n    },\n    PanelComponent: ({ elements, appState, updateData }) => (<>\n      <h5>Sloppiness</h5>\n      <ButtonSelect options={[\n        { value: 0, text: \"Draftsman\" },\n        { value: 1, text: \"Artist\" },\n        { value: 3, text: \"Cartoonist\" }\n    ]} value={getSelectedAttribute(elements, element => element.roughness)} onChange={value => updateData(value)}/>\n    </>)\n};\nexport const actionChangeOpacity = {\n    name: \"changeOpacity\",\n    perform: (elements, appState, value) => {\n        return {\n            elements: changeProperty(elements, el => ({\n                ...el,\n                opacity: value\n            }))\n        };\n    },\n    PanelComponent: ({ elements, updateData }) => (<>\n      <h5>Opacity</h5>\n      <input className = \"opacity\" type=\"range\" min=\"0\" max=\"100\" onChange={e => updateData(+e.target.value)} value={getSelectedAttribute(elements, element => element.opacity) ||\n        0 /* Put the opacity at 0 if there are two conflicting ones */}/>\n    </>)\n};\nexport const actionChangeFontSize = {\n    name: \"changeFontSize\",\n    perform: (elements, appState, value) => {\n        return {\n            elements: changeProperty(elements, el => {\n                if (isTextElement(el)) {\n                    const element = {\n                        ...el,\n                        font: `${value}px ${el.font.split(\"px \")[1]}`\n                    };\n                    redrawTextBoundingBox(element);\n                    return element;\n                }\n                return el;\n            })\n        };\n    },\n    PanelComponent: ({ elements, updateData }) => (<>\n      <h5>Font size</h5>\n      <ButtonSelect options={[\n        { value: 16, text: \"Small\" },\n        { value: 20, text: \"Medium\" },\n        { value: 28, text: \"Large\" },\n        { value: 36, text: \"Very Large\" }\n    ]} value={getSelectedAttribute(elements, element => isTextElement(element) && +element.font.split(\"px \")[0])} onChange={value => updateData(value)}/>\n    </>)\n};\nexport const actionChangeFontFamily = {\n    name: \"changeFontFamily\",\n    perform: (elements, appState, value) => {\n        return {\n            elements: changeProperty(elements, el => {\n                if (isTextElement(el)) {\n                    const element = {\n                        ...el,\n                        font: `${el.font.split(\"px \")[0]}px ${value}`\n                    };\n                    redrawTextBoundingBox(element);\n                    return element;\n                }\n                return el;\n            })\n        };\n    },\n    PanelComponent: ({ elements, updateData }) => (<>\n      <h5>Font family</h5>\n      <ButtonSelect options={[\n        { value: \"Virgil\", text: \"Virgil\" },\n        { value: \"Helvetica\", text: \"Helvetica\" },\n        { value: \"Courier\", text: \"Courier\" }\n    ]} value={getSelectedAttribute(elements, element => isTextElement(element) && element.font.split(\"px \")[1])} onChange={value => updateData(value)}/>\n    </>)\n};\n","import React from \"react\";\nimport { ColorPicker } from \"../components/ColorPicker\";\nexport const actionChangeViewBackgroundColor = {\n    name: \"changeViewBackgroundColor\",\n    perform: (elements, appState, value) => {\n        return { appState: { ...appState, viewBackgroundColor: value } };\n    },\n    PanelComponent: ({ appState, updateData }) => (<>\n      <h5>Canvas Background Color</h5>\n      <ColorPicker color={appState.viewBackgroundColor} onChange={color => updateData(color)}/>\n    </>)\n};\nexport const actionClearCanvas = {\n    name: \"clearCanvas\",\n    perform: (elements, appState, value) => {\n        return {\n            elements: [],\n            appState: {\n                ...appState,\n                viewBackgroundColor: \"#ffffff\",\n                scrollX: 0,\n                scrollY: 0\n            }\n        };\n    },\n    PanelComponent: ({ updateData }) => (<button id = \"chalkboard_button\" type=\"button\" onClick={() => {\n        if (window.confirm(\"This will clear the whole canvas. Are you sure?\")) {\n            updateData(null);\n        }\n    }} title=\"Clear the canvas & reset background color\">\n      Clear canvas\n    </button>)\n};\n","import React, { Fragment, Component } from \"react\";\nexport class EditableText extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            value: props.value,\n            edit: false\n        };\n    }\n    UNSAFE_componentWillReceiveProps(props) {\n        this.setState({ value: props.value });\n    }\n    handleEdit(e) {\n        this.setState({ value: e.target.value });\n    }\n    handleBlur() {\n        const { value } = this.state;\n        if (!value) {\n            this.setState({ value: this.props.value, edit: false });\n            return;\n        }\n        this.props.onChange(value);\n        this.setState({ edit: false });\n    }\n    render() {\n        const { value, edit } = this.state;\n        return (<Fragment>\n        {edit ? (<input className=\"project-name-input\" name=\"name\" maxLength={25} value={value} onChange={e => this.handleEdit(e)} onBlur={() => this.handleBlur()} onKeyDown={e => {\n            if (e.key === \"Enter\") {\n                this.handleBlur();\n            }\n        }} autoFocus/>) : (<span onClick={() => this.setState({ edit: true })} className=\"project-name\">\n            {value}\n          </span>)}\n      </Fragment>);\n    }\n}\n","import React from \"react\";\nimport { EditableText } from \"../components/EditableText\";\nimport { saveAsJSON, loadFromJSON } from \"../scene\";\nexport const actionChangeProjectName = {\n    name: \"changeProjectName\",\n    perform: (elements, appState, value) => {\n        return { appState: { ...appState, name: value } };\n    },\n    PanelComponent: ({ appState, updateData }) => (<>\n      <h5>Name</h5>\n      {appState.name && (<EditableText value={appState.name} onChange={(name) => updateData(name)}/>)}\n    </>)\n};\nexport const actionChangeExportBackground = {\n    name: \"changeExportBackground\",\n    perform: (elements, appState, value) => {\n        return { appState: { ...appState, exportBackground: value } };\n    },\n    PanelComponent: ({ appState, updateData }) => (<label>\n      <input type=\"checkbox\" checked={appState.exportBackground} onChange={e => {\n        updateData(e.target.checked);\n    }}/>\n      background\n    </label>)\n};\nexport const actionSaveScene = {\n    name: \"saveScene\",\n    perform: (elements, appState, value) => {\n        saveAsJSON(elements, appState.name);\n        return {};\n    },\n    PanelComponent: ({ updateData }) => (<button id = \"chalkboard_button\" onClick={() => updateData(null)}>Save as...</button>)\n};\nexport const actionLoadScene = {\n    name: \"loadScene\",\n    perform: (elements, appState, loadedElements) => {\n        return { elements: loadedElements };\n    },\n    PanelComponent: ({ updateData }) => (<button id = \"chalkboard_button\" onClick={() => {\n        loadFromJSON().then(({ elements }) => {\n            updateData(elements);\n        });\n    }}>\n      Load file...\n    </button>)\n};\n","import { isTextElement, redrawTextBoundingBox } from \"../element\";\nimport { META_KEY } from \"../keys\";\nlet copiedStyles = \"{}\";\nexport const actionCopyStyles = {\n    name: \"copyStyles\",\n    perform: elements => {\n        const element = elements.find(el => el.isSelected);\n        if (element) {\n            copiedStyles = JSON.stringify(element);\n        }\n        return {};\n    },\n    contextItemLabel: \"Copy Styles\",\n    keyTest: event => event[META_KEY] && event.shiftKey && event.code === \"KeyC\",\n    contextMenuOrder: 0\n};\nexport const actionPasteStyles = {\n    name: \"pasteStyles\",\n    perform: elements => {\n        const pastedElement = JSON.parse(copiedStyles);\n        return {\n            elements: elements.map(element => {\n                var _a, _b, _c, _d, _e, _f, _g;\n                if (element.isSelected) {\n                    const newElement = {\n                        ...element,\n                        backgroundColor: (_a = pastedElement) === null || _a === void 0 ? void 0 : _a.backgroundColor,\n                        strokeWidth: (_b = pastedElement) === null || _b === void 0 ? void 0 : _b.strokeWidth,\n                        strokeColor: (_c = pastedElement) === null || _c === void 0 ? void 0 : _c.strokeColor,\n                        fillStyle: (_d = pastedElement) === null || _d === void 0 ? void 0 : _d.fillStyle,\n                        opacity: (_e = pastedElement) === null || _e === void 0 ? void 0 : _e.opacity,\n                        roughness: (_f = pastedElement) === null || _f === void 0 ? void 0 : _f.roughness\n                    };\n                    if (isTextElement(newElement)) {\n                        newElement.font = (_g = pastedElement) === null || _g === void 0 ? void 0 : _g.font;\n                        redrawTextBoundingBox(newElement);\n                    }\n                    return newElement;\n                }\n                return element;\n            })\n        };\n    },\n    contextItemLabel: \"Paste Styles\",\n    keyTest: event => event[META_KEY] && event.shiftKey && event.code === \"KeyV\",\n    contextMenuOrder: 1\n};\n","import React, { useState } from \"react\";\nexport const Panel = ({ title, children, defaultCollapsed = false, hide = false }) => {\n    const [collapsed, setCollapsed] = useState(defaultCollapsed);\n    if (hide)\n        return null;\n    return (<div className=\"panel\">\n      <h4>{title}</h4>\n      <button className=\"btn-panel-collapse\" id = \"chalkboard_button\" type=\"button\" onClick={e => {\n        e.preventDefault();\n        setCollapsed(collapsed => !collapsed);\n    }}>\n        {<span className={`btn-panel-collapse-icon ${collapsed ? \"btn-panel-collapse-icon-closed\" : \"\"}`}>\n            \n          </span>}\n      </button>\n      {!collapsed && <div className=\"panelColumn\">{children}</div>}\n    </div>);\n};\n","import React from \"react\";\nimport { SHAPES } from \"../../shapes\";\nimport { capitalizeString } from \"../../utils\";\nimport { Panel } from \"../Panel\";\nexport const PanelTools = ({ activeTool, onToolChange }) => {\n    return (<Panel title=\"Shapes\">\n      <div className=\"panelTools\">\n        {SHAPES.map(({ value, icon }) => (<label key={value} className=\"tool\" title={`${capitalizeString(value)} - ${capitalizeString(value)[0]}`}>\n            <input type=\"radio\" className = {value} checked={activeTool === value} onChange={() => {\n        onToolChange(value);\n    }}/>\n            <div className=\"toolIcon\">{icon}</div>\n          </label>))}\n      </div>\n    </Panel>);\n};\n","import React from \"react\";\nexport const PanelSelection = ({ actionManager, elements, appState, syncActionResult }) => {\n    return (<div>\n      <div className=\"buttonList\">\n        {actionManager.renderAction(\"bringForward\", elements, appState, syncActionResult)}\n        {actionManager.renderAction(\"bringToFront\", elements, appState, syncActionResult)}\n        {actionManager.renderAction(\"sendBackward\", elements, appState, syncActionResult)}\n        {actionManager.renderAction(\"sendToBack\", elements, appState, syncActionResult)}\n      </div>\n    </div>);\n};\n","import React from \"react\";\nimport { Panel } from \"../Panel\";\nexport const PanelCanvas = ({ actionManager, elements, appState, syncActionResult }) => {\n    return (<Panel title=\"Canvas\">\n      {actionManager.renderAction(\"changeViewBackgroundColor\", elements, appState, syncActionResult)}\n\n      {actionManager.renderAction(\"clearCanvas\", elements, appState, syncActionResult)}\n    </Panel>);\n};\n","import React from \"react\";\nimport { Panel } from \"../Panel\";\nimport \"./panelExport.css\";\n// fa-clipboard\nconst ClipboardIcon = () => (<svg viewBox=\"0 0 384 512\">\n    <path fill=\"currentColor\" d=\"M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z\"></path>\n  </svg>);\nconst probablySupportsClipboard = \"toBlob\" in HTMLCanvasElement.prototype &&\n    \"clipboard\" in navigator &&\n    \"write\" in navigator.clipboard &&\n    \"ClipboardItem\" in window;\nexport const PanelExport = ({ actionManager, elements, appState, syncActionResult, onExportCanvas }) => {\n    return (<Panel title=\"Export\">\n      <div className=\"panelColumn\">\n        {actionManager.renderAction(\"changeProjectName\", elements, appState, syncActionResult)}\n        <h5>Image</h5>\n        <div className=\"panelExport-imageButtons\">\n          <button className=\"panelExport-exportToPngButton\" id = \"chalkboard_button\" onClick={() => onExportCanvas(\"png\")}>\n            Export to PNG\n          </button>\n          {probablySupportsClipboard && (<button className=\"panelExport-exportToClipboardButton\" id = \"chalkboard_button\" onClick={() => onExportCanvas(\"clipboard\")} title=\"Copy to clipboard (experimental)\">\n              <ClipboardIcon />\n            </button>)}\n        </div>\n        {actionManager.renderAction(\"changeExportBackground\", elements, appState, syncActionResult)}\n\n        <h5>Scene</h5>\n        {actionManager.renderAction(\"saveScene\", elements, appState, syncActionResult)}\n        {actionManager.renderAction(\"loadScene\", elements, appState, syncActionResult)}\n      </div>\n    </Panel>);\n};\n","import React from \"react\";\nimport { PanelTools } from \"./panels/PanelTools\";\nimport { Panel } from \"./Panel\";\nimport { PanelSelection } from \"./panels/PanelSelection\";\nimport { hasBackground, someElementIsSelected, hasStroke, hasText, exportCanvas } from \"../scene\";\nimport { PanelCanvas } from \"./panels/PanelCanvas\";\nimport { PanelExport } from \"./panels/PanelExport\";\nexport const SidePanel = ({ actionManager, syncActionResult, elements, onToolChange, appState, canvas }) => {\n    return (<div className=\"sidePanel\">\n      <PanelTools activeTool={appState.elementType} onToolChange={value => {\n        onToolChange(value);\n    }}/>\n      <Panel title=\"Selection\" hide={!someElementIsSelected(elements)}>\n        <PanelSelection actionManager={actionManager} syncActionResult={syncActionResult} elements={elements} appState={appState}/>\n\n        {actionManager.renderAction(\"changeStrokeColor\", elements, appState, syncActionResult)}\n\n        {hasBackground(elements) && (<>\n            {actionManager.renderAction(\"changeBackgroundColor\", elements, appState, syncActionResult)}\n\n            {actionManager.renderAction(\"changeFillStyle\", elements, appState, syncActionResult)}\n          </>)}\n\n        {hasStroke(elements) && (<>\n            {actionManager.renderAction(\"changeStrokeWidth\", elements, appState, syncActionResult)}\n\n            {actionManager.renderAction(\"changeSloppiness\", elements, appState, syncActionResult)}\n          </>)}\n\n        {hasText(elements) && (<>\n            {actionManager.renderAction(\"changeFontSize\", elements, appState, syncActionResult)}\n\n            {actionManager.renderAction(\"changeFontFamily\", elements, appState, syncActionResult)}\n          </>)}\n\n        {actionManager.renderAction(\"changeOpacity\", elements, appState, syncActionResult)}\n\n        {actionManager.renderAction(\"deleteSelectedElements\", elements, appState, syncActionResult)}\n      </Panel>\n      <PanelCanvas actionManager={actionManager} syncActionResult={syncActionResult} elements={elements} appState={appState}/>\n      <PanelExport actionManager={actionManager} syncActionResult={syncActionResult} elements={elements} appState={appState} onExportCanvas={(type) => exportCanvas(type, elements, canvas, appState)}/>\n    </div>);\n};\n","import React from \"react\";\nimport rough from \"roughjs/bundled/rough.esm\";\nimport {\n  newElement,\n  duplicateElement,\n  resizeTest,\n  isTextElement,\n  textWysiwyg,\n  getElementAbsoluteCoords,\n} from \"./element\";\nimport {\n  clearSelection,\n  deleteSelectedElements,\n  setSelection,\n  isOverScrollBars,\n  restoreFromLocalStorage,\n  saveToLocalStorage,\n  getElementAtPosition,\n  createScene,\n  getElementContainingPosition,\n} from \"./scene\";\nimport { renderScene } from \"./renderer\";\nimport { getDateTime, isInputLike, measureText } from \"./utils\";\nimport { KEYS, META_KEY, isArrowKey } from \"./keys\";\nimport { findShapeByKey, shapesShortcutKeys } from \"./shapes\";\nimport { createHistory } from \"./history\";\nimport ContextMenu from \"./components/ContextMenu\";\nimport \"./styles.css\";\nimport { getElementWithResizeHandler } from \"./element/resizeTest\";\nimport {\n  ActionManager,\n  actionDeleteSelected,\n  actionSendBackward,\n  actionBringForward,\n  actionSendToBack,\n  actionBringToFront,\n  actionSelectAll,\n  actionChangeStrokeColor,\n  actionChangeBackgroundColor,\n  actionChangeOpacity,\n  actionChangeStrokeWidth,\n  actionChangeFillStyle,\n  actionChangeSloppiness,\n  actionChangeFontSize,\n  actionChangeFontFamily,\n  actionChangeViewBackgroundColor,\n  actionClearCanvas,\n  actionChangeProjectName,\n  actionChangeExportBackground,\n  actionLoadScene,\n  actionSaveScene,\n  actionCopyStyles,\n  actionPasteStyles,\n} from \"./actions\";\nimport { SidePanel } from \"./components/SidePanel\";\nlet { elements } = createScene();\nconst { history } = createHistory();\nconst DEFAULT_PROJECT_NAME = `chalkboard-${getDateTime()}`;\nconst CANVAS_WINDOW_OFFSET_LEFT = 250;\nconst CANVAS_WINDOW_OFFSET_TOP = 0;\nfunction resetCursor() {\n  document.documentElement.style.cursor = \"\";\n}\nfunction addTextElement(element, text, font) {\n  resetCursor();\n  if (text === null || text === \"\") {\n    return false;\n  }\n  const metrics = measureText(text, font);\n  element.text = text;\n  element.font = font;\n  // Center the text\n  element.x -= metrics.width / 2;\n  element.y -= metrics.height / 2;\n  element.width = metrics.width;\n  element.height = metrics.height;\n  element.baseline = metrics.baseline;\n  return true;\n}\nconst ELEMENT_SHIFT_TRANSLATE_AMOUNT = 5;\nconst ELEMENT_TRANSLATE_AMOUNT = 1;\nconst TEXT_TO_CENTER_SNAP_THRESHOLD = 30;\nlet lastCanvasWidth = -1;\nlet lastCanvasHeight = -1;\nlet lastMouseUp = null;\nexport function viewportCoordsToSceneCoords(\n  { clientX, clientY },\n  { scrollX, scrollY }\n) {\n  const x = clientX - CANVAS_WINDOW_OFFSET_LEFT - scrollX;\n  const y = clientY - CANVAS_WINDOW_OFFSET_TOP - scrollY;\n  return { x, y };\n}\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.canvas = null;\n    this.rc = null;\n    this.actionManager = new ActionManager();\n    this.syncActionResult = (res) => {\n      if (res.elements !== undefined) {\n        elements = res.elements;\n        this.forceUpdate();\n      }\n      if (res.appState !== undefined) {\n        this.setState({ ...res.appState });\n      }\n    };\n    this.state = {\n      draggingElement: null,\n      resizingElement: null,\n      elementType: \"selection\",\n      exportBackground: true,\n      currentItemStrokeColor: \"#000000\",\n      currentItemBackgroundColor: \"#ffffff\",\n      currentItemFont: \"20px Virgil\",\n      viewBackgroundColor: \"#ffffff\",\n      scrollX: 0,\n      scrollY: 0,\n      cursorX: 0,\n      cursorY: 0,\n      name: DEFAULT_PROJECT_NAME,\n    };\n    this.onResize = () => {\n      this.forceUpdate();\n    };\n    this.getCurrentCursorPosition = (e) => {\n      this.setState({ cursorX: e.x, cursorY: e.y });\n    };\n    this.onKeyDown = (event) => {\n      if (event.key === KEYS.ESCAPE) {\n        elements = clearSelection(elements);\n        this.forceUpdate();\n        this.setState({ elementType: \"selection\" });\n        if (window.document.activeElement instanceof HTMLElement) {\n          window.document.activeElement.blur();\n        }\n        event.preventDefault();\n        return;\n      }\n      if (isInputLike(event.target)){\n       \n        return;\n      } \n      const data = this.actionManager.handleKeyDown(\n        event,\n        elements,\n        this.state\n      );\n      this.syncActionResult(data);\n      if (data.elements !== undefined && data.appState !== undefined) {\n        return;\n      }\n      if (isArrowKey(event.key)) {\n        const step = event.shiftKey\n          ? ELEMENT_SHIFT_TRANSLATE_AMOUNT\n          : ELEMENT_TRANSLATE_AMOUNT;\n        elements = elements.map((el) => {\n          if (el.isSelected) {\n            const element = { ...el };\n            if (event.key === KEYS.ARROW_LEFT) element.x -= step;\n            else if (event.key === KEYS.ARROW_RIGHT) element.x += step;\n            else if (event.key === KEYS.ARROW_UP) element.y -= step;\n            else if (event.key === KEYS.ARROW_DOWN) element.y += step;\n            return element;\n          }\n          return el;\n        });\n        this.forceUpdate();\n        event.preventDefault();\n      } else if (shapesShortcutKeys.includes(event.key.toLowerCase())) {\n        this.setState({ elementType: findShapeByKey(event.key) });\n      } else if (event[META_KEY] && event.code === \"KeyZ\") {\n        if (event.shiftKey) {\n          // Redo action\n          const data = history.redoOnce(elements);\n          if (data !== null) {\n            elements = data;\n          }\n        } else {\n          // undo action\n          const data = history.undoOnce(elements);\n          if (data !== null) {\n            elements = data;\n          }\n        }\n        this.forceUpdate();\n        event.preventDefault();\n      }\n    };\n    this.copyToClipboard = () => {\n      if (navigator.clipboard) {\n        const text = JSON.stringify(\n          elements.filter((element) => element.isSelected)\n        );\n        navigator.clipboard.writeText(text);\n      }\n    };\n    this.pasteFromClipboard = () => {\n      if (navigator.clipboard) {\n        navigator.clipboard\n          .readText()\n          .then((text) => this.addElementsFromPaste(text));\n      }\n    };\n    this.handleWheel = (e) => {\n      e.preventDefault();\n      const { deltaX, deltaY } = e;\n      this.setState((state) => ({\n        scrollX: state.scrollX - deltaX,\n        scrollY: state.scrollY - deltaY,\n      }));\n    };\n    this.addElementsFromPaste = (paste) => {\n      let parsedElements;\n      try {\n        parsedElements = JSON.parse(paste);\n      } catch (e) {}\n      if (\n        Array.isArray(parsedElements) &&\n        parsedElements.length > 0 &&\n        parsedElements[0].type // need to implement a better check here...\n      ) {\n        elements = clearSelection(elements);\n        let subCanvasX1 = Infinity;\n        let subCanvasX2 = 0;\n        let subCanvasY1 = Infinity;\n        let subCanvasY2 = 0;\n        const minX = Math.min(...parsedElements.map((element) => element.x));\n        const minY = Math.min(...parsedElements.map((element) => element.y));\n        const distance = (x, y) => {\n          return Math.abs(x > y ? x - y : y - x);\n        };\n        parsedElements.forEach((parsedElement) => {\n          const [x1, y1, x2, y2] = getElementAbsoluteCoords(parsedElement);\n          subCanvasX1 = Math.min(subCanvasX1, x1);\n          subCanvasY1 = Math.min(subCanvasY1, y1);\n          subCanvasX2 = Math.max(subCanvasX2, x2);\n          subCanvasY2 = Math.max(subCanvasY2, y2);\n        });\n        const elementsCenterX = distance(subCanvasX1, subCanvasX2) / 2;\n        const elementsCenterY = distance(subCanvasY1, subCanvasY2) / 2;\n        const dx =\n          this.state.cursorX -\n          this.state.scrollX -\n          CANVAS_WINDOW_OFFSET_LEFT -\n          elementsCenterX;\n        const dy =\n          this.state.cursorY -\n          this.state.scrollY -\n          CANVAS_WINDOW_OFFSET_TOP -\n          elementsCenterY;\n        elements = [\n          ...elements,\n          ...parsedElements.map((parsedElement) => {\n            const duplicate = duplicateElement(parsedElement);\n            duplicate.x += dx - minX;\n            duplicate.y += dy - minY;\n            return duplicate;\n          }),\n        ];\n        this.forceUpdate();\n      }\n    };\n    this.actionManager.registerAction(actionDeleteSelected);\n    this.actionManager.registerAction(actionSendToBack);\n    this.actionManager.registerAction(actionBringToFront);\n    this.actionManager.registerAction(actionSendBackward);\n    this.actionManager.registerAction(actionBringForward);\n    this.actionManager.registerAction(actionSelectAll);\n    this.actionManager.registerAction(actionChangeStrokeColor);\n    this.actionManager.registerAction(actionChangeBackgroundColor);\n    this.actionManager.registerAction(actionChangeFillStyle);\n    this.actionManager.registerAction(actionChangeStrokeWidth);\n    this.actionManager.registerAction(actionChangeOpacity);\n    this.actionManager.registerAction(actionChangeSloppiness);\n    this.actionManager.registerAction(actionChangeFontSize);\n    this.actionManager.registerAction(actionChangeFontFamily);\n    this.actionManager.registerAction(actionChangeViewBackgroundColor);\n    this.actionManager.registerAction(actionClearCanvas);\n    this.actionManager.registerAction(actionChangeProjectName);\n    this.actionManager.registerAction(actionChangeExportBackground);\n    this.actionManager.registerAction(actionSaveScene);\n    this.actionManager.registerAction(actionLoadScene);\n    this.actionManager.registerAction(actionCopyStyles);\n    this.actionManager.registerAction(actionPasteStyles);\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"keydown\", this.onKeyDown, false);\n    document.addEventListener(\"mousemove\", this.getCurrentCursorPosition);\n    window.addEventListener(\"resize\", this.onResize, false);\n    const { elements: newElements, appState } = restoreFromLocalStorage();\n    if (newElements) {\n      elements = newElements;\n    }\n    if (appState) {\n      this.setState(appState);\n    } else {\n      this.forceUpdate();\n    }\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"keydown\", this.onKeyDown, false);\n    document.removeEventListener(\n      \"mousemove\",\n      this.getCurrentCursorPosition,\n      false\n    );\n    window.removeEventListener(\"resize\", this.onResize, false);\n  }\n\n  render() {\n    const canvasWidth = window.innerWidth - CANVAS_WINDOW_OFFSET_LEFT;\n    const canvasHeight = window.innerHeight - CANVAS_WINDOW_OFFSET_TOP;\n    return (\n      <div\n        className=\"chalkboard_container\"\n        onCut={(e) => {\n          e.clipboardData.setData(\n            \"text/plain\",\n            JSON.stringify(elements.filter((element) => element.isSelected))\n          );\n          elements = deleteSelectedElements(elements);\n          this.forceUpdate();\n          e.preventDefault();\n        }}\n        onCopy={(e) => {\n          e.clipboardData.setData(\n            \"text/plain\",\n            JSON.stringify(elements.filter((element) => element.isSelected))\n          );\n          e.preventDefault();\n        }}\n        onPaste={(e) => {\n          const paste = e.clipboardData.getData(\"text\");\n          this.addElementsFromPaste(paste);\n          e.preventDefault();\n        }}\n      >\n        <SidePanel\n          actionManager={this.actionManager}\n          syncActionResult={this.syncActionResult}\n          appState={{ ...this.state }}\n          elements={elements}\n          onToolChange={(value) => {\n            this.setState({ elementType: value });\n            elements = clearSelection(elements);\n            document.documentElement.style.cursor =\n              value === \"text\" ? \"text\" : \"crosshair\";\n            this.forceUpdate();\n          }}\n          canvas={this.canvas}\n        />\n        <canvas\n          id=\"canvas\"\n          style={{\n            width: canvasWidth,\n            height: canvasHeight,\n          }}\n          width={canvasWidth * window.devicePixelRatio}\n          height={canvasHeight * window.devicePixelRatio}\n          ref={(canvas) => {\n            if (this.canvas === null) {\n              this.canvas = canvas;\n              this.rc = rough.canvas(this.canvas);\n            }\n            if (this.removeWheelEventListener) {\n              this.removeWheelEventListener();\n              this.removeWheelEventListener = undefined;\n            }\n            if (canvas) {\n              canvas.addEventListener(\"wheel\", this.handleWheel, {\n                passive: false,\n              });\n              this.removeWheelEventListener = () =>\n                canvas.removeEventListener(\"wheel\", this.handleWheel);\n              // Whenever React sets the width/height of the canvas element,\n              // the context loses the scale transform. We need to re-apply it\n              if (\n                canvasWidth !== lastCanvasWidth ||\n                canvasHeight !== lastCanvasHeight\n              ) {\n                lastCanvasWidth = canvasWidth;\n                lastCanvasHeight = canvasHeight;\n                canvas\n                  .getContext(\"2d\")\n                  .scale(window.devicePixelRatio, window.devicePixelRatio);\n              }\n            }\n          }}\n          \n          onContextMenu={(e) => {\n            e.preventDefault();\n            const { x, y } = viewportCoordsToSceneCoords(e, this.state);\n            const element = getElementAtPosition(elements, x, y);\n            if (!element) {\n              ContextMenu.push({\n                options: [\n                  navigator.clipboard && {\n                    label: \"Paste\",\n                    action: () => this.pasteFromClipboard(),\n                  },\n                ],\n                top: e.clientY,\n                left: e.clientX,\n              });\n              return;\n            }\n            if (!element.isSelected) {\n              elements = clearSelection(elements);\n              element.isSelected = true;\n              this.forceUpdate();\n            }\n            ContextMenu.push({\n              options: [\n                navigator.clipboard && {\n                  label: \"Copy\",\n                  action: this.copyToClipboard,\n                },\n                navigator.clipboard && {\n                  label: \"Paste\",\n                  action: () => this.pasteFromClipboard(),\n                },\n                ...this.actionManager.getContextMenuItems(\n                  elements,\n                  this.state,\n                  this.syncActionResult\n                ),\n              ],\n              top: e.clientY,\n              left: e.clientX,\n            });\n          }}\n          onMouseDown =\n          {(e) => {\n            if (lastMouseUp !== null) {\n              // Unfortunately, sometimes we don't get a mouseup after a mousedown,\n              // this can happen when a contextual menu or alert is triggered. In order to avoid\n              // being in a weird state, we clean up on the next mousedown\n              lastMouseUp(e);\n            }\n            // only handle left mouse button\n            if (e.button !== 0) return;\n            // fixes mousemove causing selection of UI texts #32\n            e.preventDefault();\n            // Preventing the event above disables default behavior\n            //  of defocusing potentially focused input, which is what we want\n            //  when clicking inside the canvas.\n            if (isInputLike(document.activeElement)) {\n              document.activeElement.blur();\n            }\n            // Handle scrollbars dragging\n            const { isOverHorizontalScrollBar, isOverVerticalScrollBar } =\n              isOverScrollBars(\n                elements,\n                e.clientX - CANVAS_WINDOW_OFFSET_LEFT,\n                e.clientY - CANVAS_WINDOW_OFFSET_TOP,\n                canvasWidth,\n                canvasHeight,\n                this.state.scrollX,\n                this.state.scrollY\n              );\n            const { x, y } = viewportCoordsToSceneCoords(e, this.state);\n            const element = newElement(\n              this.state.elementType,\n              x,\n              y,\n              this.state.currentItemStrokeColor,\n              this.state.currentItemBackgroundColor,\n              \"hachure\",\n              1,\n              1,\n              100\n            );\n            let resizeHandle = false;\n            let isResizingElements = false;\n            let draggingOccured = false;\n            let hitElement = null;\n            let elementIsAddedToSelection = false;\n            if (this.state.elementType === \"selection\") {\n              const resizeElement = getElementWithResizeHandler(\n                elements,\n                { x, y },\n                this.state\n              );\n              this.setState({\n                resizingElement: resizeElement ? resizeElement.element : null,\n              });\n              if (resizeElement) {\n                resizeHandle = resizeElement.resizeHandle;\n                document.documentElement.style.cursor = `${resizeHandle}-resize`;\n                isResizingElements = true;\n              } else {\n                const selected = getElementAtPosition(\n                  elements.filter((el) => el.isSelected),\n                  x,\n                  y\n                );\n                // clear selection if shift is not clicked\n                if (!selected && !e.shiftKey) {\n                  elements = clearSelection(elements);\n                }\n                hitElement = getElementAtPosition(elements, x, y);\n                // If we click on something\n                if (hitElement) {\n                  // deselect if item is selected\n                  // if shift is not clicked, this will always return true\n                  // otherwise, it will trigger selection based on current\n                  // state of the box\n                  if (!hitElement.isSelected) {\n                    hitElement.isSelected = true;\n                    elementIsAddedToSelection = true;\n                  }\n                  // No matter what, we select it\n                  // We duplicate the selected element if alt is pressed on Mouse down\n                  if (e.altKey) {\n                    elements = [\n                      ...elements,\n                      ...elements.reduce((duplicates, element) => {\n                        if (element.isSelected) {\n                          duplicates = duplicates.concat(\n                            duplicateElement(element)\n                          );\n                          element.isSelected = false;\n                        }\n                        return duplicates;\n                      }, []),\n                    ];\n                  }\n                }\n              }\n            } else {\n              elements = clearSelection(elements);\n            }\n            if (isTextElement(element)) {\n              let textX = e.clientX;\n              let textY = e.clientY;\n              if (!e.altKey) {\n                const snappedToCenterPosition =\n                  this.getTextWysiwygSnappedToCenterPosition(x, y);\n                if (snappedToCenterPosition) {\n                  element.x = snappedToCenterPosition.elementCenterX;\n                  element.y = snappedToCenterPosition.elementCenterY;\n                  textX = snappedToCenterPosition.wysiwygX;\n                  textY = snappedToCenterPosition.wysiwygY;\n                }\n              }\n              textWysiwyg({\n                initText: \"\",\n                x: textX,\n                y: textY,\n                strokeColor: this.state.currentItemStrokeColor,\n                font: this.state.currentItemFont,\n                onSubmit: (text) => {\n                  addTextElement(element, text, this.state.currentItemFont);\n                  elements = [...elements, { ...element, isSelected: true }];\n                  this.setState({\n                    draggingElement: null,\n                    elementType: \"selection\",\n                  });\n                },\n              });\n              return;\n            }\n            if (this.state.elementType === \"text\") {\n              elements = [...elements, { ...element, isSelected: true }];\n              this.setState({\n                draggingElement: null,\n                elementType: \"selection\",\n              });\n            } else {\n              elements = [...elements, element];\n              this.setState({ draggingElement: element });\n            }\n            let lastX = x;\n            let lastY = y;\n            if (isOverHorizontalScrollBar || isOverVerticalScrollBar) {\n              lastX = e.clientX - CANVAS_WINDOW_OFFSET_LEFT;\n              lastY = e.clientY - CANVAS_WINDOW_OFFSET_TOP;\n            }\n            const onMouseMove = (e) => {\n              var _a;\n              const target = e.target;\n              if (!(target instanceof HTMLElement)) {\n                return;\n              }\n              if (isOverHorizontalScrollBar) {\n                const x = e.clientX - CANVAS_WINDOW_OFFSET_LEFT;\n                const dx = x - lastX;\n                this.setState((state) => ({ scrollX: state.scrollX - dx }));\n                lastX = x;\n                return;\n              }\n              if (isOverVerticalScrollBar) {\n                const y = e.clientY - CANVAS_WINDOW_OFFSET_TOP;\n                const dy = y - lastY;\n                this.setState((state) => ({ scrollY: state.scrollY - dy }));\n                lastY = y;\n                return;\n              }\n              if (isResizingElements && this.state.resizingElement) {\n                const el = this.state.resizingElement;\n                const selectedElements = elements.filter((el) => el.isSelected);\n                if (selectedElements.length === 1) {\n                  const { x, y } = viewportCoordsToSceneCoords(e, this.state);\n                  selectedElements.forEach((element) => {\n                    switch (resizeHandle) {\n                      case \"nw\":\n                        element.width += element.x - lastX;\n                        element.x = lastX;\n                        if (e.shiftKey) {\n                          element.y += element.height - element.width;\n                          element.height = element.width;\n                        } else {\n                          element.height += element.y - lastY;\n                          element.y = lastY;\n                        }\n                        break;\n                      case \"ne\":\n                        element.width = lastX - element.x;\n                        if (e.shiftKey) {\n                          element.y += element.height - element.width;\n                          element.height = element.width;\n                        } else {\n                          element.height += element.y - lastY;\n                          element.y = lastY;\n                        }\n                        break;\n                      case \"sw\":\n                        element.width += element.x - lastX;\n                        element.x = lastX;\n                        if (e.shiftKey) {\n                          element.height = element.width;\n                        } else {\n                          element.height = lastY - element.y;\n                        }\n                        break;\n                      case \"se\":\n                        element.width += x - lastX;\n                        if (e.shiftKey) {\n                          element.height = element.width;\n                        } else {\n                          element.height += y - lastY;\n                        }\n                        break;\n                      case \"n\":\n                        element.height += element.y - lastY;\n                        element.y = lastY;\n                        break;\n                      case \"w\":\n                        element.width += element.x - lastX;\n                        element.x = lastX;\n                        break;\n                      case \"s\":\n                        element.height = lastY - element.y;\n                        break;\n                      case \"e\":\n                        element.width = lastX - element.x;\n                        break;\n                    }\n                    el.x = element.x;\n                    el.y = element.y;\n                  });\n                  lastX = x;\n                  lastY = y;\n                  // We don't want to save history when resizing an element\n                  history.skipRecording();\n                  this.forceUpdate();\n                  return;\n                }\n              }\n              if (\n                (_a = hitElement) === null || _a === void 0\n                  ? void 0\n                  : _a.isSelected\n              ) {\n                // Marking that click was used for dragging to check\n                // if elements should be deselected on mouseup\n                draggingOccured = true;\n                const selectedElements = elements.filter((el) => el.isSelected);\n                if (selectedElements.length) {\n                  const { x, y } = viewportCoordsToSceneCoords(e, this.state);\n                  selectedElements.forEach((element) => {\n                    element.x += x - lastX;\n                    element.y += y - lastY;\n                  });\n                  lastX = x;\n                  lastY = y;\n                  // We don't want to save history when dragging an element to initially size it\n                  history.skipRecording();\n                  this.forceUpdate();\n                  return;\n                }\n              }\n              // It is very important to read this.state within each move event,\n              // otherwise we would read a stale one!\n              const draggingElement = this.state.draggingElement;\n              if (!draggingElement) return;\n              let width =\n                e.clientX -\n                CANVAS_WINDOW_OFFSET_LEFT -\n                draggingElement.x -\n                this.state.scrollX;\n              let height =\n                e.clientY -\n                CANVAS_WINDOW_OFFSET_TOP -\n                draggingElement.y -\n                this.state.scrollY;\n              draggingElement.width = width;\n              // Make a perfect square or circle when shift is enabled\n              draggingElement.height = e.shiftKey\n                ? Math.abs(width) * Math.sign(height)\n                : height;\n              if (this.state.elementType === \"selection\") {\n                elements = setSelection(elements, draggingElement);\n              }\n              // We don't want to save history when moving an element\n              history.skipRecording();\n              this.forceUpdate();\n            };\n            \n            const onMouseUp = (e) => {\n              const { draggingElement, elementType } = this.state;\n              lastMouseUp = null;\n              window.removeEventListener(\"mousemove\", onMouseMove);\n              window.removeEventListener(\"mouseup\", onMouseUp);\n              resetCursor();\n              // If click occured on already selected element\n              // it is needed to remove selection from other elements\n              // or if SHIFT or META key pressed remove selection\n              // from hitted element\n              //\n              // If click occured and elements were dragged or some element\n              // was added to selection (on mousedown phase) we need to keep\n              // selection unchanged\n              if (\n                hitElement &&\n                !draggingOccured &&\n                !elementIsAddedToSelection\n              ) {\n                if (e.shiftKey) {\n                  hitElement.isSelected = false;\n                } else {\n                  elements = clearSelection(elements);\n                  hitElement.isSelected = true;\n                }\n              }\n              if (draggingElement === null) {\n                // if no element is clicked, clear the selection and redraw\n                elements = clearSelection(elements);\n                this.forceUpdate();\n                return;\n              }\n              if (elementType === \"selection\") {\n                elements = elements.slice(0, -1);\n              } else {\n                draggingElement.isSelected = true;\n              }\n              this.setState({\n                draggingElement: null,\n                elementType: \"selection\",\n              });\n              history.resumeRecording();\n              this.forceUpdate();\n            };\n\n            lastMouseUp = onMouseUp;\n            window.addEventListener(\"mousemove\", onMouseMove);\n            window.addEventListener(\"mouseup\", onMouseUp);\n            // We don't want to save history on mouseDown, only on mouseUp when it's fully configured\n            history.skipRecording();\n            this.forceUpdate();\n          }}\n\n          onDoubleClick={(e) => {\n            const { x, y } = viewportCoordsToSceneCoords(e, this.state);\n            const elementAtPosition = getElementAtPosition(elements, x, y);\n            const element = newElement(\n              \"text\",\n              x,\n              y,\n              this.state.currentItemStrokeColor,\n              this.state.currentItemBackgroundColor,\n              \"hachure\",\n              1,\n              1,\n              100\n            );\n            let initText = \"\";\n            let textX = e.clientX;\n            let textY = e.clientY;\n            if (elementAtPosition && isTextElement(elementAtPosition)) {\n              elements = elements.filter(\n                (element) => element.id !== elementAtPosition.id\n              );\n              this.forceUpdate();\n              Object.assign(element, elementAtPosition);\n              // x and y will change after calling addTextElement function\n              element.x = elementAtPosition.x + elementAtPosition.width / 2;\n              element.y = elementAtPosition.y + elementAtPosition.height / 2;\n              initText = elementAtPosition.text;\n              textX =\n                this.state.scrollX +\n                elementAtPosition.x +\n                CANVAS_WINDOW_OFFSET_LEFT +\n                elementAtPosition.width / 2;\n              textY =\n                this.state.scrollY +\n                elementAtPosition.y +\n                CANVAS_WINDOW_OFFSET_TOP +\n                elementAtPosition.height / 2;\n            } else if (!e.altKey) {\n              const snappedToCenterPosition =\n                this.getTextWysiwygSnappedToCenterPosition(x, y);\n              if (snappedToCenterPosition) {\n                element.x = snappedToCenterPosition.elementCenterX;\n                element.y = snappedToCenterPosition.elementCenterY;\n                textX = snappedToCenterPosition.wysiwygX;\n                textY = snappedToCenterPosition.wysiwygY;\n              }\n            }\n            textWysiwyg({\n              initText,\n              x: textX,\n              y: textY,\n              strokeColor: element.strokeColor,\n              font: element.font || this.state.currentItemFont,\n              onSubmit: (text) => {\n                addTextElement(\n                  element,\n                  text,\n                  element.font || this.state.currentItemFont\n                );\n                elements = [...elements, { ...element, isSelected: true }];\n                this.setState({\n                  draggingElement: null,\n                  elementType: \"selection\",\n                });\n              },\n            });\n          }}\n\n          onMouseMove={(e) => {\n            const hasDeselectedButton = Boolean(e.buttons);\n            if (hasDeselectedButton || this.state.elementType !== \"selection\") {\n              return;\n            }\n            const { x, y } = viewportCoordsToSceneCoords(e, this.state);\n            const resizeElement = getElementWithResizeHandler(\n              elements,\n              { x, y },\n              this.state\n            );\n            if (resizeElement && resizeElement.resizeHandle) {\n              document.documentElement.style.cursor = `${resizeElement.resizeHandle}-resize`;\n              return;\n            }\n            const hitElement = getElementAtPosition(elements, x, y);\n            if (hitElement) {\n              const resizeHandle = resizeTest(hitElement, x, y, {\n                scrollX: this.state.scrollX,\n                scrollY: this.state.scrollY,\n              });\n              document.documentElement.style.cursor = resizeHandle\n                ? `${resizeHandle}-resize`\n                : `move`;\n            } else {\n              document.documentElement.style.cursor = ``;\n            }\n          }}\n        />\n      </div>\n    );\n  }\n  getTextWysiwygSnappedToCenterPosition(x, y) {\n    const elementClickedInside = getElementContainingPosition(elements, x, y);\n    if (elementClickedInside) {\n      const elementCenterX =\n        elementClickedInside.x + elementClickedInside.width / 2;\n      const elementCenterY =\n        elementClickedInside.y + elementClickedInside.height / 2;\n      const distanceToCenter = Math.hypot(\n        x - elementCenterX,\n        y - elementCenterY\n      );\n      const isSnappedToCenter =\n        distanceToCenter < TEXT_TO_CENTER_SNAP_THRESHOLD;\n      if (isSnappedToCenter) {\n        const wysiwygX =\n          this.state.scrollX +\n          elementClickedInside.x +\n          CANVAS_WINDOW_OFFSET_LEFT +\n          elementClickedInside.width / 2;\n        const wysiwygY =\n          this.state.scrollY +\n          elementClickedInside.y +\n          CANVAS_WINDOW_OFFSET_TOP +\n          elementClickedInside.height / 2;\n        return { wysiwygX, wysiwygY, elementCenterX, elementCenterY };\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    renderScene(elements, this.rc, this.canvas, {\n      scrollX: this.state.scrollX,\n      scrollY: this.state.scrollY,\n      viewBackgroundColor: this.state.viewBackgroundColor,\n    });\n    saveToLocalStorage(elements, this.state);\n    if (history.isRecording()) {\n      history.pushEntry(history.generateCurrentEntry(elements));\n      history.clearRedoStack();\n    }\n  }\n}\n","import React from \"react\";\nimport IDE from \"../IDE\";\nimport DrawingBoard from \"../DrawingBoard/index\";\nimport files from \"../../assets/files\";\nimport MicRecorder from 'mic-recorder-to-mp3';\nimport firebase from 'firebase/app'\nimport 'firebase/firestore'\nimport 'firebase/storage';\nimport './style.css'\n\nvar startTime;\nexport default function Recorder(props) {\n  const name = props.location.state.lectureType\n  const language = props.location.state.languageType\n  const Recording = { events: [] };\n  var lastMouse = {x : 0, y : 0};\n  var lastKey = \"\";\n  let fileName\n  if(name === \"dsa\"){\n    fileName= language\n  }else if(name=== \"ide\"){\n    fileName=\"index.html\"\n  }\n  let childValue;\n  var lastKeyClass = \"\";\n\n  function callbackFunction(childData){\n    childValue = childData\n    //console.log(childValue)\n  }\n  // Record each type of event\n  const handlers = [\n    {\n      eventName: \"mouseup\",\n      handler: function handleMouseMove(e) {\n        \n        Recording.events.push({\n          type: \"mouseup\",\n          time: Date.now() - startTime,\n        });\n      },\n    },\n    {\n      eventName: \"mousedown\",\n      handler: function handleMouseMove(e) {\n        \n        Recording.events.push({\n          type: \"mousedown\",\n          button: e.button,\n          clientX : e.clientX,\n          clientY : e.clientY,\n          shiftKey : e.shiftKey,\n          time: Date.now() - startTime,\n        });\n      },\n    },\n    {\n      eventName: \"mousemove\",\n      handler: function handleMouseMove(e) {\n        lastMouse  = {x : e.pageX, y :e.pageY};\n        Recording.events.push({\n          type: \"mousemove\",\n          clientX : e.clientX,\n          clientY : e.clientY,   \n          shiftKey : e.shiftKey,       \n          target: lastKeyClass,\n          x: e.pageX,\n          fileName : fileName,\n          y: e.pageY,\n          value: lastKey,\n          time: Date.now() - startTime,\n        });\n      },\n    },\n    {\n      eventName: \"dblclick\",\n      handler: function handleMouseMove(e) {\n        console.log(e);\n        Recording.events.push({\n          type: \"dblclick\",\n          button: e.button,\n          clientX : e.clientX,\n          clientY : e.clientY,\n          shiftKey : e.shiftKey,\n          altKey : e.altKey,\n          time: Date.now() - startTime,\n        });\n      },\n    },\n    {\n      eventName: \"click\",\n      handler: function handleClick(e) {\n        // if(name === \"ide\" || name === \"other\"){\n          if(e.target.className === \"cssfile\" || e.target.className === \"buttontext style\" || e.target.className === \"fab fa-css3-alt\") fileName = \"style.css\"\n          if(e.target.className === \"jsfile\" || e.target.className === \"buttontext script\" || e.target.className === \" fa-js-square\") fileName = \"script.js\" \n          if(e.target.className === \"htmlfile\" || e.target.className === \"buttontext html\" || e.target.className === \"fab fa-html5fab\") fileName = \"index.html\"\n          //console.log(e.target.className);\n          Recording.events.push({\n            type: \"click\",\n            target: e.target.className,\n            x: e.pageX,\n            fileName :fileName,\n            y: e.pageY,\n            time: Date.now() - startTime,\n          });\n        //}\n      },\n    },\n    {\n      eventName: \"keyup\",\n      handler: function handleKeyPress(e) {\n        console.log(files[fileName])\n        if(name === \"ide\" || name === \"dsa\"){\n          lastKey = childValue\n          lastKeyClass = e.target.className\n          Recording.events.push({\n            type: \"keyup\",\n            target: e.target.className,\n            x: lastMouse.x,\n            y: lastMouse.y,\n            fileName: fileName,\n            value: (e.target.className === \"userInputArea\") ? e.target.value :files[fileName].value,\n            keyCode: e.keyCode,\n            time: Date.now() - startTime,\n          });\n        }\n      },\n    },\n    {\n      eventName: \"keydown\",\n      handler: function handleKeyPress(e) {\n          let innerText = document.getElementsByClassName(\"canvas_text\")[0].innerText\n          Recording.events.push({\n            type: \"keydown\",\n            key: e.key,\n            shiftKey: e.shiftKey,\n    \n            innerText: innerText,\n            time: Date.now() - startTime,\n          });\n        \n      },\n    },\n    {\n      eventName: \"click\",\n      handler: function handleClick(e) {\n        if(name === \"dsa\"){\n          if(language  === \"c\" || \n          language === \"c99\" || \n          language === \"cpp\" || \n          language === \"cpp14\" || \n          language === \"cpp17\" || \n          language === \"python2\" || \n          language === \"python3\"){\n            fileName = language\n          }\n          Recording.events.push({\n            type: \"click\",\n            target: e.target.className,\n            x: e.pageX,\n            fileName :fileName,\n            y: e.pageY,\n            value:files[fileName].value,\n            time: Date.now() - startTime,\n          });\n        }\n      },\n      },\n    {\n      eventName:\"output\",\n      handler:function handleChange(e){\n        Recording.events.push({\n          type:\"output\",\n          target:\"userOutputArea\",\n          time:Date.now() - startTime,\n          value:e.detail.output\n        })\n      }\n    }\n  ];\n\n  const Mp3Recorder = new MicRecorder({ \n    bitRate: 128,\n    prefix: \"data:audio/wav;base64,\"\n  });\n\n  function listen(eventName, handler) {\n    return document.documentElement.addEventListener(eventName, handler, true);\n  }\n\n  function startRecording() {\n    startTime = Date.now()\n    Recording.events = [];\n    handlers.map((x) => listen(x.eventName, x.handler));\n    Mp3Recorder\n    .start()\n    .then(() => {\n      console.log(\"Started recording\")\n    }).catch((e) => console.error(e));\n  }\n\n  function removeListener(eventName, handler) {\n    return document.documentElement.removeEventListener(\n      eventName,\n      handler,\n      true\n    );\n  }\n\n  function handleClick(e) {\n    e.preventDefault();\n    document.getElementsByClassName(\"record\")[0].style.display=\"none\"\n    document.getElementsByClassName(\"stop-record\")[0].style.display=\"block\"\n    startRecording();\n    console.log(\"The Button was clicked.\");\n  }\n\n  function stopRecording() {\n    // stop recording\n    handlers.map((x) => removeListener(x.eventName, x.handler));\n    localStorage.setItem(\"recording\", JSON.stringify(Recording))\n    document.getElementsByClassName(\"stop-record\")[0].style.display=\"none\"\n    document.getElementsByClassName(\"record\")[0].style.display=\"block\"\n    const recordingString = JSON.stringify(Recording)\n    console.log(Recording)\n    firebase.firestore().collection(\"events\").add({\n      recordingString,\n      createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n      name:props.location.state.lectureName,\n      creator:props.location.state.lectureCreator,\n      type:props.location.state.lectureType\n    }).then((result) => {\n      localStorage.setItem(\"recordingId\", JSON.stringify(result.id))\n      firebase.firestore().collection(\"recordIndex\").add({\n        createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n        name:props.location.state.lectureName,\n        type:props.location.state.lectureType,\n        creator:props.location.state.lectureCreator,\n        language:language,\n        id:result.id\n      }).then((result) => {\n        console.log(\"Recording Tally Saved\")\n      })\n      console.log(\"Recording Saved\")\n      let audioString\n      Mp3Recorder\n      .stop()\n      .getMp3()\n      .then(([buffer, blob]) => {\n        new File(buffer, 'me-at-thevoice.mp3', {\n          type: blob.type,\n          lastModified: Date.now()\n        })\n        var reader = new FileReader();\n        reader.readAsDataURL(blob);\n        reader.onloadend = () => {\n            audioString =(reader.result)\n            var storageRef = firebase.storage().ref();\n              const id = JSON.parse(localStorage.getItem(\"recordingId\"))\n              //console.log(id)\n              localStorage.removeItem('recordingId');\n              var audioRef = storageRef.child(id);\n              audioRef.putString(audioString, 'data_url').then((snapshot) => {\n                alert('Audio saved!');\n              }).catch((e) => {\n                console.log(e)\n              })\n          }\n      }).catch((e) => console.log(e));\n    })\n  }\n\n  function handleStop(e) {\n    e.preventDefault();\n    stopRecording();\n    console.log(\"Recording Stopped.\");\n  }\n  //console.log(Recording)\n  return (\n    <>\n      <div className=\"recorder\">\n      <div className = \"recorder-button\">\n        <i className=\"fas fa-microphone record\" onClick={handleClick}></i>\n        <i className=\"fas fa-microphone-slash stop-record\" onClick={handleStop}></i>\n      </div>\n      {name === \"dra\" ?<DrawingBoard/>:<IDE name={name} language={language} parentCallBack = {callbackFunction}/>}\n      </div>\n    </>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport IDE from \"../IDE\";\nimport files from \"../../assets/files\";\nimport { useDispatch } from \"react-redux\";\nimport { js, css, html, outputModalTrue, outputModalFalse, setSrcDocs } from \"../../actions\";\nimport firebase from 'firebase/app'\nimport 'firebase/firestore';\nimport 'firebase/storage';\nimport \"./style.css\";\nimport DrawingBoardPlayer from \"../DrawingBoard/index\";\nimport img from \"../../assets/Gear-0.2s-200px.png\"\nfunction Preloader(){\n  return(\n    <div className = \"loader\">\n       <div className =\"preloader\">\n        <div className = \"load\">\n\t         <img src= {img} border=\"0\"/>\n        </div>\n       </div>\n    </div>\n  )\n}\n\nexport default function Video(props) {\n  const name = props.location.state.type.slice(0,3)\n  const language = props.location.state.type.slice(3, 10)\n  const [refresh, setRefresh] = useState(\"\");\n  const dispatch = useDispatch();\n  let drawingEvent=''\n  const [drawing, setDrawing] = useState('')\n  \n  useEffect(() => {\n    let offsetPlay = 0;\n    localStorage.setItem(\"lastSessionTimeStamp\", JSON.stringify(offsetPlay));\n    const videoPlayer = document.getElementsByClassName('videoplayer')[0]\n    const playButton = document.getElementsByClassName(\"playButton\")[0]\n    // fetch recording from local storage\n    let recording = { events: [] };\n    const recordingJsonValue = localStorage.getItem(\"recording\");\n    //const audioValue = JSON.parse(localStorage.getItem(\"file\"));\n    const id = (props.location.state.id)\n    firebase.firestore().collection('events').where(firebase.firestore.FieldPath.documentId(), '==', id).get()\n    .then((snap) => {\n        snap.forEach((doc) => {\n             console.log(doc.data())\n             recording = JSON.parse(doc.data().recordingString)\n        })\n      }).catch((err) => {\n        console.log(err)\n      })\n\n    if (recordingJsonValue != null) recording = JSON.parse(recordingJsonValue);\n\n    // console.log(recording);\n\n    var storageRef = firebase.storage().ref();\n    storageRef.child((id)).getDownloadURL().then((url) => {\n      audioPlayer.src = url\n      localStorage.setItem(\"url\", url)\n    }).catch((e) => {\n      console.log(e)\n    })\n\n    //fake cursor for playing\n    const fakeCursor = document.createElement(\"div\");\n    document.getElementById(\"root\").appendChild(fakeCursor);\n    fakeCursor.style.display = 'none'\n    const audioPlayer = document.getElementById(\"audio_player\")\n    var startPlay;\n    // console.log(playButton)\n    audioPlayer.addEventListener(\"onclick\", (e) => {\n      console.log(\"Click on the audioPlayer\")\n      console.log(e)\n    })\n\n    fakeCursor.className = \"customCursor\";\n    \n    var i = 0;\n    var paused = false;\n\n    audioPlayer.addEventListener(\"canplay\", () => {\n      document.getElementsByClassName(\"player-content\")[0].style.display = \"block\";\n      document.getElementsByClassName(\"loader\")[0].style.display = \"none\";\n      console.log(\"loaded\")\n    })\n  \n    audioPlayer.addEventListener(\"play\", () => {\n      playButton.style.display=\"none\"\n      playfunction();\n      console.log(\"audio play\")\n    })\n\n    audioPlayer.addEventListener(\"pause\", () => {\n      console.log(\"clicked pause\");\n      pausefunction();\n    })\n    \n    audioPlayer.addEventListener(\"ended\", () => {\n      pausefunction();\n      console.log(\"ended audio\")\n    })\n\n    audioPlayer.addEventListener(\"seeking\", () => {\n      fakeCursor.style.display = 'none';\n      pausefunction()\n      audioPlayer.pause()\n      //returns the time at which the audio is after seeking it\n      const curTime = audioPlayer.currentTime\n     \n      //TODO: Implement binary search or lower bound\n      for(let x=0;x<recording.events.length;x++){\n        if(recording.events[x].time>curTime*1000){\n          i=x;\n          break;\n        }\n      }\n\n      console.log(i)\n      console.log(recording.events[i].time)\n      console.log(curTime)\n      //localStorage.setItem(\"lastSessionTimeStamp\", JSON.stringify(recording.events[i].time))\n      if( recording.events[i].time>(curTime*1000)){\n        localStorage.setItem(\"lastSessionTimeStamp\", recording.events[i].time)\n      }else{\n        localStorage.setItem(\"lastSessionTimeStamp\", curTime*1000)\n      }\n      //handlePlayerClick()\n    })\n\n    playButton.addEventListener(\"click\", () => {\n      playButton.style.display=\"none\"\n      videoPlayer.style.display=\"flex\"\n      audioPlayer.play();\n      playfunction();\n    })\n\n    function pausefunction() {\n      fakeCursor.style.display = 'none';\n      paused = true;\n      localStorage.setItem(\"lastSessionTimeStamp\", JSON.stringify(offsetPlay));\n    }\n\n\n    function playfunction() {\n       \n      if( document.getElementsByClassName(\"videoscreen\")[0] != null) document.getElementsByClassName(\"videoscreen\")[0].className = \"visiblescreen\";\n       //append fake cursor when user clicks play button\n       fakeCursor.style.display = 'block';\n       startPlay = Date.now()\n       paused = false;\n       var frames;\n       //draw event to play all events in requestAnimationFrames\n       function draw() {\n           //select an event and check if its empty\n           let event = recording.events[i];\n           if (!event) {\n             return;\n           }\n\n           if(localStorage.getItem(\"lastSessionTimeStamp\") !== null){\n            offsetPlay = JSON.parse(localStorage.getItem(\"lastSessionTimeStamp\")) + Date.now() - startPlay;\n           }\n           else{\n            offsetPlay = (Date.now() - startPlay) * 1;\n           }\n\n         if (event.time <= offsetPlay) {\n           //draws event amd matches with listner\n           drawEvent(event, fakeCursor);\n           i++;\n         }\n\n         \n         if (i >= recording.events.length || paused) {\n           clearInterval(frames);\n          //  if(i >= (recording.events.length - 1)){\n          //    paused = true\n          //  }\n         } \n     };\n\n     frames = setInterval(() => {\n       if(!paused) draw();\n     }, 1)\n    }\n\n    \n    function handleButtonEvents(target) {\n      switch (target) {\n        case \"outputtext\":\n             dispatch(setSrcDocs());\n             dispatch(outputModalTrue());\n          break;\n        case \"output\":\n            dispatch(setSrcDocs());\n            dispatch(outputModalTrue());\n         break;\n        case \"buttontext output\":\n            dispatch(setSrcDocs());\n            dispatch(outputModalTrue());\n         break;\n        case \"fas fa-play\":\n          dispatch(setSrcDocs());\n          dispatch(outputModalTrue());\n          break;\n        case \"fas fa-window-close\":\n             dispatch(outputModalFalse());\n          break;\n        case \"style.css\":\n            dispatch(css());             \n         break;\n        case \"buttontext style\":\n          dispatch(css());             \n         break;\n        case \"index.html\":\n            dispatch(html());     \n         break;\n        case \"script.js\":\n            dispatch(js());\n         break;\n        case \"buttontext script\":\n            dispatch(js());\n         break;\n        default: \n          break;\n      }\n    }\n\n    function drawEvent(event, fakeCursor) {\n      if (event.type === \"mousedown\") {\n\n        let eve = new MouseEvent(\"mousedown\", {\n          bubbles: true,\n          cancelable: true,\n          button: event.button,\n          clientX : event.clientX,\n          clientY : event.clientY,\n          shiftKey : event.shiftKey,\n        });\n\n        if(document.getElementById(\"canvas\"))document.getElementById(\"canvas\").dispatchEvent(eve);\n\n      }\n      else if (event.type === \"mousemove\") {\n        \n        // TODO: Add e.buttons too\n        let eve = new MouseEvent(\"mousemove\", {\n          bubbles: true,\n          cancelable: true,\n          button: event.button,\n          clientX : event.clientX,\n          clientY : event.clientY,\n          shiftKey : event.shiftKey,\n        });\n\n        if(document.getElementById(\"canvas\"))document.getElementById(\"canvas\").dispatchEvent(eve);\n        \n       //document.getElementsByClassName(\"cursor\")[0].style.top = JSON.stringify(event.y) + \"px\";\n        fakeCursor.style.left = JSON.stringify(event.x) + \"px\";\n        fakeCursor.style.top = JSON.stringify(event.y) + \"px\";\n        const path = event.target;\n        handleButtonEvents(event.fileName);\n        var tar = document.getElementsByClassName(path)[0];\n        if (tar != null) {\n          tar.focus();\n\n        }\n      }\n      else if (event.type === \"keydown\") {\n        if(document.getElementsByClassName(\"canvas_text\")[0]){\n          document.getElementsByClassName(\"canvas_text\")[0].innerText =  event.innerText;\n\n        } \n      }\n      else if (event.type === \"mouseup\") {\n\n        let eve = new MouseEvent(\"mouseup\", {\n          bubbles: true,\n          cancelable: true\n        });\n        if(document.getElementById(\"canvas\"))document.getElementById(\"canvas\").dispatchEvent(eve);\n      }\n      else if (event.type === \"click\") {\n        if(document.getElementsByClassName(event.target)[0] !== undefined && document.getElementsByClassName(event.target)[0].nodeName === \"INPUT\"){\n            document.getElementsByClassName(event.target)[0].click();\n        }\n        // if(event.target === \"rectangle\" || event.target === \"ellipse\" || event.target === \"arrow\" || event.target === \"selection\") document.getElementsByClassName(event.target)[0].click();\n        flashClass(fakeCursor, \"click\");\n        tar = document.getElementsByClassName(event.target)[0];\n        if(tar !=  null){\n          handleButtonEvents(event.fileName);\n          handleButtonEvents(event.target);\n          flashClass(tar, \"clicked\");\n        }\n      }\n      else if (event.type === \"keyup\") {\n        const path = event.target;\n        tar = document.getElementsByClassName(path)[0];\n        if (tar != null) {\n          tar.focus();\n          if(path===\"userInputArea\"){\n            tar.value = event.value\n            }else{\n              files[event.fileName].value = event.value;\n              handleButtonEvents(event.fileName);\n              setRefresh(event.value);\n            }\n        }\n      }\n      else if(event.type === \"output\") {\n        const path = event.target;\n        tar = document.getElementsByClassName(path)[0];\n        if (tar != null) {\n          tar.focus();\n          if(path===\"userOutputArea\"){\n            tar.value = event.value\n            }\n        }\n      }\n      else{\n        setDrawing(event)\n      }\n    }\n\n    function flashClass(el, className) {\n      el.classList.add(className);\n      setTimeout(function () {\n        el.classList.remove(className);\n      }, 200);\n    }\n  }, []);\n\n  return (\n    <div>\n      <Preloader/>\n      <div className = \"player-content\">\n      <div className = \"videoscreen\">\n      {/* <IDE name={name} refresh = {refresh}/> */}\n      {name===\"dra\" ? <DrawingBoardPlayer event={drawing}/>: <IDE name={name} language={language} refresh={refresh}/>}\n      </div>\n      <div className=\"playButton\">\n      <div className=\"container\"><a className=\"button button-play\"></a></div>\n      </div>\n      <div className = \"videoplayer\"> \n      <audio id=\"audio_player\" controls=\"controls\" controlsList=\"nodownload\"></audio>\n      </div>\n      </div>\n\n    </div>\n  );\n}\n","import React, { useEffect} from 'react'\nimport {useHistory} from \"react-router-dom\";\nimport \"./style.css\"\nfunction RecorderForm() {\n    const history = useHistory();\n    let lectureName;\n    let lectureType;\n    let lectureCreator;\n    let languageType;\n    const navigateToRecorderWeb = () => history.push({\n        pathname:'/recorder',\n        state:{lectureType,lectureName, lectureCreator, languageType}}\n    );\n\n    const languageList = {\n        \"Python 2\": \"python2\", \n        C: \"c\",\n        \"C-99\": \"c99\",\n        \"C++\": \"cpp\",\n        \"C++ 14\": \"cpp14\",\n        \"C++ 17\": \"cpp17\",\n        \"Python 3\": \"python3\",\n      };\n    \n\n    useEffect(() => {\n\n        const select = document.getElementById(\"language\");\n        for (let key in languageList) {\n          var option = document.createElement(\"option\");\n          option.text = key;\n          option.value = languageList[key];\n          option.className = languageList[key];\n          select.add(option);\n        }\n\n        const type = document.getElementById(\"lectureType\")\n        const name = document.getElementById(\"lectureName\")\n        const creator = document.getElementById(\"creator\")\n        const button = document.getElementById(\"submit\")\n\n        button.addEventListener(\"click\", () => {\n            lectureType = type.value\n            lectureName = name.value\n            lectureCreator = creator.value\n            if(lectureType === \"dsa\"){\n                languageType = select.value\n            }else{\n                languageType = ''\n            }\n        })\n        type.addEventListener(\"change\", (e) =>{\n            if(e.target.value === \"dsa\"){\n                select.style.display = \"block\"\n            }else{\n                select.style.display = \"none\"\n            }\n        })\n    },[])\n\n    return (\n        <>\n        <form>\n            <input id=\"lectureName\" placeholder=\"Lecture Title\"/>\n            <input id=\"creator\" placeholder=\"Creator\"/>\n            <select name=\"language\" id=\"language\"></select>\n            <select id=\"lectureType\">\n                <option value=\"ide\">Web Developerment</option>\n                <option value=\"dsa\">DSA</option>\n                <option value=\"dra\">Chalk Board</option>\n            </select>\n            <button type=\"button\"  onClick={navigateToRecorderWeb} id=\"submit\">Submit</button>\n        </form>\n        </>\n    )\n}\n\nexport default RecorderForm","const filenameReducer = (state = \"index.html\", action) => {\n  switch (action.type) {\n    case \"js\":\n      state = \"script.js\";\n      return state;\n    case \"css\":\n      state = \"style.css\";\n      return state;\n    case \"html\":\n      state = \"index.html\";\n      return state;\n    default:\n      return state;\n  }\n};\n\n\nconst languageReducer = (state=\"c\", action) => {\n  switch(action.type){\n    case \"c\":\n      state = \"c\";\n      return state;\n    case \"c99\":\n      state = \"c99\";\n      return state;\n    case \"cpp\":\n      state = \"cpp\";\n      return state;\n    case \"cpp14\":\n      state = \"cpp14\";\n      return state;\n    case \"cpp17\":\n      state = \"cpp17\";\n      return state;\n    case \"python2\":\n      state = \"python2\";\n      return state;\n    case \"python3\":\n      state = \"python3\";\n      return state;\n    default:\n      return state;\n  }\n}\n\nexport default filenameReducer;\n","import files from \"../assets/files\"\n\nconst outputModalReducer = (state = false, action) => {\n\n    switch(action.type){\n        case \"outputtrue\":\n            state = true\n            return state\n        case \"outputfalse\":\n            state = false\n            return state\n        default:\n            return state\n    }\n}\n\nexport const outputSrcReducer = (state = \"\", action) => {\n\n    switch(action.type){\n        case \"setSrcdoc\":\n            state = `\n            <html>\n              <body>${files[\"index.html\"].value}</body>\n              <style>${files[\"style.css\"].value}</style>\n              <script>${files[\"script.js\"].value}</script>\n            </html>\n          `\n            return state\n        default:\n            return state\n    }\n}\n\nexport default outputModalReducer;","const languageReducer = (state=\"c\", action) => {\n    switch(action.type){\n      case \"c\":\n        state = \"c\";\n        return state;\n      case \"c99\":\n        state = \"c99\";\n        return state;\n      case \"cpp\":\n        state = \"cpp\";\n        return state;\n      case \"cpp14\":\n        state = \"cpp14\";\n        return state;\n      case \"cpp17\":\n        state = \"cpp17\";\n        return state;\n      case \"python2\":\n        state = \"python2\";\n        return state;\n      case \"python3\":\n        state = \"python3\";\n        return state;\n      default:\n        return state;\n    }\n  }\n  \n  export default languageReducer;\n  ","import filenameReducer from \"./filenameSelection\";\nimport outputModalReducer, { outputSrcReducer } from \"./outputModalReducer\";\nimport { combineReducers } from \"redux\";\nimport languageReducer from \"./languageSelection\";\nconst allReducers = combineReducers({\n    fileName: filenameReducer,\n    outputModal: outputModalReducer,\n    srcDocs: outputSrcReducer,\n    language:languageReducer\n})\n\nexport default allReducers;\n","import React, { useEffect, useRef } from \"react\";\nimport DrawingBoard from '../DrawingBoard/index'\nimport * as io from 'socket.io-client'\n\nfunction LiveClassEmitter() {\n\n    const socketRef = useRef()\n    socketRef.current = io.connect(\"http://localhost:5000\")\n    // Record each type of event\n    const handlers = [\n        {\n            eventName: \"mouseup\",\n            handler: function handleMouseMove(e) {\n                const data = {\n                    type: \"mouseup\"\n                }\n                sendData(data)\n            }\n        },\n        {\n            eventName: \"mousedown\",\n            handler: function handleMouseMove(e) {\n                const data = {\n                    type: \"mousedown\",\n                    button: e.button,\n                    clientX : e.clientX,\n                    clientY : e.clientY,\n                    shiftKey : e.shiftKey,\n                }\n                sendData(data)\n            },\n        },\n        {\n            eventName: \"mousemove\",\n            handler: function handleMouseMove(e) {\n                const data = {\n                    type: \"mousemove\",\n                    button: e.button,\n                    clientX : e.clientX,\n                    clientY : e.clientY,\n                    shiftKey : e.shiftKey,  \n                }\n                sendData(data)\n            },\n        },\n        {\n            eventName: \"click\",\n            handler: function handleMouseMove(e) {\n                const data = {\n                    type: \"click\",\n                    target: e.target.className,\n                }\n                sendData(data)\n\n            },\n        }\n    ];\n\n    function sendData(data) {\n        socketRef.current.emit(\"emitData\", {data})\n    }\n\n    function removeListener(eventName, handler) {\n        return document.documentElement.removeEventListener(\n          eventName,\n          handler,\n          true\n        );\n      }\n    \n    function listen(eventName, handler) {\n        return document.documentElement.addEventListener(eventName, handler, true);\n    }\n\n    function startLive() {\n        handlers.map((x) => listen(x.eventName, x.handler));\n    }\n\n    function stopLive() {\n        handlers.map((x) => removeListener(x.eventName, x.handler));\n    }\n\n    return (\n        <>\n            <div style={{position:\"absolute\", zIndex:\"3\"}}>\n                <button style={{backgroundColor:\"red\"}} onClick = {() => startLive()}>Start</button>\n                <button style={{backgroundColor:\"yellow\"}} onClick = {() => stopLive()}>Stop</button>\n            </div>\n            <DrawingBoard/>\n        </>\n    )\n}\n\nexport default LiveClassEmitter","import React, { useEffect,useRef} from \"react\";\nimport DrawingBoard from '../DrawingBoard/index'\nimport * as io from 'socket.io-client'\n\nfunction LiveClassReceiver() {\n    const socketRef = useRef()\n    socketRef.current = io.connect(\"http://localhost:5000\")\n    useEffect(() => {\n        socketRef.current.on(\"receiveData\", ({data}) => {\n            console.log(data)\n            if (data.type === \"mousedown\") {\n                let eve = new MouseEvent(\"mousedown\", {\n                  bubbles: true,\n                  cancelable: true,\n                  button: data.button,\n                  clientX : data.clientX,\n                  clientY : data.clientY,\n                  shiftKey : data.shiftKey,\n                });\n        \n                if(document.getElementById(\"canvas\"))document.getElementById(\"canvas\").dispatchEvent(eve);\n        \n              }\n              else if (data.type === \"mousemove\") {\n                \n                // TODO: Add e.buttons too\n                let eve = new MouseEvent(\"mousemove\", {\n                  bubbles: true,\n                  cancelable: true,\n                  button: data.button,\n                  clientX : data.clientX,\n                  clientY : data.clientY,\n                  shiftKey : data.shiftKey,\n                });\n        \n                if(document.getElementById(\"canvas\"))document.getElementById(\"canvas\").dispatchEvent(eve);\n                const path = data.target;\n                var tar = document.getElementsByClassName(path)[0];\n                if (tar != null) {\n                  tar.focus();\n        \n                }\n              }\n              else if (data.type === \"mouseup\") {\n\n                let eve = new MouseEvent(\"mouseup\", {\n                  bubbles: true,\n                  cancelable: true\n                });\n                if(document.getElementById(\"canvas\"))document.getElementById(\"canvas\").dispatchEvent(eve);\n              }\n              else if (data.type === \"click\") {\n                if(document.getElementsByClassName(data.target)[0] !== undefined && document.getElementsByClassName(data.target)[0].nodeName === \"INPUT\"){\n                    document.getElementsByClassName(data.target)[0].click();\n                }\n              }\n        })\n    }, [])\n\n    return (\n        <>\n            <DrawingBoard/>\n        </>\n    )\n}\n\n\n\nexport default LiveClassReceiver","import React, {useEffect} from 'react'\nimport {useHistory} from \"react-router-dom\";\nimport './styles.css'\nfunction Card(props) {\n    const history = useHistory();\n    useEffect(() => {\n        const mainWindow = document.getElementById(\"lectureCard\")\n        for(let i=0;i<props.lectures.length;i++){\n            var lecture = document.createElement(\"div\")\n            var playButton = document.createElement(\"button\")\n            playButton.textContent = \"Play Lecture\"\n            var nameHeading = document.createElement(\"h3\")\n            var creator = document.createElement(\"h3\")\n            var language = document.createElement(\"h3\")\n            nameHeading.className = \"nameoflecture\"\n            creator.className = \"nameofcreator\" \n            language.className = \"languageofLecture\"\n            playButton.className = props.lectures[i].type + props.lectures[i].language\n            playButton.id = props.lectures[i].id \n            lecture.appendChild(nameHeading)\n            lecture.appendChild(creator)\n            lecture.appendChild(language)\n            lecture.appendChild(playButton)\n            nameHeading.innerHTML = \"Name - \" + props.lectures[i].name\n            creator.innerHTML = \"Creator - \" + props.lectures[i].creator\n            if(props.lectures[i].language !== ''){\n                language.innerHTML = \"Language- \" + props.lectures[i].language\n            }\n            mainWindow.appendChild(lecture)\n        }\n        \n        mainWindow.addEventListener(\"click\", (e) => {\n            const id =  e.target.id\n            console.log(e)\n            const type =  e.target.className\n            console.log(type)\n             console.log(e.target.id)\n            history.push({\n                pathname:'/videoplayer',\n                state:{id,type}\n            });\n        })\n    },[])   \n\n    return (\n        <>\n        <div id=\"lectureCard\">\n        </div>\n        </>    \n    )\n}\n\nexport default Card","import React , {useEffect, useLayoutEffect, useState} from 'react'\nimport firebase from 'firebase/app'\nimport 'firebase/firestore'\nimport Card from '../Card/card'\nfunction Preloader(){\n    return(\n      <div className = \"loader\">\n      <div className =\"preloader\">\n      <div className =\"box\">\n          <div className =\"box__inner\">\n              <div className =\"box__back-flap\"></div>\n              <div className =\"box__right-flap\"></div>\n              <div className =\"box__front-flap\"></div>\n              <div className =\"box__left-flap\"></div>\n              <div className =\"box__front\"></div>\n          </div>\n      </div>\n      <div className =\"box\">\n          <div className =\"box__inner\">\n              <div className =\"box__back-flap\"></div>\n              <div className =\"box__right-flap\"></div>\n              <div className =\"box__front-flap\"></div>\n              <div className =\"box__left-flap\"></div>\n              <div className =\"box__front\"></div>\n          </div>\n      </div>\n      <div className =\"line\">\n          <div className =\"line__inner\"></div>\n      </div>\n      <div className =\"line\">\n          <div className =\"line__inner\"></div>\n      </div>\n      <div className =\"line\">\n          <div className =\"line__inner\"></div>\n      </div>\n      <div className =\"line\">\n          <div className =\"line__inner\"></div>\n      </div>\n      <div className =\"line\">\n          <div className =\"line__inner\"></div>\n      </div>\n      <div className =\"line\">\n          <div className =\"line__inner\"></div>\n      </div>\n      <div className =\"line\">\n          <div className =\"line__inner\"></div>\n      </div>\n  </div>\n  </div>\n    )\n  }\nfunction AllLectures() {\n    const [lectures, setLectures] = useState('')\n    let lecturesArray = []\n    const [isLoading, setLoading] = useState(false)\n    useEffect(() => {\n        firebase.firestore().collection(\"recordIndex\").orderBy(\"createdAt\", 'desc')\n        .limit(10).get().then((result) => {\n            result.forEach((doc) => {\n                lecturesArray.push(doc.data())\n            })\n            setLectures(lecturesArray)\n            setLoading(true)\n        })\n    }, [])\n    return (\n        <>\n            {isLoading ? <Card lectures={lectures}/>: <Preloader/>}\n        </>\n    )\n}\n\nexport default AllLectures","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport { createStore, compose, applyMiddleware} from 'redux';\nimport { Provider } from 'react-redux';\nimport './index.css';\nimport Recorder from './components/Recorder/Recorder';\nimport Video from './components/Player/Player';\nimport RecorderForm from './components/RecorderForm/recorderForm';\nimport DrawingBoard from './components/DrawingBoard/index';\nimport DrawingBoardPlayer from './components/DrawingBoard/index'\nimport allReducer from './reducers';\nimport LiveClassEmitter from './components/LiveClasses/liveClassEmitter'\nimport LiveClassReceiver from './components/LiveClasses/liveClassReceiver';\nimport thunk from 'redux-thunk'\nimport firebase from 'firebase/app';\nimport StartingComponent from './components/StartingComponent/startingCompoent';\nimport AllLectures from './components/Lectures/allLectures';\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAp2cQvNNp8fUKOv6kO_7wR5IsKROCoh14\",\n  authDomain: \"engage-6ef42.firebaseapp.com\",\n  projectId: \"engage-6ef42\",\n  storageBucket: \"engage-6ef42.appspot.com\",\n  messagingSenderId: \"27842359842\",\n  appId: \"1:27842359842:web:e8f5b15f6a86ac66fa507b\",\n  measurementId: \"G-EVEY2DP36T\",\n};\n\nif (firebase.apps.length===0){\n  firebase.initializeApp(firebaseConfig);\n}\n\nconst middleware = [thunk]\n\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(\n  allReducer, \n  composeEnhancer(applyMiddleware(...middleware)),\n);\n\nReactDOM.render(\n  <Provider store={store}>\n  <React.StrictMode>\n    <Router>\n      <Switch>\n        <Route exact path = \"/lectures\" component = {AllLectures} />\n        <Route exact path = \"/drawboard\" component = {DrawingBoard}/>\n        <Route exact path = \"/emitter\" component = {LiveClassEmitter}/>\n        <Route exact path = \"/receiver\" component = {LiveClassReceiver}/>\n        <Route exact path = \"/recordform\" component = {RecorderForm}/>\n        <Route exact path = \"/recorder\" component = {Recorder} ide=\"web\"/>\n        <Route exact path = \"/videoplayer\" component = {Video}/>\n        <Route exact path = \"/\" component = {StartingComponent}/>\n    </Switch>\n    </Router>\n  </React.StrictMode>\n  </Provider>,\n  document.getElementById('root')\n);\n","import React from 'react';\nimport {useHistory} from \"react-router-dom\";\n\nexport default function StartingComponent() {\n\n    const history = useHistory();\n    const navigateToLectureScreen = () => history.push('/lectures')\n    const navigateToDrawBoard = () => history.push('/drawboard')\n    const navigateToDrawBoardStart = () => history.push('/emitter')\n    const navigateToDrawBoardEnd = () => history.push('/receiver')\n    const navigateToRecorderDraw = () => history.push('/recorder/drawboard');\n    const navigateToRecordForm = () => history.push('/recordform');\n    const navigateToPlayerDraw = () => history.push('/videoplayer/drawboard');\n    return (\n        <>\n        <button className = \"recordWebD\" onClick={navigateToRecordForm}>Recorder A Lecture</button>\n        {/* <button className = \"recordOther\" onClick={navigateToRecorderOther}>Recorder with Other</button> */}\n        <button className = \"playWebD\" onClick={navigateToLectureScreen}>Watch lectures </button>\n        {/* <button className = \"playOther\" onClick={navigateToPlayerOther}>Player with Other</button> */}\n        <button onClick={navigateToDrawBoard}>Drawing Board</button>\n        <button className = \"recordWebD\" onClick={navigateToRecorderDraw}>Recorder with Drawing Board</button>\n        {/* <button className = \"recordOther\" onClick={navigateToRecorderOther}>Recorder with Other</button> */}\n        <button className = \"playWebD\" onClick={navigateToDrawBoardStart}>Drawing Board Start</button>\n        <button className = \"playWebD\" onClick={navigateToDrawBoardEnd}>Drawing Board End</button>\n        </>\n    )\n}","module.exports = \"data:image/png;base64,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\""],"sourceRoot":""}