{"version":3,"sources":["assets/files.js","components/TextEditor/TextEditor.js","actions/index.js","components/MultilanguageEditor/multiFile.js","actions/outputAction.js","components/IDE.js","components/DrawingBoard/zindex.js","components/DrawingBoard/drawBoard.js","components/Recorder/Recorder.js","components/Player/Player.js","components/RecorderForm/recorderForm.js","components/DrawingBoard/drawBoardPlayer.js","components/LiveClasses/liveClasses.js","reducers/filenameSelection.js","reducers/outputModalReducer.js","reducers/languageSelection.js","reducers/index.js","components/Card/card.js","components/Lectures/allLectures.js","index.js","components/StartingComponent/startingCompoent.js"],"names":["files","name","language","value","TextEditor","props","srcDoc","useSelector","state","srcDocs","modalActive","outputModal","fileName","dispatch","useDispatch","file","handleCloseModal","type","className","id","disabled","onClick","console","log","style","color","backgroundColor","padding","borderRadius","height","width","theme","path","defaultLanguage","defaultValue","saveViewState","onChange","cursorSmoothCaretAnimation","isOpen","contentLabel","onRequestClose","overlayClassName","ariaHideApp","title","sandbox","frameBorder","MultiFile","useState","outputValue","setOutputValue","inputValue","setInputValue","cursor","words","split","code","i","length","input","a","url","axios","post","stdin","versionIndex","script","runCode","then","e","data","output","event","CustomEvent","detail","document","documentElement","dispatchEvent","options","fontSize","fontWeight","fontFamily","beforeMount","monaco","editor","defineTheme","base","inherit","rules","colors","rows","cols","target","placeholder","App","refresh","swap","elements","indexA","indexB","element","moveOneLeft","indicesToMove","sort","b","isSorted","forEach","index","moveOneRight","reversedIndicesToMove","moveAllLeft","leftMostElements","map","reverse","concat","pos","moveAllRight","rightMostElements","Array","of","skipHistory","stateHistory","generateHistoryCurrentEntry","JSON","stringify","isSelected","restoreHistoryEntry","entry","newElements","parse","splice","newElement","generateDraw","push","randomSeed","Math","floor","random","withCustomMathRandom","seed","cb","imul","LCG","result","distanceBetweenPointAndSegment","x","y","x1","y1","x2","y2","xx","yy","C","D","lenSquare","param","dx","dy","hypot","hitTest","px","abs","py","tx","ty","ex","ey","rx","ry","qx","qy","r","q","min","max","t","getElementAbsoluteX1","getElementAbsoluteX2","getElementAbsoluteY1","getElementAbsoluteY2","getArrowPoints","x3","y3","x4","y4","warn","Error","resizeTest","sceneState","handlers","handlerRectangles","filter","Object","keys","key","handler","scrollX","scrollY","strokeColor","draw","rc","context","getScrollbars","canvasWidth","canvasHeight","scrollBarWidth","horizontalScrollBar","SCROLLBAR_MARGIN","scrollBarHeight","horizontal","vertical","SCROLLBAR_WIDTH","isOverScrollBars","scrollBars","scrollBar","isOverHorizontalScrollBar","isOverVerticalScrollBar","elementX1","elementX2","elementY1","elementY2","marginX","marginY","renderScene","canvas","offsetX","offsetY","renderScrollbars","renderSelection","getContext","fillStyle","viewBackgroundColor","fillRect","clearRect","selectedIndices","getSelectedIndices","lineDash","getLineDash","setLineDash","strokeRect","margin","values","window","devicePixelRatio","loadFromJSON","createElement","reader","FileReader","accept","onchange","readAsText","alert","click","Promise","resolve","onloadend","readyState","DONE","savedElements","savedState","restore","saveFile","link","setAttribute","remove","rotate","angle","cos","sin","generator","rough","isTextElement","isInputLike","HTMLInputElement","HTMLTextAreaElement","HTMLSelectElement","distance","minSize","xs","ys","PI","shape","rectangle","stroke","fill","translate","ellipse","shapes","line","font","fillText","text","actualBoundingBoxAscent","setSelection","selection","selectionX1","selectionX2","selectionY1","selectionY2","clearSelection","resetCursor","deleteSelectedElements","KEYS","SHAPES","icon","viewBox","d","shapesShortcutKeys","capitalize","str","charAt","toUpperCase","slice","findElementByKey","reduce","isArrowKey","keyCode","someElementIsSelected","some","lastCanvasWidth","lastCanvasHeight","lastMouseUp","socketRef","React","createRef","current","io","startTime","arguments","draggingElement","resizingElement","elementType","exportBackground","currentItemStrokeColor","currentItemBackgroundColor","onResize","forceUpdate","onKeyDown","preventDefault","step","shiftKey","metaKey","altKey","includes","toLowerCase","setState","lastEntry","pop","undefined","clearCanvas","confirm","handleWheel","deltaX","deltaY","handlemousedown","innerWidth","innerHeight","getElementById","button","activeElement","blur","clientX","clientY","resizeHandle","isDraggingElements","isResizingElements","resizeElement","find","hitElement","prompt","textMeasure","measureText","actualBoundingBoxDescent","emit","lastX","lastY","onMouseMove","HTMLElement","el","selectedElements","sign","onMouseUp","removeEventListener","addEventListener","this","onCut","clipboardData","setData","onCopy","onPaste","parsedElements","paste","getData","isArray","parsedElement","checked","ChangeTool","exportPadding","subCanvasX1","Infinity","subCanvasX2","subCanvasY1","subCanvasY2","tempCanvas","display","body","appendChild","toDataURL","exportAsPNG","serialized","version","source","location","origin","encodeURIComponent","saveAsJSON","ref","removeWheelEventListener","passive","scale","onMouseDown","newEntry","Component","Preloader","RecorderForm","lectureName","lectureType","lectureCreator","languageType","history","useHistory","languageList","useEffect","select","option","add","creator","pathname","on","filenameReducer","action","outputModalReducer","languageReducer","allReducers","combineReducers","LiveClasses","useRef","eve","MouseEvent","bubbles","cancelable","getElementsByClassName","Card","mainWindow","lectures","lecture","playButton","textContent","nameHeading","innerHTML","AllLectures","setLectures","lecturesArray","isLoading","setLoading","firebase","firestore","collection","orderBy","limit","get","doc","apps","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","middleware","thunk","composeEnhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","allReducer","applyMiddleware","ReactDOM","render","StrictMode","exact","component","DrawingBoard","childValue","Recording","events","lastMouse","lastKey","lastKeyClass","eventName","time","Date","now","pageX","pageY","Mp3Recorder","MicRecorder","bitRate","prefix","startRecording","start","catch","error","stopRecording","localStorage","setItem","recordingString","createdAt","FieldValue","serverTimestamp","audioString","stop","getMp3","buffer","blob","File","lastModified","readAsDataURL","storageRef","storage","getItem","removeItem","child","putString","snapshot","IDE","parentCallBack","childData","ide","setRefresh","drawing","setDrawing","offsetPlay","videoPlayer","recording","recordingJsonValue","where","FieldPath","documentId","snap","err","getDownloadURL","audioPlayer","src","fakeCursor","startPlay","paused","pausefunction","playfunction","frames","left","top","handleButtonEvents","tar","focus","flashClass","drawEvent","clearInterval","setInterval","classList","setTimeout","pause","curTime","currentTime","play","controls","controlsList"],"mappings":"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","file":"static/js/main.04cd8bcf.chunk.js","sourcesContent":["const someJSCodeExample = ``;\n\nconst someCSSCodeExample = ``;\n\nconst someHTMLCodeExample = ``;\n\nconst someCCodeExample = ``;\n\nconst someCpp99CodeExample = ``\n\nconst someCppCodeExample = ``\n\nconst someCpp14CodeExample = ``\n\nconst someCpp17CodeExample = ``\n\nconst somePython2CodeExample = ``\n\nconst somePython3CodeExample = ``\n\nconst files = {\n  \"script.js\": {\n    name: \"script.js\",\n    language: \"javascript\",\n    value: someJSCodeExample\n  },\n  \"style.css\": {\n    name: \"style.css\",\n    language: \"css\",\n    value: someCSSCodeExample\n  },\n  \"index.html\": {\n    name: \"index.html\",\n    language: \"html\",\n    value: someHTMLCodeExample\n  },\n  \"c\": {\n    name: \"main.c\",\n    language: \"cpp\",\n    value: someCCodeExample\n  },\n  \"c99\": {\n    name: \"main.cpp\",\n    language: \"cpp\",\n    value: someCpp99CodeExample\n  },\n  \"cpp\": {\n    name: \"main.cpp\",\n    language: \"cpp\",\n    value: someCppCodeExample\n  },\n  \"cpp14\": {\n    name: \"main.cpp\",\n    language: \"cpp\",\n    value: someCpp14CodeExample\n  },\n  \"cpp17\": {\n    name: \"main.cpp\",\n    language: \"cpp\",\n    value: someCpp17CodeExample\n  },\n  \"python2\": {\n    name: \"python\",\n    language: \"python\",\n    value: somePython2CodeExample\n  },\n  \"python3\": {\n    name: \"python\",\n    language: \"python\",\n    value: somePython3CodeExample\n  }\n};\n\nexport default files;\n","import React from \"react\";\nimport ReactModal from \"react-modal\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Editor from \"@monaco-editor/react\";\nimport { js, css, html, outputModalTrue, outputModalFalse, setSrcDocs } from '../../actions'\nimport files from \"../../assets/files\";\nimport \"./style.css\"\n\nfunction TextEditor(props) {\n  const srcDoc = useSelector(state => state.srcDocs);\n  const modalActive = useSelector(state => state.outputModal);\n\n  const fileName = useSelector(state => state.fileName);\n  const dispatch = useDispatch();\n\n  const file = files[fileName];\n\n  function handleEditorChange(value) {\n    file.value = value;\n  }\n\n  const handleOutput = () => {\n    dispatch(setSrcDocs());\n    dispatch(outputModalTrue());\n    console.log(\"l\")\n  }\n\n  function handleCloseModal() {\n    dispatch(outputModalFalse());\n  }\n\n  return (\n    <div className = \"text-editor\">\n\n    {/* Sidebar   */}\n    <div className = \"editor-sidebar\">\n    <div className = \"sidebar-heading\">\n      <span id = \"explorer-spam\" >Explorer</span>\n      <button className = \"sidebar-add-file\">\n        {/* <i className = \"fas fa-plus\" style = {{color : \"#fffffe\" }}></i>  */}\n      </button>\n    </div>\n    <div className = \"sidebar-navbutton\">\n\n     <button\n        className = \"htmlfile\"\n        disabled={fileName === \"index.html\"}\n        onClick={() => dispatch(html()) }\n      >\n      <i className =\"fab fa-html5\"></i> <span className = \"buttontext html\" >{files[\"index.html\"].name} </span>\n     </button>\n\n     <button\n        className = \"cssfile\"\n        disabled={fileName === \"style.css\"}\n        onClick={() => dispatch(css())}\n      > \n      <i className = \"fab fa-css3-alt\"></i> <span className = \"buttontext style\" >{files[\"style.css\"].name} </span>\n      </button>\n\n      <button\n        className = \"jsfile\"\n        disabled={fileName === \"script.js\"}\n        onClick={() => dispatch(js())}\n      >\n      <i className=\"fab fa-js-square\"></i> <span className = \"buttontext script\" >{files[\"script.js\"].name} </span>\n      </button>\n\n\n    </div>\n    <div className = \"sidebar-footer\">\n    <button onClick={handleOutput} style = {{color : \"white\", backgroundColor: \"green\", padding: \"5px\", borderRadius: \"5px\"}} className=\"output\"><i style = {{color : \"white\"}} className=\"fas fa-play\"></i><span className = \"outputtext\" style = {{color : \"white\", backgroundColor: \"green\"}}> See Output</span></button>\n    </div>\n    </div>\n\n    {/* Editor */}\n    <div className = \"editor\">\n    <Editor\n            height=\"100vh\"\n            width=\"94vw\"\n            theme=\"vs-light\"\n            path={file.name}\n            defaultLanguage={file.language}\n            defaultValue={file.value}\n            saveViewState={true}\n            onChange={handleEditorChange}\n            cursorSmoothCaretAnimation = \"true\"\n            value={file.value}\n          />\n    </div>\n\n\n    <ReactModal\n            className=\"outputModal Modal\"\n            isOpen={modalActive}\n            contentLabel=\"onRequestClose Example\"\n            onRequestClose={handleCloseModal}\n            overlayClassName=\"Overlay\"\n            ariaHideApp={false}\n          >\n           \n            <div className=\"closeButton\"><i className=\"fas fa-window-close\" onClick={handleCloseModal}></i></div>\n            <iframe\n              srcDoc={srcDoc}\n              title=\"output\"\n              className=\"outputiframe\"\n              sandbox=\"allow-scripts\"\n              frameBorder=\"0\"\n            />\n          \n          </ReactModal>\n\n    </div>\n  );\n}\n\nexport default TextEditor;\n","export const js = () => {\n    return {\n        type: \"js\"\n    };\n};\n\nexport const css = () => {\n    return {\n        type: \"css\"\n    };\n};\n\nexport const html = () => {\n    return {\n        type: \"html\"\n    };\n};\n\nexport const outputModalTrue = () => {\n    return {\n        type: \"outputtrue\"\n    };\n};\n\nexport const outputModalFalse = () => {\n    return {\n        type: \"outputfalse\"\n    };\n};\n\nexport const setSrcDocs = () => {\n    return {\n        type : \"setSrcdoc\",\n    }\n}\n\nexport const c = () => {\n    return {\n        type : \"c\",\n    }\n}\n\nexport const c99 = () => {\n    return {\n        type : \"c99\",\n    }\n}\n\nexport const cpp = () => {\n    return {\n        type : \"cpp\",\n    }\n}\n\nexport const cpp14 = () => {\n    return {\n        type : \"cpp14\",\n    }\n}\n\nexport const cpp17 = () => {\n    return {\n        type : \"cpp17\",\n    }\n}\n\nexport const python2 = () => {\n    return {\n        type : \"python2\",\n    }\n}\n\nexport const python3 = () => {\n    return {\n        type : \"python3\",\n    }\n}","import React, { useState, useEffect } from \"react\";\nimport Editor from \"@monaco-editor/react\";\nimport files from \"../../assets/files\";\nimport { c, c99, cpp, cpp14, cpp17, python2, python3 } from \"../../actions\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { runCode } from \"../../actions/outputAction\";\nimport \"./style.css\";\nfunction MultiFile(props) {\n  const [language, setLanguage] = useState(props.language);\n  const fileName = useSelector((state) => state.language);\n  const dispatch = useDispatch();\n  const [outputValue, setOutputValue] = useState(\"\");\n  const [inputValue, setInputValue] = useState(\"\");\n  const file = files[language];\n\n  function handleEditorChange(value) {\n    file.value = value;\n  }\n\n  function handleEditorWillMount(monaco) {\n    monaco.editor.defineTheme(\"my-cool-theme\", {\n      base: \"vs-dark\",\n      inherit: true,\n      rules: [],\n      colors: { \"editor.background\": \"#293738\" }\n    });\n  }\n\n  const languageList = {\n    \"Python 2\": \"python2\", \n    C: \"c\",\n    \"C-99\": \"c99\",\n    \"C++\": \"cpp\",\n    \"C++ 14\": \"cpp14\",\n    \"C++ 17\": \"cpp17\",\n    \"Python 3\": \"python3\",\n  };\n\n  // useEffect(() => {\n  //   const select = document.getElementsByClassName(\"language\")[0]\n  //   for (let key in languageList) {\n  //     var option = document.createElement(\"option\");\n  //     option.text = key;\n  //     option.value = languageList[key];\n  //     option.className = languageList[key];\n  //     select.add(option);\n  //   }\n\n  //   select.addEventListener(\"change\", (e) => {\n  //     setLanguage(select.value);\n  //     if (select.value === \"c\") {\n  //       dispatch(c());\n  //     }\n  //     if (select.value === \"c99\") {\n  //       dispatch(c99());\n  //     }\n  //     if (select.value === \"cpp\") {\n  //       dispatch(cpp());\n  //     }\n  //     if (select.value === \"cpp\") {\n  //       dispatch(cpp());\n  //     }\n  //     if (select.value === \"cpp14\") {\n  //       dispatch(cpp14());\n  //     }\n  //     if (select.value === \"cpp17\") {\n  //       dispatch(cpp17());\n  //     }\n  //     if (select.value === \"python2\") {\n  //       dispatch(python2());\n  //     }\n  //     if (select.value === \"python3\") {\n  //       dispatch(python3());\n  //     }\n  //   });\n  // }, []);\n\n  function userOutput(e) {\n    console.log(e);\n  }\n\n  function handleInput(e) {\n    setInputValue(e.target.value);\n  }\n\n  function handleOutput() {\n    const words = file.value.split(\"\\r\");\n    let code = \"\";\n    for (let i = 0; i < words.length; i++) {\n      code = code + words[i];\n    }\n    dispatch(runCode(language, code, inputValue)).then((e) => {\n      setOutputValue(e.data.output);\n      const data = {\n        output: e.data.output,\n      };\n      //creating a custom like predefined events like click or mousemove and more\n      const event = new CustomEvent(\"output\", { detail: data });\n      //dispatching the event in document.documentElement where we listen for it in while recording\n      document.documentElement.dispatchEvent(event);\n    });\n  }\n\n  return (\n    <>\n      <div className=\"multilanguageIde\">\n        <div className=\"navbar\">\n          <span className=\"fileName\">main \n          {language === \"python2\" || language === \"python3\" ? \".py\": \".cpp\"}\n          </span>\n          <div className=\"optionButton\">\n            <button\n              className=\"showCodeOutput\"\n              style={{\n                color: \"white\",\n                cursor: \"pointer\",\n                backgroundColor: \"green\",\n                borderRadius: \"5px\",\n                padding:\"4px\"\n              }}\n              onClick={handleOutput}\n            >\n              Run\n            </button>\n          </div>\n        </div>\n        <div className=\"editor\">\n          <Editor\n            height=\"100vh\"\n            width=\"80vw\"\n            theme=\"vs-light\"\n            language=\"cpp\"\n            options={{ fontSize: 18, fontWeight: 400, fontFamily: \"cursive\" }}\n            onChange={handleEditorChange}\n            value={file.value}\n            beforeMount={handleEditorWillMount}\n          />\n          <div className=\"inputOutput\">\n            <div className=\"inputArea\">\n              <h3>Input</h3>\n              <textarea\n                rows=\"20\"\n                cols=\"52\"\n                className=\"userInputArea\"\n                onChange={handleInput}\n                placeholder=\"Enter Input\"\n              ></textarea>\n            </div>\n            <div className=\"outputArea\">\n              <h3>Output</h3>\n              <textarea\n                rows=\"20\"\n                cols=\"52\"\n                className=\"userOutputArea\"\n                onChange={userOutput}\n                value={outputValue}\n              ></textarea>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default MultiFile;\n","import axios from \"axios\";\n\nconst env = process.env.NODE_ENV; // current environment\n\nexport const runCode = (language, code, input) => async dispatch => {\n    let url\n    if(env === \"development\") {\n        url = 'http://localhost:5000/'\n    }else{\n        url = 'https://fierce-reef-05156.herokuapp.com/' \n    }\n    return await axios.post( url+'api/compile', {\n        language: language, \n        stdin:input,\n        versionIndex: \"0\",\n        script:code\n    })\n}\n","import React from 'react';\nimport TextEditor from './TextEditor/TextEditor';\nimport MultiFile from './MultilanguageEditor/multiFile';\n\nfunction App(props) {\n  return (\n    <>\n    {props.name === \"ide\" ? <TextEditor refresh = {props.refresh}/> :<MultiFile language={props.language} refresh = {props.refresh}/>}\n    </>\n  )\n}\n\nexport default App;","\nfunction swap(elements, indexA, indexB) {\n    const element = elements[indexA];\n    elements[indexA] = elements[indexB];\n    elements[indexB] = element;\n}\n\nexport function moveOneLeft(elements, indicesToMove) {\n    indicesToMove.sort((a, b) => a - b);\n    let isSorted = true;\n    // We go from left to right to avoid overriding the wrong elements\n    indicesToMove.forEach((index, i) => {\n        // We don't want to bubble the first elements that are sorted as they are\n        // already in their correct position\n        isSorted = isSorted && index === i;\n        if (isSorted) {\n            return;\n        }\n        swap(elements, index - 1, index);\n    });\n}\n\nexport function moveOneRight(elements, indicesToMove) {\n    const reversedIndicesToMove = indicesToMove.sort((a, b) => b - a);\n    let isSorted = true;\n    // We go from right to left to avoid overriding the wrong elements\n    reversedIndicesToMove.forEach((index, i) => {\n        // We don't want to bubble the first elements that are sorted as they are\n        // already in their correct position\n        isSorted = isSorted && index === elements.length - i - 1;\n        if (isSorted) {\n            return;\n        }\n        swap(elements, index + 1, index);\n    });\n}\n// Let's go through an example\n//        |        |\n// [a, b, c, d, e, f, g]\n// -->\n// [c, f, a, b, d, e, g]\n//\n// We are going to override all the elements we want to move, so we keep them in an array\n// that we will restore at the end.\n// [c, f]\n//\n// From now on, we'll never read those values from the array anymore\n//        |1       |0\n// [a, b, _, d, e, _, g]\n//\n// The idea is that we want to shift all the elements between the marker 0 and 1\n// by one slot to the right.\n//\n//        |1       |0\n// [a, b, _, d, e, _, g]\n//          -> ->\n//\n// which gives us\n//\n//        |1       |0\n// [a, b, _, _, d, e, g]\n//\n// Now, we need to move all the elements from marker 1 to the beginning by two (not one)\n// slots to the right, which gives us\n//\n//        |1       |0\n// [a, b, _, _, d, e, g]\n//  ---|--^  ^\n//     ------|\n//\n// which gives us\n//\n//        |1       |0\n// [_, _, a, b, d, e, g]\n//\n// At this point, we can fill back the leftmost elements with the array we saved at\n// the beggining\n//\n//        |1       |0\n// [c, f, a, b, d, e, g]\n//\n// And we are done!\nexport function moveAllLeft(elements, indicesToMove) {\n    indicesToMove.sort((a, b) => a - b);\n    // Copy the elements to move\n    const leftMostElements = indicesToMove.map(index => elements[index]);\n    const reversedIndicesToMove = indicesToMove\n        // We go from right to left to avoid overriding elements.\n        .reverse()\n        // We add 0 for the final marker\n        .concat([0]);\n    reversedIndicesToMove.forEach((index, i) => {\n        // We skip the first one as it is not paired with anything else\n        if (i === 0) {\n            return;\n        }\n        // We go from the next marker to the right (i - 1) to the current one (index)\n        for (let pos = reversedIndicesToMove[i - 1] - 1; pos >= index; --pos) {\n            // We move by 1 the first time, 2 the second... So we can use the index i in the array\n            elements[pos + i] = elements[pos];\n        }\n    });\n    // The final step\n    leftMostElements.forEach((element, i) => {\n        elements[i] = element;\n    });\n}\n// Let's go through an example\n//        |        |\n// [a, b, c, d, e, f, g]\n// -->\n// [a, b, d, e, g, c, f]\n//\n// We are going to override all the elements we want to move, so we keep them in an array\n// that we will restore at the end.\n// [c, f]\n//\n// From now on, we'll never read those values from the array anymore\n//        |0       |1\n// [a, b, _, d, e, _, g]\n//\n// The idea is that we want to shift all the elements between the marker 0 and 1\n// by one slot to the left.\n//\n//        |0       |1\n// [a, b, _, d, e, _, g]\n//          <- <-\n//\n// which gives us\n//\n//        |0       |1\n// [a, b, d, e, _, _, g]\n//\n// Now, we need to move all the elements from marker 1 to the end by two (not one)\n// slots to the left, which gives us\n//\n//        |0       |1\n// [a, b, d, e, _, _, g]\n//              ^------\n//\n// which gives us\n//\n//        |0       |1\n// [a, b, d, e, g, _, _]\n//\n// At this point, we can fill back the rightmost elements with the array we saved at\n// the beggining\n//\n//        |0       |1\n// [a, b, d, e, g, c, f]\n//\n// And we are done!\nexport function moveAllRight(elements, indicesToMove) {\n    const reversedIndicesToMove = indicesToMove.sort((a, b) => b - a);\n    // Copy the elements to move\n    const rightMostElements = reversedIndicesToMove.map(index => elements[index]);\n    indicesToMove = reversedIndicesToMove\n        // We go from left to right to avoid overriding elements.\n        .reverse()\n        // We last element index for the final marker\n        .concat([elements.length]);\n    indicesToMove.forEach((index, i) => {\n        // We skip the first one as it is not paired with anything else\n        if (i === 0) {\n            return;\n        }\n        // We go from the next marker to the left (i - 1) to the current one (index)\n        for (let pos = indicesToMove[i - 1] + 1; pos < index; ++pos) {\n            // We move by 1 the first time, 2 the second... So we can use the index i in the array\n            elements[pos - i] = elements[pos];\n        }\n    });\n    // The final step\n    rightMostElements.forEach((element, i) => {\n        elements[elements.length - i - 1] = element;\n    });\n}\n","import React, {useRef} from \"react\";\nimport rough from \"roughjs/bundled/rough.esm\";\nimport { moveOneLeft, moveAllLeft, moveOneRight, moveAllRight } from \"./zindex\";\nimport * as io from 'socket.io-client';\nimport \"./style.css\";\n\nconst LOCAL_STORAGE_KEY = \"chalkboard\";\nconst LOCAL_STORAGE_KEY_STATE = \"chalkboard-state\";\nconst elements = Array.of();\nlet skipHistory = false;\nconst stateHistory = [];\n\nconst env = process.env.NODE_ENV; // current environment\nlet url\nif(env === \"development\") {\n  url = 'http://localhost:5000/'\n}else{\n  url = 'https://fierce-reef-05156.herokuapp.com/' \n}\n\nfunction generateHistoryCurrentEntry() {\n  return JSON.stringify(\n    elements.map((element) => ({ ...element, isSelected: false }))\n  );\n}\n\nfunction pushHistoryEntry(newEntry) {\n  if (\n    stateHistory.length > 0 &&\n    stateHistory[stateHistory.length - 1] === newEntry\n  ) {\n    // If the last entry is the same as this one, ignore it\n    return;\n  }\n  stateHistory.push(newEntry);\n}\n\nfunction restoreHistoryEntry(entry) {\n  const newElements = JSON.parse(entry);\n  elements.splice(0, elements.length);\n  newElements.forEach((newElement) => {\n    generateDraw(newElement);\n    elements.push(newElement);\n  });\n  // When restoring, we shouldn't add an history entry otherwise we'll be stuck with it and can't go back\n  skipHistory = true;\n}\n\n// https://stackoverflow.com/questions/521295/seeding-the-random-number-generator-in-javascript/47593316#47593316\nconst LCG = (seed) => () =>\n  ((2 ** 31 - 1) & (seed = Math.imul(48271, seed))) / 2 ** 31;\nfunction randomSeed() {\n  return Math.floor(Math.random() * 2 ** 31);\n}\n// Unfortunately, roughjs doesn't support a seed attribute (https://github.com/pshihn/rough/issues/27).\n// We can achieve the same result by overriding the Math.random function with a\n// pseudo random generator that supports a random seed and swapping it back after.\nfunction withCustomMathRandom(seed, cb) {\n  const random = Math.random;\n  Math.random = LCG(seed);\n  const result = cb();\n  Math.random = random;\n  return result;\n}\n// https://stackoverflow.com/a/6853926/232122\nfunction distanceBetweenPointAndSegment(x, y, x1, y1, x2, y2) {\n  const A = x - x1;\n  const B = y - y1;\n  const C = x2 - x1;\n  const D = y2 - y1;\n  const dot = A * C + B * D;\n  const lenSquare = C * C + D * D;\n  let param = -1;\n  if (lenSquare !== 0) {\n    // in case of 0 length line\n    param = dot / lenSquare;\n  }\n  let xx, yy;\n  if (param < 0) {\n    xx = x1;\n    yy = y1;\n  } else if (param > 1) {\n    xx = x2;\n    yy = y2;\n  } else {\n    xx = x1 + param * C;\n    yy = y1 + param * D;\n  }\n  const dx = x - xx;\n  const dy = y - yy;\n  return Math.hypot(dx, dy);\n}\n\nfunction hitTest(element, x, y) {\n  // For shapes that are composed of lines, we only enable point-selection when the distance\n  // of the click is less than x pixels of any of the lines that the shape is composed of\n  const lineThreshold = 10;\n  if (element.type === \"ellipse\") {\n    // https://stackoverflow.com/a/46007540/232122\n    const px = Math.abs(x - element.x - element.width / 2);\n    const py = Math.abs(y - element.y - element.height / 2);\n    let tx = 0.707;\n    let ty = 0.707;\n    const a = element.width / 2;\n    const b = element.height / 2;\n    [0, 1, 2, 3].forEach((x) => {\n      const xx = a * tx;\n      const yy = b * ty;\n      const ex = ((a * a - b * b) * tx ** 3) / a;\n      const ey = ((b * b - a * a) * ty ** 3) / b;\n      const rx = xx - ex;\n      const ry = yy - ey;\n      const qx = px - ex;\n      const qy = py - ey;\n      const r = Math.hypot(ry, rx);\n      const q = Math.hypot(qy, qx);\n      tx = Math.min(1, Math.max(0, ((qx * r) / q + ex) / a));\n      ty = Math.min(1, Math.max(0, ((qy * r) / q + ey) / b));\n      const t = Math.hypot(ty, tx);\n      tx /= t;\n      ty /= t;\n    });\n    return Math.hypot(a * tx - px, b * ty - py) < lineThreshold;\n  } else if (element.type === \"rectangle\") {\n    const x1 = getElementAbsoluteX1(element);\n    const x2 = getElementAbsoluteX2(element);\n    const y1 = getElementAbsoluteY1(element);\n    const y2 = getElementAbsoluteY2(element);\n    // (x1, y1) --A-- (x2, y1)\n    //    |D             |B\n    // (x1, y2) --C-- (x2, y2)\n    return (\n      distanceBetweenPointAndSegment(x, y, x1, y1, x2, y1) < lineThreshold || // A\n      distanceBetweenPointAndSegment(x, y, x2, y1, x2, y2) < lineThreshold || // B\n      distanceBetweenPointAndSegment(x, y, x2, y2, x1, y2) < lineThreshold || // C\n      distanceBetweenPointAndSegment(x, y, x1, y2, x1, y1) < lineThreshold // D\n    );\n  } else if (element.type === \"arrow\") {\n    let [x1, y1, x2, y2, x3, y3, x4, y4] = getArrowPoints(element);\n    // The computation is done at the origin, we need to add a translation\n    x -= element.x;\n    y -= element.y;\n    return (\n      //    \\\n      distanceBetweenPointAndSegment(x, y, x3, y3, x2, y2) < lineThreshold ||\n      // -----\n      distanceBetweenPointAndSegment(x, y, x1, y1, x2, y2) < lineThreshold ||\n      //    /\n      distanceBetweenPointAndSegment(x, y, x4, y4, x2, y2) < lineThreshold\n    );\n  } else if (element.type === \"text\") {\n    const x1 = getElementAbsoluteX1(element);\n    const x2 = getElementAbsoluteX2(element);\n    const y1 = getElementAbsoluteY1(element);\n    const y2 = getElementAbsoluteY2(element);\n    return x >= x1 && x <= x2 && y >= y1 && y <= y2;\n  } else if (element.type === \"selection\") {\n    console.warn(\"This should not happen, we need to investigate why it does.\");\n    return false;\n  } else {\n    throw new Error(\"Unimplemented type \" + element.type);\n  }\n}\n\nfunction resizeTest(element, x, y, sceneState) {\n  if (element.type === \"text\" || element.type === \"arrow\") return false;\n  const handlers = handlerRectangles(element, sceneState);\n  const filter = Object.keys(handlers).filter((key) => {\n    const handler = handlers[key];\n    return (\n      x + sceneState.scrollX >= handler[0] &&\n      x + sceneState.scrollX <= handler[0] + handler[2] &&\n      y + sceneState.scrollY >= handler[1] &&\n      y + sceneState.scrollY <= handler[1] + handler[3]\n    );\n  });\n  if (filter.length > 0) {\n    return filter[0];\n  }\n  return false;\n}\n\nfunction newElement(\n  type,\n  x,\n  y,\n  strokeColor,\n  backgroundColor,\n  width = 0,\n  height = 0\n) {\n  \n  const element = {\n    type: type,\n    x: x,\n    y: y,\n    width: width,\n    height: height,\n    isSelected: false,\n    strokeColor: strokeColor,\n    backgroundColor: backgroundColor,\n    seed: randomSeed(),\n    draw(rc, context, sceneState) {},\n  };\n\n  return element;\n}\n\nconst SCROLLBAR_WIDTH = 6;\nconst SCROLLBAR_MARGIN = 4;\nconst SCROLLBAR_COLOR = \"rgba(0,0,0,0.3)\";\nconst CANVAS_WINDOW_OFFSET_LEFT = 250;\nconst CANVAS_WINDOW_OFFSET_TOP = 0;\n\nfunction getScrollbars(canvasWidth, canvasHeight, scrollX, scrollY) {\n  // horizontal scrollbar\n  const sceneWidth = canvasWidth + Math.abs(scrollX);\n  const scrollBarWidth = (canvasWidth * canvasWidth) / sceneWidth;\n  const scrollBarX = scrollX > 0 ? 0 : canvasWidth - scrollBarWidth;\n  const horizontalScrollBar = {\n    x: scrollBarX + SCROLLBAR_MARGIN,\n    y: canvasHeight - SCROLLBAR_WIDTH - SCROLLBAR_MARGIN,\n    width: scrollBarWidth - SCROLLBAR_MARGIN * 2,\n    height: SCROLLBAR_WIDTH,\n  };\n  // vertical scrollbar\n  const sceneHeight = canvasHeight + Math.abs(scrollY);\n  const scrollBarHeight = (canvasHeight * canvasHeight) / sceneHeight;\n  const scrollBarY = scrollY > 0 ? 0 : canvasHeight - scrollBarHeight;\n  const verticalScrollBar = {\n    x: canvasWidth - SCROLLBAR_WIDTH - SCROLLBAR_MARGIN,\n    y: scrollBarY + SCROLLBAR_MARGIN,\n    width: SCROLLBAR_WIDTH,\n    height: scrollBarHeight - SCROLLBAR_WIDTH * 2,\n  };\n  return {\n    horizontal: horizontalScrollBar,\n    vertical: verticalScrollBar,\n  };\n}\n\nfunction isOverScrollBars(x, y, canvasWidth, canvasHeight, scrollX, scrollY) {\n  const scrollBars = getScrollbars(canvasWidth, canvasHeight, scrollX, scrollY);\n  const [isOverHorizontalScrollBar, isOverVerticalScrollBar] = [\n    scrollBars.horizontal,\n    scrollBars.vertical,\n  ].map(\n    (scrollBar) =>\n      scrollBar.x <= x &&\n      x <= scrollBar.x + scrollBar.width &&\n      scrollBar.y <= y &&\n      y <= scrollBar.y + scrollBar.height\n  );\n  return {\n    isOverHorizontalScrollBar,\n    isOverVerticalScrollBar,\n  };\n}\n\nfunction handlerRectangles(element, sceneState) {\n  const elementX1 = element.x;\n  const elementX2 = element.x + element.width;\n  const elementY1 = element.y;\n  const elementY2 = element.y + element.height;\n  const margin = 4;\n  const minimumSize = 40;\n  const handlers = {};\n  const marginX = element.width < 0 ? 8 : -8;\n  const marginY = element.height < 0 ? 8 : -8;\n  if (Math.abs(elementX2 - elementX1) > minimumSize) {\n    handlers[\"n\"] = [\n      elementX1 + (elementX2 - elementX1) / 2 + sceneState.scrollX - 4,\n      elementY1 - margin + sceneState.scrollY + marginY,\n      8,\n      8,\n    ];\n    handlers[\"s\"] = [\n      elementX1 + (elementX2 - elementX1) / 2 + sceneState.scrollX - 4,\n      elementY2 - margin + sceneState.scrollY - marginY,\n      8,\n      8,\n    ];\n  }\n  if (Math.abs(elementY2 - elementY1) > minimumSize) {\n    handlers[\"w\"] = [\n      elementX1 - margin + sceneState.scrollX + marginX,\n      elementY1 + (elementY2 - elementY1) / 2 + sceneState.scrollY - 4,\n      8,\n      8,\n    ];\n    handlers[\"e\"] = [\n      elementX2 - margin + sceneState.scrollX - marginX,\n      elementY1 + (elementY2 - elementY1) / 2 + sceneState.scrollY - 4,\n      8,\n      8,\n    ];\n  }\n  handlers[\"nw\"] = [\n    elementX1 - margin + sceneState.scrollX + marginX,\n    elementY1 - margin + sceneState.scrollY + marginY,\n    8,\n    8,\n  ]; // nw\n  handlers[\"ne\"] = [\n    elementX2 - margin + sceneState.scrollX - marginX,\n    elementY1 - margin + sceneState.scrollY + marginY,\n    8,\n    8,\n  ]; // ne\n  handlers[\"sw\"] = [\n    elementX1 - margin + sceneState.scrollX + marginX,\n    elementY2 - margin + sceneState.scrollY - marginY,\n    8,\n    8,\n  ]; // sw\n  handlers[\"se\"] = [\n    elementX2 - margin + sceneState.scrollX - marginX,\n    elementY2 - margin + sceneState.scrollY - marginY,\n    8,\n    8,\n  ]; // se\n  return handlers;\n}\n\nfunction renderScene(\n  rc,\n  canvas,\n  sceneState,\n  // extra options, currently passed by export helper\n  { offsetX, offsetY, renderScrollbars = true, renderSelection = true } = {}\n) {\n  if (!canvas) return;\n  const context = canvas.getContext(\"2d\");\n  const fillStyle = context.fillStyle;\n  if (typeof sceneState.viewBackgroundColor === \"string\") {\n    context.fillStyle = sceneState.viewBackgroundColor;\n    context.fillRect(0, 0, canvas.width, canvas.height);\n  } else {\n    context.clearRect(0, 0, canvas.width, canvas.height);\n  }\n  context.fillStyle = fillStyle;\n  const selectedIndices = getSelectedIndices();\n  sceneState = {\n    ...sceneState,\n    scrollX: typeof offsetX === \"number\" ? offsetX : sceneState.scrollX,\n    scrollY: typeof offsetY === \"number\" ? offsetY : sceneState.scrollY,\n  };\n  elements.forEach((element) => {\n    element.draw(rc, context, sceneState);\n    if (renderSelection && element.isSelected) {\n      const margin = 4;\n      const elementX1 = getElementAbsoluteX1(element);\n      const elementX2 = getElementAbsoluteX2(element);\n      const elementY1 = getElementAbsoluteY1(element);\n      const elementY2 = getElementAbsoluteY2(element);\n      const lineDash = context.getLineDash();\n      context.setLineDash([8, 4]);\n      context.strokeRect(\n        elementX1 - margin + sceneState.scrollX,\n        elementY1 - margin + sceneState.scrollY,\n        elementX2 - elementX1 + margin * 2,\n        elementY2 - elementY1 + margin * 2\n      );\n      context.setLineDash(lineDash);\n      if (\n        element.type !== \"text\" &&\n        element.type !== \"arrow\" &&\n        selectedIndices.length === 1\n      ) {\n        const handlers = handlerRectangles(element, sceneState);\n        Object.values(handlers).forEach((handler) => {\n          context.strokeRect(handler[0], handler[1], handler[2], handler[3]);\n        });\n      }\n    }\n  });\n  if (renderScrollbars) {\n    const scrollBars = getScrollbars(\n      context.canvas.width / window.devicePixelRatio,\n      context.canvas.height / window.devicePixelRatio,\n      sceneState.scrollX,\n      sceneState.scrollY\n    );\n    context.fillStyle = SCROLLBAR_COLOR;\n    context.fillRect(\n      scrollBars.horizontal.x,\n      scrollBars.horizontal.y,\n      scrollBars.horizontal.width,\n      scrollBars.horizontal.height\n    );\n    context.fillRect(\n      scrollBars.vertical.x,\n      scrollBars.vertical.y,\n      scrollBars.vertical.width,\n      scrollBars.vertical.height\n    );\n    context.fillStyle = fillStyle;\n  }\n}\n\nfunction saveAsJSON() {\n  const serialized = JSON.stringify({\n    version: 1,\n    source: window.location.origin,\n    elements,\n  });\n  saveFile(\n    \"chalkboard.json\",\n    \"data:text/plain;charset=utf-8,\" + encodeURIComponent(serialized)\n  );\n}\n\nfunction loadFromJSON() {\n  const input = document.createElement(\"input\");\n  const reader = new FileReader();\n  input.type = \"file\";\n  input.accept = \".json\";\n  input.onchange = () => {\n    if (!input.files.length) {\n      alert(\"A file was not selected.\");\n      return;\n    }\n    reader.readAsText(input.files[0], \"utf8\");\n  };\n  input.click();\n  return new Promise((resolve) => {\n    reader.onloadend = () => {\n      if (reader.readyState === FileReader.DONE) {\n        const data = JSON.parse(reader.result);\n        restore(data.elements, null);\n        resolve();\n      }\n    };\n  });\n}\n\nfunction exportAsPNG({\n  exportBackground,\n  exportPadding = 10,\n  viewBackgroundColor,\n}) {\n  const canvas = document.getElementById(\"canvas\");\n  const rc = rough.canvas(canvas);\n  const context = canvas.getContext(\"2d\");\n  if (!elements.length) return window.alert(\"Cannot export empty canvas.\");\n  // calculate smallest area to fit the contents in\n  let subCanvasX1 = Infinity;\n  let subCanvasX2 = 0;\n  let subCanvasY1 = Infinity;\n  let subCanvasY2 = 0;\n  elements.forEach((element) => {\n    subCanvasX1 = Math.min(subCanvasX1, getElementAbsoluteX1(element));\n    subCanvasX2 = Math.max(subCanvasX2, getElementAbsoluteX2(element));\n    subCanvasY1 = Math.min(subCanvasY1, getElementAbsoluteY1(element));\n    subCanvasY2 = Math.max(subCanvasY2, getElementAbsoluteY2(element));\n  });\n  function distance(x, y) {\n    return Math.abs(x > y ? x - y : y - x);\n  }\n  const tempCanvas = document.createElement(\"canvas\");\n  tempCanvas.style.display = \"none\";\n  document.body.appendChild(tempCanvas);\n  tempCanvas.width = distance(subCanvasX1, subCanvasX2) + exportPadding * 2;\n  tempCanvas.height = distance(subCanvasY1, subCanvasY2) + exportPadding * 2;\n  renderScene(\n    rough.canvas(tempCanvas),\n    tempCanvas,\n    {\n      viewBackgroundColor: exportBackground ? viewBackgroundColor : null,\n      scrollX: 0,\n      scrollY: 0,\n    },\n    {\n      offsetX: -subCanvasX1 + exportPadding,\n      offsetY: -subCanvasY1 + exportPadding,\n      renderScrollbars: false,\n      renderSelection: false,\n    }\n  );\n  saveFile(\"chalkboard.png\", tempCanvas.toDataURL(\"image/png\"));\n\n  // clean up the DOM\n  if (tempCanvas !== canvas) tempCanvas.remove();\n}\n\nfunction saveFile(name, data) {\n  // create a temporary <a> elem which we'll use to download the image\n  const link = document.createElement(\"a\");\n  link.setAttribute(\"download\", name);\n  link.setAttribute(\"href\", data);\n  link.click();\n  // clean up\n  link.remove();\n}\n\nfunction rotate(x1, y1, x2, y2, angle) {\n  // =()cos()sin+\n  // =()sin+()cos+.\n  // https://math.stackexchange.com/questions/2204520/how-do-i-rotate-a-line-segment-in-a-specific-point-on-the-line\n  return [\n    (x1 - x2) * Math.cos(angle) - (y1 - y2) * Math.sin(angle) + x2,\n    (x1 - x2) * Math.sin(angle) + (y1 - y2) * Math.cos(angle) + y2,\n  ];\n}\n\n// Casting second argument (DrawingSurface) to any,\n// because it is requred by TS definitions and not required at runtime\nconst generator = rough.generator(null, null);\nfunction isTextElement(element) {\n  return element.type === \"text\";\n}\n\nfunction isInputLike(target) {\n  return (\n    target instanceof HTMLInputElement ||\n    target instanceof HTMLTextAreaElement ||\n    target instanceof HTMLSelectElement\n  );\n}\n\nfunction getArrowPoints(element) {\n  const x1 = 0;\n  const y1 = 0;\n  const x2 = element.width;\n  const y2 = element.height;\n  const size = 30; // pixels\n  const distance = Math.hypot(x2 - x1, y2 - y1);\n  // Scale down the arrow until we hit a certain size so that it doesn't look weird\n  const minSize = Math.min(size, distance / 2);\n  const xs = x2 - ((x2 - x1) / distance) * minSize;\n  const ys = y2 - ((y2 - y1) / distance) * minSize;\n  const angle = 20; // degrees\n  const [x3, y3] = rotate(xs, ys, x2, y2, (-angle * Math.PI) / 180);\n  const [x4, y4] = rotate(xs, ys, x2, y2, (angle * Math.PI) / 180);\n  return [x1, y1, x2, y2, x3, y3, x4, y4];\n}\n\nfunction generateDraw(element) {\n  if (element.type === \"selection\") {\n    element.draw = (rc, context, { scrollX, scrollY }) => {\n      const fillStyle = context.fillStyle;\n      context.fillStyle = \"rgba(0, 0, 255, 0.10)\";\n      context.fillRect(\n        element.x + scrollX,\n        element.y + scrollY,\n        element.width,\n        element.height\n      );\n      context.fillStyle = fillStyle;\n    };\n  } else if (element.type === \"rectangle\") {\n    const shape = withCustomMathRandom(element.seed, () => {\n      return generator.rectangle(0, 0, element.width, element.height, {\n        stroke: element.strokeColor,\n        fill: element.backgroundColor,\n      });\n    });\n    element.draw = (rc, context, { scrollX, scrollY }) => {\n      context.translate(element.x + scrollX, element.y + scrollY);\n      rc.draw(shape);\n      context.translate(-element.x - scrollX, -element.y - scrollY);\n    };\n  } else if (element.type === \"ellipse\") {\n    const shape = withCustomMathRandom(element.seed, () =>\n      generator.ellipse(\n        element.width / 2,\n        element.height / 2,\n        element.width,\n        element.height,\n        { stroke: element.strokeColor, fill: element.backgroundColor }\n      )\n    );\n    element.draw = (rc, context, { scrollX, scrollY }) => {\n      context.translate(element.x + scrollX, element.y + scrollY);\n      rc.draw(shape);\n      context.translate(-element.x - scrollX, -element.y - scrollY);\n    };\n  } else if (element.type === \"arrow\") {\n    const [x1, y1, x2, y2, x3, y3, x4, y4] = getArrowPoints(element);\n    const shapes = withCustomMathRandom(element.seed, () => [\n      //    \\\n      generator.line(x3, y3, x2, y2, { stroke: element.strokeColor }),\n      // -----\n      generator.line(x1, y1, x2, y2, { stroke: element.strokeColor }),\n      //    /\n      generator.line(x4, y4, x2, y2, { stroke: element.strokeColor }),\n    ]);\n    element.draw = (rc, context, { scrollX, scrollY }) => {\n      context.translate(element.x + scrollX, element.y + scrollY);\n      shapes.forEach((shape) => rc.draw(shape));\n      context.translate(-element.x - scrollX, -element.y - scrollY);\n    };\n    return;\n  } else if (isTextElement(element)) {\n    element.draw = (rc, context, { scrollX, scrollY }) => {\n      const font = context.font;\n      context.font = element.font;\n      const fillStyle = context.fillStyle;\n      context.fillStyle = element.strokeColor;\n      context.fillText(\n        element.text,\n        element.x + scrollX,\n        element.y + element.actualBoundingBoxAscent + scrollY\n      );\n      context.fillStyle = fillStyle;\n      context.font = font;\n    };\n  } else {\n    throw new Error(\"Unimplemented type \" + element.type);\n  }\n}\n\n// If the element is created from right to left, the width is going to be negative\n// This set of functions retrieves the absolute position of the 4 points.\n// We can't just always normalize it since we need to remember the fact that an arrow\n// is pointing left or right.\n\nfunction getElementAbsoluteX1(element) {\n  return element.width >= 0 ? element.x : element.x + element.width;\n}\nfunction getElementAbsoluteX2(element) {\n  return element.width >= 0 ? element.x + element.width : element.x;\n}\nfunction getElementAbsoluteY1(element) {\n  return element.height >= 0 ? element.y : element.y + element.height;\n}\nfunction getElementAbsoluteY2(element) {\n  return element.height >= 0 ? element.y + element.height : element.y;\n}\n\nfunction setSelection(selection) {\n  const selectionX1 = getElementAbsoluteX1(selection);\n  const selectionX2 = getElementAbsoluteX2(selection);\n  const selectionY1 = getElementAbsoluteY1(selection);\n  const selectionY2 = getElementAbsoluteY2(selection);\n  elements.forEach((element) => {\n    const elementX1 = getElementAbsoluteX1(element);\n    const elementX2 = getElementAbsoluteX2(element);\n    const elementY1 = getElementAbsoluteY1(element);\n    const elementY2 = getElementAbsoluteY2(element);\n    element.isSelected =\n      element.type !== \"selection\" &&\n      selectionX1 <= elementX1 &&\n      selectionY1 <= elementY1 &&\n      selectionX2 >= elementX2 &&\n      selectionY2 >= elementY2;\n  });\n}\n\nfunction clearSelection() {\n  elements.forEach((element) => {\n    element.isSelected = false;\n  });\n}\n\nfunction resetCursor() {\n  document.documentElement.style.cursor = \"\";\n}\n\nfunction deleteSelectedElements() {\n  for (let i = elements.length - 1; i >= 0; --i) {\n    if (elements[i].isSelected) {\n      elements.splice(i, 1);\n    }\n  }\n}\n\nfunction save(state) {\n  // localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(elements));\n  // localStorage.setItem(LOCAL_STORAGE_KEY_STATE, JSON.stringify(state));\n}\n\nfunction restoreFromLocalStorage() {\n  // const savedElements = localStorage.getItem(LOCAL_STORAGE_KEY);\n  // const savedState = localStorage.getItem(LOCAL_STORAGE_KEY_STATE);\n  // return restore(savedElements, savedState);\n}\n\nfunction restore(savedElements, savedState) {\n  try {\n    if (savedElements) {\n      elements.splice(\n        0,\n        elements.length,\n        ...(typeof savedElements === \"string\"\n          ? JSON.parse(savedElements)\n          : savedElements)\n      );\n      elements.forEach((element) => generateDraw(element));\n    }\n    return savedState ? JSON.parse(savedState) : null;\n  } catch (e) {\n    elements.splice(0, elements.length);\n    return null;\n  }\n}\n\nconst KEYS = {\n  ARROW_LEFT: \"ArrowLeft\",\n  ARROW_RIGHT: \"ArrowRight\",\n  ARROW_DOWN: \"ArrowDown\",\n  ARROW_UP: \"ArrowUp\",\n  ESCAPE: \"Escape\",\n  DELETE: \"Delete\",\n  BACKSPACE: \"Backspace\",\n};\n\n// Inline font-awesome icons in order to save on js size rather than including the font awesome react library\nconst SHAPES = [\n  {\n    icon: (\n      // fa-mouse-pointer\n      <svg viewBox=\"0 0 320 512\">\n        <path d=\"M302.189 329.126H196.105l55.831 135.993c3.889 9.428-.555 19.999-9.444 23.999l-49.165 21.427c-9.165 4-19.443-.571-23.332-9.714l-53.053-129.136-86.664 89.138C18.729 472.71 0 463.554 0 447.977V18.299C0 1.899 19.921-6.096 30.277 5.443l284.412 292.542c11.472 11.179 3.007 31.141-12.5 31.141z\" />\n      </svg>\n    ),\n    value: \"selection\",\n  },\n  {\n    icon: (\n      // fa-square\n      <svg viewBox=\"0 0 448 512\">\n        <path d=\"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z\" />\n      </svg>\n    ),\n    value: \"rectangle\",\n  },\n  {\n    icon: (\n      // fa-circle\n      <svg viewBox=\"0 0 512 512\">\n        <path d=\"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z\" />\n      </svg>\n    ),\n    value: \"ellipse\",\n  },\n  {\n    icon: (\n      // fa-long-arrow-alt-right\n      <svg viewBox=\"0 0 448 512\">\n        <path d=\"M313.941 216H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h301.941v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.569 0-33.941l-86.059-86.059c-15.119-15.119-40.971-4.411-40.971 16.971V216z\" />\n      </svg>\n    ),\n    value: \"arrow\",\n  },\n  {\n    icon: (\n      // fa-font\n      <svg viewBox=\"0 0 448 512\">\n        <path d=\"M432 416h-23.41L277.88 53.69A32 32 0 0 0 247.58 32h-47.16a32 32 0 0 0-30.3 21.69L39.41 416H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-19.58l23.3-64h152.56l23.3 64H304a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM176.85 272L224 142.51 271.15 272z\" />\n      </svg>\n    ),\n    value: \"text\",\n  },\n];\n\nconst shapesShortcutKeys = SHAPES.map((shape) => shape.value[0]);\n\nfunction capitalize(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\nfunction findElementByKey(key) {\n  const defaultElement = \"selection\";\n  return SHAPES.reduce((element, shape) => {\n    if (shape.value[0] !== key) return element;\n    return shape.value;\n  }, defaultElement);\n}\n\nfunction ChangeTool(value) {\n  socketRef.current.emit(\"changeTool\", {data:value})\n}\n\nfunction isArrowKey(keyCode) {\n  return (\n    keyCode === KEYS.ARROW_LEFT ||\n    keyCode === KEYS.ARROW_RIGHT ||\n    keyCode === KEYS.ARROW_DOWN ||\n    keyCode === KEYS.ARROW_UP\n  );\n}\n\nfunction getSelectedIndices() {\n  const selectedIndices = [];\n  elements.forEach((element, index) => {\n    if (element.isSelected) {\n      selectedIndices.push(index);\n    }\n  });\n  return selectedIndices;\n}\n\nconst someElementIsSelected = () =>\n  elements.some((element) => element.isSelected);\nconst ELEMENT_SHIFT_TRANSLATE_AMOUNT = 5;\nconst ELEMENT_TRANSLATE_AMOUNT = 1;\nlet lastCanvasWidth = -1;\nlet lastCanvasHeight = -1;\nlet lastMouseUp = null;\n\nconst socketRef = React.createRef();\nsocketRef.current = io.connect(url)\nexport default class App extends React.Component {\n  \n  constructor() {\n    super(...arguments);\n    this.state = {\n      draggingElement: null,\n      resizingElement: null,\n      elementType: \"selection\",\n      exportBackground: true,\n      currentItemStrokeColor: \"#000000\",\n      currentItemBackgroundColor: \"#ffffff\",\n      viewBackgroundColor: \"#ffffff\",\n      scrollX: 0,\n      scrollY: 0,\n    };\n\n    this.onResize = () => {\n      this.forceUpdate();\n    };\n\n    this.onKeyDown = (event) => {\n      if (isInputLike(event.target)) return;\n      if (event.key === KEYS.ESCAPE) {\n        clearSelection();\n        this.forceUpdate();\n        event.preventDefault();\n      } else if (event.key === KEYS.BACKSPACE || event.key === KEYS.DELETE) {\n        deleteSelectedElements();\n        this.forceUpdate();\n        event.preventDefault();\n      } else if (isArrowKey(event.key)) {\n        const step = event.shiftKey\n          ? ELEMENT_SHIFT_TRANSLATE_AMOUNT\n          : ELEMENT_TRANSLATE_AMOUNT;\n        elements.forEach((element) => {\n          if (element.isSelected) {\n            if (event.key === KEYS.ARROW_LEFT) element.x -= step;\n            else if (event.key === KEYS.ARROW_RIGHT) element.x += step;\n            else if (event.key === KEYS.ARROW_UP) element.y -= step;\n            else if (event.key === KEYS.ARROW_DOWN) element.y += step;\n          }\n        });\n        this.forceUpdate();\n        event.preventDefault();\n        // Send backward: Cmd-Shift-Alt-B\n      } else if (\n        event.metaKey &&\n        event.shiftKey &&\n        event.altKey &&\n        event.code === \"KeyB\"\n      ) {\n        this.moveOneLeft();\n        event.preventDefault();\n        // Send to back: Cmd-Shift-B\n      } else if (event.metaKey && event.shiftKey && event.code === \"KeyB\") {\n        this.moveAllLeft();\n        event.preventDefault();\n        // Bring forward: Cmd-Shift-Alt-F\n      } else if (\n        event.metaKey &&\n        event.shiftKey &&\n        event.altKey &&\n        event.code === \"KeyF\"\n      ) {\n        this.moveOneRight();\n        event.preventDefault();\n        // Bring to front: Cmd-Shift-F\n      } else if (event.metaKey && event.shiftKey && event.code === \"KeyF\") {\n        this.moveAllRight();\n        event.preventDefault();\n        // Select all: Cmd-A\n      } else if (event.metaKey && event.code === \"KeyA\") {\n        elements.forEach((element) => {\n          element.isSelected = true;\n        });\n        this.forceUpdate();\n        event.preventDefault();\n      } else if (shapesShortcutKeys.includes(event.key.toLowerCase())) {\n        this.setState({ elementType: findElementByKey(event.key) });\n      } else if (event.metaKey && event.code === \"KeyZ\") {\n        let lastEntry = stateHistory.pop();\n        // If nothing was changed since last, take the previous one\n        if (generateHistoryCurrentEntry() === lastEntry) {\n          lastEntry = stateHistory.pop();\n        }\n        if (lastEntry !== undefined) {\n          restoreHistoryEntry(lastEntry);\n        }\n        this.forceUpdate();\n        event.preventDefault();\n      }\n    };\n\n    this.deleteSelectedElements = () => {\n      deleteSelectedElements();\n      this.forceUpdate();\n    };\n\n    this.clearCanvas = () => {\n      if (window.confirm(\"This will clear the whole canvas. Are you sure?\")) {\n        elements.splice(0, elements.length);\n        this.setState({\n          viewBackgroundColor: \"#ffffff\",\n          scrollX: 0,\n          scrollY: 0,\n        });\n        this.forceUpdate();\n      }\n    };\n\n    this.moveAllLeft = () => {\n      moveAllLeft(elements, getSelectedIndices());\n      this.forceUpdate();\n    };\n\n    this.moveOneLeft = () => {\n      moveOneLeft(elements, getSelectedIndices());\n      this.forceUpdate();\n    };\n\n    this.moveAllRight = () => {\n      moveAllRight(elements, getSelectedIndices());\n      this.forceUpdate();\n    };\n\n    this.moveOneRight = () => {\n      moveOneRight(elements, getSelectedIndices());\n      this.forceUpdate();\n    };\n\n    this.handleWheel = (e) => {\n      e.preventDefault();\n      const { deltaX, deltaY } = e;\n      this.setState((state) => ({\n        scrollX: state.scrollX - deltaX,\n        scrollY: state.scrollY - deltaY,\n      }));\n    };\n\n    this.handlemousedown = (e) => {\n      \n      if(e.type !== \"mousedown\"){\n        e = e.detail\n      }\n     \n      const canvasWidth = window.innerWidth - CANVAS_WINDOW_OFFSET_LEFT;\n      const canvasHeight = window.innerHeight - CANVAS_WINDOW_OFFSET_TOP;\n\n      const canvas = document.getElementById(\"canvas\");\n      const rc = rough.canvas(canvas);\n      const context = canvas.getContext(\"2d\");\n\n      if (lastMouseUp !== null) {\n        // Unfortunately, sometimes we don't get a mouseup after a mousedown,\n        // this can happen when a contextual menu or alert is triggered. In order to avoid\n        // being in a weird state, we clean up on the next mousedown\n        lastMouseUp(e);\n      }\n\n      // only handle left mouse button\n      if (e.button !== 0) return;\n\n      // fixes mousemove causing selection of UI texts #32\n      //if(e.type === \"mousedown\") e.preventDefault();\n\n      // Preventing the event above disables default behavior\n      //  of defocusing potentially focused input, which is what we want\n      //  when clicking inside the canvas.\n      if (isInputLike(document.activeElement)) {\n        document.activeElement.blur();\n      }\n      // Handle scrollbars dragging\n      const { isOverHorizontalScrollBar, isOverVerticalScrollBar } =\n        isOverScrollBars(\n          e.clientX - CANVAS_WINDOW_OFFSET_LEFT,\n          e.clientY - CANVAS_WINDOW_OFFSET_TOP,\n          canvasWidth,\n          canvasHeight,\n          this.state.scrollX,\n          this.state.scrollY\n        );\n\n      const x = e.clientX - CANVAS_WINDOW_OFFSET_LEFT - this.state.scrollX;\n      const y = e.clientY - CANVAS_WINDOW_OFFSET_TOP - this.state.scrollY;\n\n      const element = newElement(\n        this.state.elementType,\n        x,\n        y,\n        this.state.currentItemStrokeColor,\n        this.state.currentItemBackgroundColor\n      );\n\n      let resizeHandle = false;\n      let isDraggingElements = false;\n      let isResizingElements = false;\n\n      if (this.state.elementType === \"selection\") {\n        \n        //find the element that needs to be resized \n        const resizeElement = elements.find((element) => {\n          return resizeTest(element, x, y, {\n            scrollX: this.state.scrollX,\n            scrollY: this.state.scrollY,\n            viewBackgroundColor: this.state.viewBackgroundColor,\n          });\n        });\n        \n        //keep the resizing element in a global state\n        this.setState({\n          resizingElement: resizeElement ? resizeElement : null,\n        });\n\n        if (resizeElement) {\n          resizeHandle = resizeTest(resizeElement, x, y, {\n            scrollX: this.state.scrollX,\n            scrollY: this.state.scrollY,\n            viewBackgroundColor: this.state.viewBackgroundColor,\n          });\n\n          document.documentElement.style.cursor = `${resizeHandle}-resize`;\n          isResizingElements = true;\n\n        } else {\n          let hitElement = null;\n          // We need to to hit testing from front (end of the array) to back (beginning of the array)\n          for (let i = elements.length - 1; i >= 0; --i) {\n            if (hitTest(elements[i], x, y)) {\n              hitElement = elements[i];\n              break;\n            }\n          }\n          // If we click on something\n          if (hitElement) {\n            if (hitElement.isSelected) {\n              // If that element is not already selected, do nothing,\n              // we're likely going to drag it\n            } else {\n              // We unselect every other elements unless shift is pressed\n              if (!e.shiftKey) {\n                clearSelection();\n              }\n              // No matter what, we select it\n              hitElement.isSelected = true;\n            }\n          } else {\n            // If we don't click on anything, let's remove all the selected elements\n            clearSelection();\n          }\n          isDraggingElements = someElementIsSelected();\n          if (isDraggingElements) {\n            document.documentElement.style.cursor = \"move\";\n          }\n        }\n      }\n      if (isTextElement(element)) {\n        resetCursor();\n        const text = prompt(\"What text do you want?\");\n        if (text === null) {\n          return;\n        }\n        const fontSize = 20;\n        element.text = text;\n        element.font = `${fontSize}px Virgil`;\n        const font = context.font;\n        context.font = element.font;\n        const textMeasure = context.measureText(element.text);\n        const width = textMeasure.width;\n        const actualBoundingBoxAscent =\n          textMeasure.actualBoundingBoxAscent || fontSize;\n        const actualBoundingBoxDescent =\n          textMeasure.actualBoundingBoxDescent || 0;\n        element.actualBoundingBoxAscent = actualBoundingBoxAscent;\n        context.font = font;\n        const height = actualBoundingBoxAscent + actualBoundingBoxDescent;\n        // Center the text\n        element.x -= width / 2;\n        element.y -= actualBoundingBoxAscent;\n        element.width = width;\n        element.height = height;\n      }\n\n      socketRef.current = io.connect(url)\n\n      socketRef.current.emit(\"eventStart\", {data:{\n        button: e.button,\n        clientX : e.clientX,\n        clientY : e.clientY,\n        shiftKey : e.shiftKey,\n        target: e.target.className,\n      }})\n      console.log(element)\n      generateDraw(element);\n      elements.push(element);\n      if (this.state.elementType === \"text\") {\n        this.setState({\n          draggingElement: null,\n          elementType: \"selection\",\n        });\n        element.isSelected = true;\n      } else {\n        this.setState({ draggingElement: element });\n      }\n      let lastX = x;\n      let lastY = y;\n      if (isOverHorizontalScrollBar || isOverVerticalScrollBar) {\n        lastX = e.clientX - CANVAS_WINDOW_OFFSET_LEFT;\n        lastY = e.clientY - CANVAS_WINDOW_OFFSET_TOP;\n      }\n\n      const onMouseMove = (e) => {\n        console.log(e);\n        if(e.type !== \"mousemove\"){\n          e = e.detail\n        }\n        if(e.type === \"mousemove\"){\n          const target = e.target;\n          if (!(target instanceof HTMLElement)) {\n            return;\n          }\n        }\n\n        if (isOverHorizontalScrollBar) {\n          const x = e.clientX - CANVAS_WINDOW_OFFSET_LEFT;\n          const dx = x - lastX;\n          this.setState((state) => ({ scrollX: state.scrollX - dx }));\n          lastX = x;\n          return;\n        }\n        if (isOverVerticalScrollBar) {\n          const y = e.clientY - CANVAS_WINDOW_OFFSET_TOP;\n          const dy = y - lastY;\n          this.setState((state) => ({ scrollY: state.scrollY - dy }));\n          lastY = y;\n          return;\n        }\n        if (isResizingElements && this.state.resizingElement) {\n          const el = this.state.resizingElement;\n          const selectedElements = elements.filter((el) => el.isSelected);\n          if (selectedElements.length === 1) {\n            const x =\n              e.clientX - CANVAS_WINDOW_OFFSET_LEFT - this.state.scrollX;\n            const y =\n              e.clientY - CANVAS_WINDOW_OFFSET_TOP - this.state.scrollY;\n            selectedElements.forEach((element) => {\n              switch (resizeHandle) {\n                case \"nw\":\n                  element.width += element.x - lastX;\n                  element.height += element.y - lastY;\n                  element.x = lastX;\n                  element.y = lastY;\n                  break;\n                case \"ne\":\n                  element.width = lastX - element.x;\n                  element.height += element.y - lastY;\n                  element.y = lastY;\n                  break;\n                case \"sw\":\n                  element.width += element.x - lastX;\n                  element.x = lastX;\n                  element.height = lastY - element.y;\n                  break;\n                case \"se\":\n                  element.width += x - lastX;\n                  if (e.shiftKey) {\n                    element.height = element.width;\n                  } else {\n                    element.height += y - lastY;\n                  }\n                  break;\n                case \"n\":\n                  element.height += element.y - lastY;\n                  element.y = lastY;\n                  break;\n                case \"w\":\n                  element.width += element.x - lastX;\n                  element.x = lastX;\n                  break;\n                case \"s\":\n                  element.height = lastY - element.y;\n                  break;\n                case \"e\":\n                  element.width = lastX - element.x;\n                  break;\n              }\n              el.x = element.x;\n              el.y = element.y;\n              generateDraw(el);\n            });\n            lastX = x;\n            lastY = y;\n            // We don't want to save history when resizing an element\n            skipHistory = true;\n            this.forceUpdate();\n            return;\n          }\n        }\n        console.log(isDraggingElements)\n        if (isDraggingElements) {\n          const selectedElements = elements.filter((el) => el.isSelected);\n          if (selectedElements.length) {\n            const x =\n              e.clientX - CANVAS_WINDOW_OFFSET_LEFT - this.state.scrollX;\n            const y =\n              e.clientY - CANVAS_WINDOW_OFFSET_TOP - this.state.scrollY;\n            selectedElements.forEach((element) => {\n              element.x += x - lastX;\n              element.y += y - lastY;\n            });\n            lastX = x;\n            lastY = y;\n            // We don't want to save history when dragging an element to initially size it\n            skipHistory = true;\n            this.forceUpdate();\n            return;\n          }\n        }\n        // It is very important to read this.state within each move event,\n        // otherwise we would read a stale one!\n        const draggingElement = this.state.draggingElement;\n        if (!draggingElement) return;\n        let width =\n          e.clientX -\n          CANVAS_WINDOW_OFFSET_LEFT -\n          draggingElement.x -\n          this.state.scrollX;\n        console.log(width);\n        let height =\n          e.clientY -\n          CANVAS_WINDOW_OFFSET_TOP -\n          draggingElement.y -\n          this.state.scrollY;\n        draggingElement.width = width;\n        // Make a perfect square or circle when shift is enabled\n        draggingElement.height = e.shiftKey\n          ? Math.abs(width) * Math.sign(height)\n          : height;\n\n        socketRef.current = io.connect(url)\n        socketRef.current.emit(\"eventDrawing\", {data:{\n          button: e.button,\n          clientX : e.clientX,\n          clientY : e.clientY,\n          shiftKey : e.shiftKey,\n          target: e.target.className,\n        }})\n        generateDraw(draggingElement);\n        if (this.state.elementType === \"selection\") {\n          setSelection(draggingElement);\n        }\n        // We don't want to save history when moving an element\n        skipHistory = true;\n        this.forceUpdate();\n      };\n\n      const onMouseUp = (e) => {\n        const { draggingElement, elementType } = this.state;\n        lastMouseUp = null;\n        window.removeEventListener(\"mousemove\", onMouseMove);\n        window.removeEventListener(\"mouseup\", onMouseUp);\n        window.removeEventListener(\"canvasmouseup\", onMouseUp);\n        window.removeEventListener(\"canvasmousemove\", onMouseMove);\n        resetCursor();\n        // if no element is clicked, clear the selection and redraw\n        if (draggingElement === null) {\n          clearSelection();\n          this.forceUpdate();\n          return;\n        }\n        if (elementType === \"selection\") {\n          if (isDraggingElements) {\n            isDraggingElements = false;\n          }\n          elements.pop();\n        } else {\n          draggingElement.isSelected = true;\n        }\n        this.setState({\n          draggingElement: null,\n          elementType: \"selection\",\n        });\n        socketRef.current.emit(\"eventEnd\", {data:{elementType:\"selection\"}})\n        this.forceUpdate();\n      };\n\n      lastMouseUp = onMouseUp;\n      window.addEventListener(\"mousemove\", onMouseMove);\n      window.addEventListener(\"mouseup\", onMouseUp);\n      //We don't want to save history on mouseDown, only on mouseUp when it's fully configured\n      skipHistory = true;\n      this.forceUpdate();\n    }\n  }\n\n\n  componentDidMount() {\n    document.addEventListener(\"keydown\", this.onKeyDown, false);\n    window.addEventListener(\"resize\", this.onResize, false);\n    document.getElementById(\"canvas\").addEventListener(\"canvasmousedown\", this.handlemousedown);\n    const savedState = restoreFromLocalStorage();\n    if (savedState) {\n      this.setState(savedState);\n    }\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"keydown\", this.onKeyDown, false);\n    window.removeEventListener(\"resize\", this.onResize, false);\n  }\n\n  render() {\n    \n    const canvasWidth = window.innerWidth - CANVAS_WINDOW_OFFSET_LEFT;\n    const canvasHeight = window.innerHeight - CANVAS_WINDOW_OFFSET_TOP;\n   \n    return (\n      <div\n        className=\"_drawcontainer\"\n\n        onCut = {(e) => {\n          e.clipboardData.setData(\n            \"text/plain\",\n            JSON.stringify(elements.filter((element) => element.isSelected))\n          );\n          deleteSelectedElements();\n          this.forceUpdate();\n          e.preventDefault();\n        }}\n\n        onCopy = {(e) => {\n          e.clipboardData.setData(\n            \"text/plain\",\n            JSON.stringify(elements.filter((element) => element.isSelected))\n          );\n          e.preventDefault();\n        }}\n\n        onPaste = {(e) => {\n          const paste = e.clipboardData.getData(\"text\");\n          let parsedElements;\n          try {\n            parsedElements = JSON.parse(paste);\n          } catch (e) {}\n          if (\n            Array.isArray(parsedElements) &&\n            parsedElements.length > 0 &&\n            parsedElements[0].type // need to implement a better check here...\n          ) {\n            clearSelection();\n            parsedElements.forEach((parsedElement) => {\n              parsedElement.x += 10;\n              parsedElement.y += 10;\n              parsedElement.seed = randomSeed();\n              generateDraw(parsedElement);\n              elements.push(parsedElement);\n            });\n            this.forceUpdate();\n          }\n          e.preventDefault();\n        }}\n      >\n        <div className=\"sidePanel\">\n          <h4>Shapes</h4>\n          <div className=\"panelTools\">\n            {SHAPES.map(({ value, icon }) => (\n              <label\n                key={value}\n                className=\"tool\"\n                title={`${capitalize(value)} - ${capitalize(value)[0]}`}\n              >\n                <input\n                  type=\"radio\"\n                  className = {value}\n                  checked={this.state.elementType === value}\n                  onChange={() => {\n                    ChangeTool(value)\n                    this.setState({ elementType: value });\n                    clearSelection();\n                    document.documentElement.style.cursor =\n                      value === \"text\" ? \"text\" : \"crosshair\";\n                    this.forceUpdate();\n                  }}\n                />\n                <div className=\"toolIcon\">{icon}</div>\n              </label>\n            ))}\n          </div>\n          <h4>Colors</h4>\n          <div className=\"panelColumn\">\n            <label>\n              <input\n                type=\"color\"\n                value={this.state.viewBackgroundColor}\n                onChange={(e) => {\n                  this.setState({ viewBackgroundColor: e.target.value });\n                }}\n              />\n              Background\n            </label>\n            <label>\n              <input\n                type=\"color\"\n                value={this.state.currentItemStrokeColor}\n                onChange={(e) => {\n                  this.setState({ currentItemStrokeColor: e.target.value });\n                }}\n              />\n              Shape Stroke\n            </label>\n            <label>\n              <input\n                type=\"color\"\n                value={this.state.currentItemBackgroundColor}\n                onChange={(e) => {\n                  this.setState({ currentItemBackgroundColor: e.target.value });\n                }}\n              />\n              Shape Background\n            </label>\n          </div>\n          <h4>Canvas</h4>\n          <div className=\"panelColumn\">\n            <button\n              className = \"chalk_button\"\n              onClick={this.clearCanvas}\n              title=\"Clear the canvas & reset background color\"\n            >\n              Clear canvas\n            </button>\n          </div>\n          <h4>Export</h4>\n          <div className=\"panelColumn\">\n            <button\n              className = \"chalk_button\"\n              onClick={() => {\n                exportAsPNG(this.state);\n              }}\n            >\n              Export to png\n            </button>\n            <label>\n              <input\n                type=\"checkbox\"\n                checked={this.state.exportBackground}\n                onChange={(e) => {\n                  this.setState({ exportBackground: e.target.checked });\n                }}\n              />\n              background\n            </label>\n          </div>\n          <h4>Save/Load</h4>\n          <div className=\"panelColumn\">\n            <button\n              className = \"chalk_button\"\n              onClick={() => {\n                saveAsJSON();\n              }}\n            >\n              Save as...\n            </button>\n            <button\n              className = \"chalk_button\"\n              onClick={() => {\n                loadFromJSON().then(() => this.forceUpdate());\n              }}\n            >\n              Load file...\n            </button>\n          </div>\n          {someElementIsSelected() && (\n            <>\n              <h4>Shape options</h4>\n              <div className=\"panelColumn\">\n                <button  className = \"chalk_button\" onClick={this.deleteSelectedElements}>Delete</button>\n                <button  className = \"chalk_button\" onClick={this.moveOneRight}>Bring forward</button>\n                <button  className = \"chalk_button\" onClick={this.moveAllRight}>Bring to front</button>\n                <button  className = \"chalk_button\" onClick={this.moveOneLeft}>Send backward</button>\n                <button  className = \"chalk_button\" onClick={this.moveAllLeft}>Send to back</button>\n              </div>\n            </>\n          )}\n        </div>\n\n        <canvas\n          id = \"canvas\"\n          style = {{\n            width: canvasWidth,\n            height: canvasHeight,\n          }}\n          width = {canvasWidth * window.devicePixelRatio}\n          height = {canvasHeight * window.devicePixelRatio}\n          ref = {(canvas) => {\n            if (this.removeWheelEventListener) {\n              this.removeWheelEventListener();\n              \n              this.removeWheelEventListener = undefined;\n            }\n            if (canvas) {\n              canvas.addEventListener(\"wheel\", this.handleWheel, {\n                passive: false,\n              });\n              this.removeWheelEventListener = () =>\n                canvas.removeEventListener(\"wheel\", this.handleWheel);\n              // Whenever React sets the width/height of the canvas element,\n              // the context loses the scale transform. We need to re-apply it\n              if (\n                canvasWidth !== lastCanvasWidth ||\n                canvasHeight !== lastCanvasHeight\n              ) {\n                lastCanvasWidth = canvasWidth;\n                lastCanvasHeight = canvasHeight;\n                canvas\n                  .getContext(\"2d\")\n                  .scale(window.devicePixelRatio, window.devicePixelRatio);\n              }\n            }\n          }}\n\n          onMouseDown={this.handlemousedown}\n        />\n      </div>\n    );\n  }\n\n  componentDidUpdate() {\n    const canvas = document.getElementById(\"canvas\");\n    const rc = rough.canvas(canvas);\n    const context = canvas.getContext(\"2d\");\n    renderScene(rc, canvas, {\n      \n      scrollX: this.state.scrollX,\n      scrollY: this.state.scrollY,\n      viewBackgroundColor: this.state.viewBackgroundColor,\n    });\n    save(this.state);\n    if (!skipHistory) {\n      pushHistoryEntry(generateHistoryCurrentEntry());\n    }\n    skipHistory = false;\n  }\n}\n","import React from \"react\";\nimport IDE from \"../IDE\";\nimport DrawingBoard from \"../DrawingBoard/drawBoard\";\nimport files from \"../../assets/files\";\nimport MicRecorder from 'mic-recorder-to-mp3';\nimport firebase from 'firebase/app'\nimport 'firebase/firestore'\nimport 'firebase/storage';\nimport './style.css'\n\nvar startTime;\nexport default function Recorder(props) {\n  const name = props.location.state.lectureType\n  const language = props.location.state.languageType\n  const Recording = { events: [] };\n  var lastMouse = {x : 0, y : 0};\n  var lastKey = \"\";\n  let fileName\n  if(name === \"dsa\"){\n    fileName= language\n  }else if(name=== \"ide\"){\n    fileName=\"index.html\"\n  }\n  let childValue;\n  var lastKeyClass = \"\";\n\n  function callbackFunction(childData){\n    childValue = childData\n    //console.log(childValue)\n  }\n  // Record each type of event\n  const handlers = [\n    {\n      eventName: \"mouseup\",\n      handler: function handleMouseMove(e) {\n        \n        Recording.events.push({\n          type: \"mouseup\",\n          time: Date.now() - startTime,\n        });\n      },\n    },\n    {\n      eventName: \"mousedown\",\n      handler: function handleMouseMove(e) {\n        \n        Recording.events.push({\n          type: \"mousedown\",\n          button: e.button,\n          clientX : e.clientX,\n          clientY : e.clientY,\n          shiftKey : e.shiftKey,\n          time: Date.now() - startTime,\n        });\n      },\n    },\n    {\n      eventName: \"mousemove\",\n      handler: function handleMouseMove(e) {\n        lastMouse  = {x : e.pageX, y :e.pageY};\n        Recording.events.push({\n          type: \"mousemove\",\n          clientX : e.clientX,\n          clientY : e.clientY,   \n          shiftKey : e.shiftKey,       \n          target: lastKeyClass,\n          x: e.pageX,\n          fileName : fileName,\n          y: e.pageY,\n          value: lastKey,\n          time: Date.now() - startTime,\n        });\n      },\n    },\n    {\n      eventName: \"click\",\n      handler: function handleClick(e) {\n        // if(name === \"ide\" || name === \"other\"){\n          if(e.target.className === \"cssfile\" || e.target.className === \"buttontext style\" || e.target.className === \"fab fa-css3-alt\") fileName = \"style.css\"\n          if(e.target.className === \"jsfile\" || e.target.className === \"buttontext script\" || e.target.className === \" fa-js-square\") fileName = \"script.js\" \n          if(e.target.className === \"htmlfile\" || e.target.className === \"buttontext html\" || e.target.className === \"fab fa-html5fab\") fileName = \"index.html\"\n          //console.log(e.target.className);\n          Recording.events.push({\n            type: \"click\",\n            target: e.target.className,\n            x: e.pageX,\n            fileName :fileName,\n            y: e.pageY,\n            time: Date.now() - startTime,\n          });\n        //}\n      },\n    },\n    {\n      eventName: \"keyup\",\n      handler: function handleKeyPress(e) {\n        console.log(files[fileName])\n        if(name === \"ide\" || name === \"dsa\"){\n          lastKey = childValue\n          lastKeyClass = e.target.className\n          Recording.events.push({\n            type: \"keyup\",\n            target: e.target.className,\n            x: lastMouse.x,\n            y: lastMouse.y,\n            fileName: fileName,\n            value: (e.target.className === \"userInputArea\") ? e.target.value :files[fileName].value,\n            keyCode: e.keyCode,\n            time: Date.now() - startTime,\n          });\n        }\n      },\n    },\n    {\n      eventName: \"click\",\n      handler: function handleClick(e) {\n        if(name === \"dsa\"){\n          if(language  === \"c\" || \n          language === \"c99\" || \n          language === \"cpp\" || \n          language === \"cpp14\" || \n          language === \"cpp17\" || \n          language === \"python2\" || \n          language === \"python3\"){\n            fileName = language\n          }\n          Recording.events.push({\n            type: \"click\",\n            target: e.target.className,\n            x: e.pageX,\n            fileName :fileName,\n            y: e.pageY,\n            value:files[fileName].value,\n            time: Date.now() - startTime,\n          });\n        }\n      },\n      },\n    {\n      eventName:\"output\",\n      handler:function handleChange(e){\n        Recording.events.push({\n          type:\"output\",\n          target:\"userOutputArea\",\n          time:Date.now() - startTime,\n          value:e.detail.output\n        })\n      }\n    },\n    {\n      eventName:\"drawStart\", \n      handler:function handleChange(e){\n      Recording.events.push({\n        type:\"drawStart\",\n        time:Date.now() - startTime,\n        value:e.detail\n        })\n      }\n    },\n    {\n      eventName:\"drawEnd\", \n      handler:function handleChange(e){\n      Recording.events.push({\n        type:\"drawEnd\",\n        time:Date.now() - startTime,\n        value:e.detail\n        })\n      }\n    },\n    {\n      eventName:\"drawing\", \n      handler:function handleChange(e){\n      Recording.events.push({\n        type:\"drawing\",\n        time:Date.now() - startTime,\n        value:e.detail\n        })\n      }\n    },\n    {\n      eventName:\"movingStart\",\n      handler:function handleChange(e){\n        Recording.events.push({\n          type:\"movingStart\",\n          time:Date.now() - startTime,\n          value:e.detail.element\n        })\n      }\n    },\n    {\n      eventName:\"moving\",\n      handler:function handleChange(e){\n        Recording.events.push({\n          type:\"moving\",\n          time:Date.now()-startTime,\n          value:e.detail\n        })\n      }\n    },\n    {\n      eventName:\"resizeStart\",\n      handler:function handleChange(e){\n        Recording.events.push({\n          type:\"resizeStart\",\n          time:Date.now() - startTime,\n          value:e.detail\n        })\n      }\n    },\n    {\n      eventName:\"resizing\",\n      handler:function handleChange(e){\n        Recording.events.push({\n          type:\"resizing\",\n          time:Date.now()-startTime,\n          value:e.detail\n        })\n      }\n    }\n  ];\n\n  const Mp3Recorder = new MicRecorder({ \n    bitRate: 128,\n    prefix: \"data:audio/wav;base64,\"\n  });\n\n  function listen(eventName, handler) {\n    return document.documentElement.addEventListener(eventName, handler, true);\n  }\n\n  function startRecording() {\n    startTime = Date.now()\n    Recording.events = [];\n    handlers.map((x) => listen(x.eventName, x.handler));\n    Mp3Recorder\n    .start()\n    .then(() => {\n      console.log(\"Started recording\")\n    }).catch((e) => console.error(e));\n  }\n\n  function removeListener(eventName, handler) {\n    return document.documentElement.removeEventListener(\n      eventName,\n      handler,\n      true\n    );\n  }\n\n  function handleClick(e) {\n    e.preventDefault();\n    document.getElementsByClassName(\"record\")[0].style.display=\"none\"\n    document.getElementsByClassName(\"stop-record\")[0].style.display=\"block\"\n    startRecording();\n    console.log(\"The Button was clicked.\");\n  }\n\n  function stopRecording() {\n    // stop recording\n    handlers.map((x) => removeListener(x.eventName, x.handler));\n    localStorage.setItem(\"recording\", JSON.stringify(Recording))\n    document.getElementsByClassName(\"stop-record\")[0].style.display=\"none\"\n    document.getElementsByClassName(\"record\")[0].style.display=\"block\"\n    const recordingString = JSON.stringify(Recording)\n    console.log(Recording)\n    firebase.firestore().collection(\"events\").add({\n      recordingString,\n      createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n      name:props.location.state.lectureName,\n      creator:props.location.state.lectureCreator,\n      type:props.location.state.lectureType\n    }).then((result) => {\n      localStorage.setItem(\"recordingId\", JSON.stringify(result.id))\n      firebase.firestore().collection(\"recordIndex\").add({\n        createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n        name:props.location.state.lectureName,\n        type:props.location.state.lectureType,\n        creator:props.location.state.lectureCreator,\n        language:language,\n        id:result.id\n      }).then((result) => {\n        console.log(\"Recording Tally Saved\")\n      })\n      console.log(\"Recording Saved\")\n      let audioString\n      Mp3Recorder\n      .stop()\n      .getMp3()\n      .then(([buffer, blob]) => {\n        new File(buffer, 'me-at-thevoice.mp3', {\n          type: blob.type,\n          lastModified: Date.now()\n        })\n        var reader = new FileReader();\n        reader.readAsDataURL(blob);\n        reader.onloadend = () => {\n            audioString =(reader.result)\n            var storageRef = firebase.storage().ref();\n              const id = JSON.parse(localStorage.getItem(\"recordingId\"))\n              //console.log(id)\n              localStorage.removeItem('recordingId');\n              var audioRef = storageRef.child(id);\n              audioRef.putString(audioString, 'data_url').then((snapshot) => {\n                alert('Audio saved!');\n              }).catch((e) => {\n                console.log(e)\n              })\n          }\n      }).catch((e) => console.log(e));\n    })\n  }\n\n  function handleStop(e) {\n    e.preventDefault();\n    stopRecording();\n    console.log(\"Recording Stopped.\");\n  }\n  //console.log(Recording)\n  return (\n    <>\n      <div className=\"recorder\">\n      <div className = \"recorder-button\">\n        <i className=\"fas fa-microphone record\" onClick={handleClick}></i>\n        <i className=\"fas fa-microphone-slash stop-record\" onClick={handleStop}></i>\n      </div>\n      {name === \"dra\" ?<DrawingBoard/>:<IDE name={name} language={language} parentCallBack = {callbackFunction}/>}\n      </div>\n    </>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport IDE from \"../IDE\";\nimport files from \"../../assets/files\";\nimport { useDispatch } from \"react-redux\";\nimport { js, css, html, outputModalTrue, outputModalFalse, setSrcDocs } from \"../../actions\";\nimport firebase from 'firebase/app'\nimport 'firebase/firestore';\nimport 'firebase/storage';\nimport \"./style.css\";\nimport DrawingBoardPlayer from \"../DrawingBoard/drawBoard\";\n\nfunction Preloader(){\n  return(\n    <div className = \"loader\">\n    <div className =\"preloader\">\n\t<div className =\"box\">\n\t\t<div className =\"box__inner\">\n\t\t\t<div className =\"box__back-flap\"></div>\n\t\t\t<div className =\"box__right-flap\"></div>\n\t\t\t<div className =\"box__front-flap\"></div>\n\t\t\t<div className =\"box__left-flap\"></div>\n\t\t\t<div className =\"box__front\"></div>\n\t\t</div>\n\t</div>\n\t<div className =\"box\">\n\t\t<div className =\"box__inner\">\n\t\t\t<div className =\"box__back-flap\"></div>\n\t\t\t<div className =\"box__right-flap\"></div>\n\t\t\t<div className =\"box__front-flap\"></div>\n\t\t\t<div className =\"box__left-flap\"></div>\n\t\t\t<div className =\"box__front\"></div>\n\t\t</div>\n\t</div>\n\t<div className =\"line\">\n\t\t<div className =\"line__inner\"></div>\n\t</div>\n\t<div className =\"line\">\n\t\t<div className =\"line__inner\"></div>\n\t</div>\n\t<div className =\"line\">\n\t\t<div className =\"line__inner\"></div>\n\t</div>\n\t<div className =\"line\">\n\t\t<div className =\"line__inner\"></div>\n\t</div>\n\t<div className =\"line\">\n\t\t<div className =\"line__inner\"></div>\n\t</div>\n\t<div className =\"line\">\n\t\t<div className =\"line__inner\"></div>\n\t</div>\n\t<div className =\"line\">\n\t\t<div className =\"line__inner\"></div>\n\t</div>\n</div>\n</div>\n  )\n}\n\nexport default function Video(props) {\n  const name = props.location.state.type.slice(0,3)\n  const language = props.location.state.type.slice(3, 10)\n  const [refresh, setRefresh] = useState(\"\");\n  const [loading, setLoading] = useState(\"loading\");\n  const dispatch = useDispatch();\n  let drawingEvent=''\n  const [drawing, setDrawing] = useState('')\n  \n  useEffect(() => {\n    let offsetPlay = 0;\n    localStorage.setItem(\"lastSessionTimeStamp\", JSON.stringify(offsetPlay));\n    const videoPlayer = document.getElementsByClassName('videoplayer')[0]\n    const playButton = document.getElementsByClassName(\"playButton\")[0]\n    // fetch recording from local storage\n    let recording = { events: [] };\n    const recordingJsonValue = localStorage.getItem(\"recording\");\n    //const audioValue = JSON.parse(localStorage.getItem(\"file\"));\n    const id = (props.location.state.id)\n    firebase.firestore().collection('events').where(firebase.firestore.FieldPath.documentId(), '==', id).get()\n    .then((snap) => {\n        snap.forEach((doc) => {\n             console.log(doc.data())\n             recording = JSON.parse(doc.data().recordingString)\n        })\n      }).catch((err) => {\n        console.log(err)\n      })\n\n    if (recordingJsonValue != null) recording = JSON.parse(recordingJsonValue);\n\n    // console.log(recording);\n\n    var storageRef = firebase.storage().ref();\n    storageRef.child((id)).getDownloadURL().then((url) => {\n      audioPlayer.src = url\n      localStorage.setItem(\"url\", url)\n    }).catch((e) => {\n      console.log(e)\n    })\n\n    //fake cursor for playing\n    const fakeCursor = document.createElement(\"div\");\n    document.getElementById(\"root\").appendChild(fakeCursor);\n    fakeCursor.style.display = 'none'\n    const audioPlayer = document.getElementById(\"audio_player\")\n    var startPlay;\n    // console.log(playButton)\n    audioPlayer.addEventListener(\"onclick\", (e) => {\n      console.log(\"Click on the audioPlayer\")\n      console.log(e)\n    })\n\n    fakeCursor.className = \"customCursor\";\n    \n    var i = 0;\n    var paused = false;\n\n    audioPlayer.addEventListener(\"canplay\", () => {\n      document.getElementsByClassName(\"player-content\")[0].style.display = \"block\";\n      document.getElementsByClassName(\"loader\")[0].style.display = \"none\";\n      console.log(\"loaded\")\n    })\n  \n    audioPlayer.addEventListener(\"play\", () => {\n      playButton.style.display=\"none\"\n      playfunction();\n      console.log(\"audio play\")\n    })\n\n    audioPlayer.addEventListener(\"pause\", () => {\n      console.log(\"clicked pause\");\n      pausefunction();\n    })\n    \n    audioPlayer.addEventListener(\"ended\", () => {\n      pausefunction();\n      console.log(\"ended audio\")\n    })\n\n    audioPlayer.addEventListener(\"seeking\", () => {\n      fakeCursor.style.display = 'none';\n      pausefunction()\n      audioPlayer.pause()\n      //returns the time at which the audio is after seeking it\n      const curTime = audioPlayer.currentTime\n     \n      //TODO: Implement binary search or lower bound\n      for(let x=0;x<recording.events.length;x++){\n        if(recording.events[x].time>curTime*1000){\n          i=x;\n          break;\n        }\n      }\n\n      console.log(i)\n      console.log(recording.events[i].time)\n      console.log(curTime)\n      //localStorage.setItem(\"lastSessionTimeStamp\", JSON.stringify(recording.events[i].time))\n      if( recording.events[i].time>(curTime*1000)){\n        localStorage.setItem(\"lastSessionTimeStamp\", recording.events[i].time)\n      }else{\n        localStorage.setItem(\"lastSessionTimeStamp\", curTime*1000)\n      }\n      //handlePlayerClick()\n    })\n\n    playButton.addEventListener(\"click\", () => {\n      playButton.style.display=\"none\"\n      videoPlayer.style.display=\"flex\"\n      audioPlayer.play();\n      playfunction();\n    })\n\n    function pausefunction() {\n      fakeCursor.style.display = 'none';\n      paused = true;\n      localStorage.setItem(\"lastSessionTimeStamp\", JSON.stringify(offsetPlay));\n    }\n\n\n    function playfunction() {\n       \n      if( document.getElementsByClassName(\"videoscreen\")[0] != null) document.getElementsByClassName(\"videoscreen\")[0].className = \"visiblescreen\";\n       //append fake cursor when user clicks play button\n       fakeCursor.style.display = 'block';\n       startPlay = Date.now()\n       paused = false;\n       var frames;\n       //draw event to play all events in requestAnimationFrames\n       function draw() {\n           //select an event and check if its empty\n           let event = recording.events[i];\n           if (!event) {\n             return;\n           }\n\n           if(localStorage.getItem(\"lastSessionTimeStamp\") !== null){\n            offsetPlay = JSON.parse(localStorage.getItem(\"lastSessionTimeStamp\")) + Date.now() - startPlay;\n           }\n           else{\n            offsetPlay = (Date.now() - startPlay) * 1;\n           }\n\n         if (event.time <= offsetPlay) {\n           //draws event amd matches with listner\n           drawEvent(event, fakeCursor);\n           i++;\n         }\n\n         \n         if (i >= recording.events.length || paused) {\n           clearInterval(frames);\n          //  if(i >= (recording.events.length - 1)){\n          //    paused = true\n          //  }\n         } \n     };\n\n     frames = setInterval(() => {\n       if(!paused) draw();\n     }, 1)\n    }\n\n    \n    function handleButtonEvents(target) {\n      switch (target) {\n        case \"outputtext\":\n             dispatch(setSrcDocs());\n             dispatch(outputModalTrue());\n          break;\n        case \"output\":\n            dispatch(setSrcDocs());\n            dispatch(outputModalTrue());\n         break;\n        case \"buttontext output\":\n            dispatch(setSrcDocs());\n            dispatch(outputModalTrue());\n         break;\n        case \"fas fa-play\":\n          dispatch(setSrcDocs());\n          dispatch(outputModalTrue());\n          break;\n        case \"fas fa-window-close\":\n             dispatch(outputModalFalse());\n          break;\n        case \"style.css\":\n            dispatch(css());             \n         break;\n        case \"buttontext style\":\n          dispatch(css());             \n         break;\n        case \"index.html\":\n            dispatch(html());     \n         break;\n        case \"script.js\":\n            dispatch(js());\n         break;\n        case \"buttontext script\":\n            dispatch(js());\n         break;\n        default: \n          break;\n      }\n    }\n\n    function drawEvent(event, fakeCursor) {\n      if (event.type === \"mousedown\") {\n\n        let eve = new MouseEvent(\"mousedown\", {\n          bubbles: true,\n          cancelable: true,\n          button: event.button,\n          clientX : event.clientX,\n          clientY : event.clientY,\n          shiftKey : event.shiftKey,\n        });\n\n        if(document.getElementById(\"canvas\"))document.getElementById(\"canvas\").dispatchEvent(eve);\n\n      }\n      else if (event.type === \"mousemove\") {\n\n        let eve = new MouseEvent(\"mousemove\", {\n          bubbles: true,\n          cancelable: true,\n          button: event.button,\n          clientX : event.clientX,\n          clientY : event.clientY,\n          shiftKey : event.shiftKey,\n        });\n\n        if(document.getElementById(\"canvas\"))document.getElementById(\"canvas\").dispatchEvent(eve);\n        \n       //document.getElementsByClassName(\"cursor\")[0].style.top = JSON.stringify(event.y) + \"px\";\n        fakeCursor.style.left = JSON.stringify(event.x) + \"px\";\n        fakeCursor.style.top = JSON.stringify(event.y) + \"px\";\n        const path = event.target;\n        handleButtonEvents(event.fileName);\n        var tar = document.getElementsByClassName(path)[0];\n        if (tar != null) {\n          tar.focus();\n\n        }\n      }\n      else if (event.type === \"mouseup\") {\n\n        let eve = new MouseEvent(\"mouseup\", {\n          bubbles: true,\n          cancelable: true\n        });\n        if(document.getElementById(\"canvas\"))document.getElementById(\"canvas\").dispatchEvent(eve);\n      }\n      else if (event.type === \"click\") {\n        // if(document.getElementsByClassName(event.target)[0].nodeName === \"INPUT\"){\n        //     document.getElementsByClassName(event.target)[0].click();\n        // }\n        if(event.target === \"rectangle\" || event.target === \"ellipse\" || event.target === \"arrow\" || event.target === \"selection\") document.getElementsByClassName(event.target)[0].click();\n        flashClass(fakeCursor, \"click\");\n        tar = document.getElementsByClassName(event.target)[0];\n        if(tar !=  null){\n          handleButtonEvents(event.fileName);\n          handleButtonEvents(event.target);\n          flashClass(tar, \"clicked\");\n        }\n      }\n      else if (event.type === \"keyup\") {\n        const path = event.target;\n        tar = document.getElementsByClassName(path)[0];\n        if (tar != null) {\n          tar.focus();\n          if(path===\"userInputArea\"){\n            tar.value = event.value\n            }else{\n              files[event.fileName].value = event.value;\n              handleButtonEvents(event.fileName);\n              setRefresh(event.value);\n            }\n        }\n      }\n      else if(event.type === \"output\") {\n        const path = event.target;\n        tar = document.getElementsByClassName(path)[0];\n        if (tar != null) {\n          tar.focus();\n          if(path===\"userOutputArea\"){\n            tar.value = event.value\n            }\n        }\n      }\n      else{\n        setDrawing(event)\n      }\n    }\n\n    function flashClass(el, className) {\n      el.classList.add(className);\n      setTimeout(function () {\n        el.classList.remove(className);\n      }, 200);\n    }\n  }, []);\n\n  return (\n    <div>\n      <Preloader/>\n      <div className = \"player-content\">\n      <div className = \"videoscreen\">\n      {/* <IDE name={name} refresh = {refresh}/> */}\n      {name===\"dra\" ? <DrawingBoardPlayer event={drawing}/>: <IDE name={name} language={language} refresh={refresh}/>}\n      </div>\n      <div className=\"playButton\">\n      <div className=\"container\"><a className=\"button button-play\"></a></div>\n      </div>\n      <div className = \"videoplayer\"> \n      <audio id=\"audio_player\" controls=\"controls\" controlsList=\"nodownload\"></audio>\n      </div>\n      </div>\n\n    </div>\n  );\n}\n","import React, { useEffect} from 'react'\nimport {useHistory} from \"react-router-dom\";\nimport \"./style.css\"\nfunction RecorderForm() {\n    const history = useHistory();\n    let lectureName;\n    let lectureType;\n    let lectureCreator;\n    let languageType;\n    const navigateToRecorderWeb = () => history.push({\n        pathname:'/recorder',\n        state:{lectureType,lectureName, lectureCreator, languageType}}\n    );\n\n    const languageList = {\n        \"Python 2\": \"python2\", \n        C: \"c\",\n        \"C-99\": \"c99\",\n        \"C++\": \"cpp\",\n        \"C++ 14\": \"cpp14\",\n        \"C++ 17\": \"cpp17\",\n        \"Python 3\": \"python3\",\n      };\n    \n\n    useEffect(() => {\n\n        const select = document.getElementById(\"language\");\n        for (let key in languageList) {\n          var option = document.createElement(\"option\");\n          option.text = key;\n          option.value = languageList[key];\n          option.className = languageList[key];\n          select.add(option);\n        }\n\n        const type = document.getElementById(\"lectureType\")\n        const name = document.getElementById(\"lectureName\")\n        const creator = document.getElementById(\"creator\")\n        const button = document.getElementById(\"submit\")\n\n        button.addEventListener(\"click\", () => {\n            lectureType = type.value\n            lectureName = name.value\n            lectureCreator = creator.value\n            if(lectureType === \"dsa\"){\n                languageType = select.value\n            }else{\n                languageType = ''\n            }\n        })\n        type.addEventListener(\"change\", (e) =>{\n            if(e.target.value === \"dsa\"){\n                select.style.display = \"block\"\n            }else{\n                select.style.display = \"none\"\n            }\n        })\n    },[])\n\n    return (\n        <>\n        <form>\n            <input id=\"lectureName\" placeholder=\"Lecture Title\"/>\n            <input id=\"creator\" placeholder=\"Creator\"/>\n            <select name=\"language\" id=\"language\"></select>\n            <select id=\"lectureType\">\n                <option value=\"ide\">Web Developerment</option>\n                <option value=\"dsa\">DSA</option>\n                <option value=\"dra\">Chalk Board</option>\n            </select>\n            <button type=\"button\"  onClick={navigateToRecorderWeb} id=\"submit\">Submit</button>\n        </form>\n        </>\n    )\n}\n\nexport default RecorderForm","import React, {useRef} from \"react\";\nimport rough from \"roughjs/bundled/rough.esm\";\nimport { moveOneLeft, moveAllLeft, moveOneRight, moveAllRight } from \"./zindex\";\nimport * as io from 'socket.io-client';\nimport \"./style.css\";\n\nconst LOCAL_STORAGE_KEY = \"chalkboard\";\nconst LOCAL_STORAGE_KEY_STATE = \"chalkboard-state\";\nconst elements = Array.of();\nlet skipHistory = false;\nconst stateHistory = [];\n\n\nfunction generateHistoryCurrentEntry() {\n  return JSON.stringify(\n    elements.map((element) => ({ ...element, isSelected: false }))\n  );\n}\n\nfunction pushHistoryEntry(newEntry) {\n  if (\n    stateHistory.length > 0 &&\n    stateHistory[stateHistory.length - 1] === newEntry\n  ) {\n    // If the last entry is the same as this one, ignore it\n    return;\n  }\n  stateHistory.push(newEntry);\n}\n\nfunction restoreHistoryEntry(entry) {\n  const newElements = JSON.parse(entry);\n  elements.splice(0, elements.length);\n  newElements.forEach((newElement) => {\n    generateDraw(newElement);\n    elements.push(newElement);\n  });\n  // When restoring, we shouldn't add an history entry otherwise we'll be stuck with it and can't go back\n  skipHistory = true;\n}\n\n// https://stackoverflow.com/questions/521295/seeding-the-random-number-generator-in-javascript/47593316#47593316\nconst LCG = (seed) => () =>\n  ((2 ** 31 - 1) & (seed = Math.imul(48271, seed))) / 2 ** 31;\nfunction randomSeed() {\n  return Math.floor(Math.random() * 2 ** 31);\n}\n// Unfortunately, roughjs doesn't support a seed attribute (https://github.com/pshihn/rough/issues/27).\n// We can achieve the same result by overriding the Math.random function with a\n// pseudo random generator that supports a random seed and swapping it back after.\nfunction withCustomMathRandom(seed, cb) {\n  const random = Math.random;\n  Math.random = LCG(seed);\n  const result = cb();\n  Math.random = random;\n  return result;\n}\n// https://stackoverflow.com/a/6853926/232122\nfunction distanceBetweenPointAndSegment(x, y, x1, y1, x2, y2) {\n  const A = x - x1;\n  const B = y - y1;\n  const C = x2 - x1;\n  const D = y2 - y1;\n  const dot = A * C + B * D;\n  const lenSquare = C * C + D * D;\n  let param = -1;\n  if (lenSquare !== 0) {\n    // in case of 0 length line\n    param = dot / lenSquare;\n  }\n  let xx, yy;\n  if (param < 0) {\n    xx = x1;\n    yy = y1;\n  } else if (param > 1) {\n    xx = x2;\n    yy = y2;\n  } else {\n    xx = x1 + param * C;\n    yy = y1 + param * D;\n  }\n  const dx = x - xx;\n  const dy = y - yy;\n  return Math.hypot(dx, dy);\n}\n\nfunction hitTest(element, x, y) {\n  // For shapes that are composed of lines, we only enable point-selection when the distance\n  // of the click is less than x pixels of any of the lines that the shape is composed of\n  const lineThreshold = 10;\n  if (element.type === \"ellipse\") {\n    // https://stackoverflow.com/a/46007540/232122\n    const px = Math.abs(x - element.x - element.width / 2);\n    const py = Math.abs(y - element.y - element.height / 2);\n    let tx = 0.707;\n    let ty = 0.707;\n    const a = element.width / 2;\n    const b = element.height / 2;\n    [0, 1, 2, 3].forEach((x) => {\n      const xx = a * tx;\n      const yy = b * ty;\n      const ex = ((a * a - b * b) * tx ** 3) / a;\n      const ey = ((b * b - a * a) * ty ** 3) / b;\n      const rx = xx - ex;\n      const ry = yy - ey;\n      const qx = px - ex;\n      const qy = py - ey;\n      const r = Math.hypot(ry, rx);\n      const q = Math.hypot(qy, qx);\n      tx = Math.min(1, Math.max(0, ((qx * r) / q + ex) / a));\n      ty = Math.min(1, Math.max(0, ((qy * r) / q + ey) / b));\n      const t = Math.hypot(ty, tx);\n      tx /= t;\n      ty /= t;\n    });\n    return Math.hypot(a * tx - px, b * ty - py) < lineThreshold;\n  } else if (element.type === \"rectangle\") {\n    const x1 = getElementAbsoluteX1(element);\n    const x2 = getElementAbsoluteX2(element);\n    const y1 = getElementAbsoluteY1(element);\n    const y2 = getElementAbsoluteY2(element);\n    // (x1, y1) --A-- (x2, y1)\n    //    |D             |B\n    // (x1, y2) --C-- (x2, y2)\n    return (\n      distanceBetweenPointAndSegment(x, y, x1, y1, x2, y1) < lineThreshold || // A\n      distanceBetweenPointAndSegment(x, y, x2, y1, x2, y2) < lineThreshold || // B\n      distanceBetweenPointAndSegment(x, y, x2, y2, x1, y2) < lineThreshold || // C\n      distanceBetweenPointAndSegment(x, y, x1, y2, x1, y1) < lineThreshold // D\n    );\n  } else if (element.type === \"arrow\") {\n    let [x1, y1, x2, y2, x3, y3, x4, y4] = getArrowPoints(element);\n    // The computation is done at the origin, we need to add a translation\n    x -= element.x;\n    y -= element.y;\n    return (\n      //    \\\n      distanceBetweenPointAndSegment(x, y, x3, y3, x2, y2) < lineThreshold ||\n      // -----\n      distanceBetweenPointAndSegment(x, y, x1, y1, x2, y2) < lineThreshold ||\n      //    /\n      distanceBetweenPointAndSegment(x, y, x4, y4, x2, y2) < lineThreshold\n    );\n  } else if (element.type === \"text\") {\n    const x1 = getElementAbsoluteX1(element);\n    const x2 = getElementAbsoluteX2(element);\n    const y1 = getElementAbsoluteY1(element);\n    const y2 = getElementAbsoluteY2(element);\n    return x >= x1 && x <= x2 && y >= y1 && y <= y2;\n  } else if (element.type === \"selection\") {\n    console.warn(\"This should not happen, we need to investigate why it does.\");\n    return false;\n  } else {\n    throw new Error(\"Unimplemented type \" + element.type);\n  }\n}\n\nfunction resizeTest(element, x, y, sceneState) {\n  if (element.type === \"text\" || element.type === \"arrow\") return false;\n  const handlers = handlerRectangles(element, sceneState);\n  const filter = Object.keys(handlers).filter((key) => {\n    const handler = handlers[key];\n    return (\n      x + sceneState.scrollX >= handler[0] &&\n      x + sceneState.scrollX <= handler[0] + handler[2] &&\n      y + sceneState.scrollY >= handler[1] &&\n      y + sceneState.scrollY <= handler[1] + handler[3]\n    );\n  });\n  if (filter.length > 0) {\n    return filter[0];\n  }\n  return false;\n}\n\nfunction newElement(\n  type,\n  x,\n  y,\n  strokeColor,\n  backgroundColor,\n  width = 0,\n  height = 0\n) {\n  \n  const element = {\n    type: type,\n    x: x,\n    y: y,\n    width: width,\n    height: height,\n    isSelected: false,\n    strokeColor: strokeColor,\n    backgroundColor: backgroundColor,\n    seed: randomSeed(),\n    draw(rc, context, sceneState) {},\n  };\n\n  return element;\n}\n\nconst SCROLLBAR_WIDTH = 6;\nconst SCROLLBAR_MARGIN = 4;\nconst SCROLLBAR_COLOR = \"rgba(0,0,0,0.3)\";\nconst CANVAS_WINDOW_OFFSET_LEFT = 250;\nconst CANVAS_WINDOW_OFFSET_TOP = 0;\n\nfunction getScrollbars(canvasWidth, canvasHeight, scrollX, scrollY) {\n  // horizontal scrollbar\n  const sceneWidth = canvasWidth + Math.abs(scrollX);\n  const scrollBarWidth = (canvasWidth * canvasWidth) / sceneWidth;\n  const scrollBarX = scrollX > 0 ? 0 : canvasWidth - scrollBarWidth;\n  const horizontalScrollBar = {\n    x: scrollBarX + SCROLLBAR_MARGIN,\n    y: canvasHeight - SCROLLBAR_WIDTH - SCROLLBAR_MARGIN,\n    width: scrollBarWidth - SCROLLBAR_MARGIN * 2,\n    height: SCROLLBAR_WIDTH,\n  };\n  // vertical scrollbar\n  const sceneHeight = canvasHeight + Math.abs(scrollY);\n  const scrollBarHeight = (canvasHeight * canvasHeight) / sceneHeight;\n  const scrollBarY = scrollY > 0 ? 0 : canvasHeight - scrollBarHeight;\n  const verticalScrollBar = {\n    x: canvasWidth - SCROLLBAR_WIDTH - SCROLLBAR_MARGIN,\n    y: scrollBarY + SCROLLBAR_MARGIN,\n    width: SCROLLBAR_WIDTH,\n    height: scrollBarHeight - SCROLLBAR_WIDTH * 2,\n  };\n  return {\n    horizontal: horizontalScrollBar,\n    vertical: verticalScrollBar,\n  };\n}\n\nfunction isOverScrollBars(x, y, canvasWidth, canvasHeight, scrollX, scrollY) {\n  const scrollBars = getScrollbars(canvasWidth, canvasHeight, scrollX, scrollY);\n  const [isOverHorizontalScrollBar, isOverVerticalScrollBar] = [\n    scrollBars.horizontal,\n    scrollBars.vertical,\n  ].map(\n    (scrollBar) =>\n      scrollBar.x <= x &&\n      x <= scrollBar.x + scrollBar.width &&\n      scrollBar.y <= y &&\n      y <= scrollBar.y + scrollBar.height\n  );\n  return {\n    isOverHorizontalScrollBar,\n    isOverVerticalScrollBar,\n  };\n}\n\nfunction handlerRectangles(element, sceneState) {\n  const elementX1 = element.x;\n  const elementX2 = element.x + element.width;\n  const elementY1 = element.y;\n  const elementY2 = element.y + element.height;\n  const margin = 4;\n  const minimumSize = 40;\n  const handlers = {};\n  const marginX = element.width < 0 ? 8 : -8;\n  const marginY = element.height < 0 ? 8 : -8;\n  if (Math.abs(elementX2 - elementX1) > minimumSize) {\n    handlers[\"n\"] = [\n      elementX1 + (elementX2 - elementX1) / 2 + sceneState.scrollX - 4,\n      elementY1 - margin + sceneState.scrollY + marginY,\n      8,\n      8,\n    ];\n    handlers[\"s\"] = [\n      elementX1 + (elementX2 - elementX1) / 2 + sceneState.scrollX - 4,\n      elementY2 - margin + sceneState.scrollY - marginY,\n      8,\n      8,\n    ];\n  }\n  if (Math.abs(elementY2 - elementY1) > minimumSize) {\n    handlers[\"w\"] = [\n      elementX1 - margin + sceneState.scrollX + marginX,\n      elementY1 + (elementY2 - elementY1) / 2 + sceneState.scrollY - 4,\n      8,\n      8,\n    ];\n    handlers[\"e\"] = [\n      elementX2 - margin + sceneState.scrollX - marginX,\n      elementY1 + (elementY2 - elementY1) / 2 + sceneState.scrollY - 4,\n      8,\n      8,\n    ];\n  }\n  handlers[\"nw\"] = [\n    elementX1 - margin + sceneState.scrollX + marginX,\n    elementY1 - margin + sceneState.scrollY + marginY,\n    8,\n    8,\n  ]; // nw\n  handlers[\"ne\"] = [\n    elementX2 - margin + sceneState.scrollX - marginX,\n    elementY1 - margin + sceneState.scrollY + marginY,\n    8,\n    8,\n  ]; // ne\n  handlers[\"sw\"] = [\n    elementX1 - margin + sceneState.scrollX + marginX,\n    elementY2 - margin + sceneState.scrollY - marginY,\n    8,\n    8,\n  ]; // sw\n  handlers[\"se\"] = [\n    elementX2 - margin + sceneState.scrollX - marginX,\n    elementY2 - margin + sceneState.scrollY - marginY,\n    8,\n    8,\n  ]; // se\n  return handlers;\n}\n\nfunction renderScene(\n  rc,\n  canvas,\n  sceneState,\n  // extra options, currently passed by export helper\n  { offsetX, offsetY, renderScrollbars = true, renderSelection = true } = {}\n) {\n  if (!canvas) return;\n  const context = canvas.getContext(\"2d\");\n  const fillStyle = context.fillStyle;\n  if (typeof sceneState.viewBackgroundColor === \"string\") {\n    context.fillStyle = sceneState.viewBackgroundColor;\n    context.fillRect(0, 0, canvas.width, canvas.height);\n  } else {\n    context.clearRect(0, 0, canvas.width, canvas.height);\n  }\n  context.fillStyle = fillStyle;\n  const selectedIndices = getSelectedIndices();\n  sceneState = {\n    ...sceneState,\n    scrollX: typeof offsetX === \"number\" ? offsetX : sceneState.scrollX,\n    scrollY: typeof offsetY === \"number\" ? offsetY : sceneState.scrollY,\n  };\n  elements.forEach((element) => {\n    element.draw(rc, context, sceneState);\n    if (renderSelection && element.isSelected) {\n      const margin = 4;\n      const elementX1 = getElementAbsoluteX1(element);\n      const elementX2 = getElementAbsoluteX2(element);\n      const elementY1 = getElementAbsoluteY1(element);\n      const elementY2 = getElementAbsoluteY2(element);\n      const lineDash = context.getLineDash();\n      context.setLineDash([8, 4]);\n      context.strokeRect(\n        elementX1 - margin + sceneState.scrollX,\n        elementY1 - margin + sceneState.scrollY,\n        elementX2 - elementX1 + margin * 2,\n        elementY2 - elementY1 + margin * 2\n      );\n      context.setLineDash(lineDash);\n      if (\n        element.type !== \"text\" &&\n        element.type !== \"arrow\" &&\n        selectedIndices.length === 1\n      ) {\n        const handlers = handlerRectangles(element, sceneState);\n        Object.values(handlers).forEach((handler) => {\n          context.strokeRect(handler[0], handler[1], handler[2], handler[3]);\n        });\n      }\n    }\n  });\n  if (renderScrollbars) {\n    const scrollBars = getScrollbars(\n      context.canvas.width / window.devicePixelRatio,\n      context.canvas.height / window.devicePixelRatio,\n      sceneState.scrollX,\n      sceneState.scrollY\n    );\n    context.fillStyle = SCROLLBAR_COLOR;\n    context.fillRect(\n      scrollBars.horizontal.x,\n      scrollBars.horizontal.y,\n      scrollBars.horizontal.width,\n      scrollBars.horizontal.height\n    );\n    context.fillRect(\n      scrollBars.vertical.x,\n      scrollBars.vertical.y,\n      scrollBars.vertical.width,\n      scrollBars.vertical.height\n    );\n    context.fillStyle = fillStyle;\n  }\n}\n\nfunction saveAsJSON() {\n  const serialized = JSON.stringify({\n    version: 1,\n    source: window.location.origin,\n    elements,\n  });\n  saveFile(\n    \"chalkboard.json\",\n    \"data:text/plain;charset=utf-8,\" + encodeURIComponent(serialized)\n  );\n}\n\nfunction loadFromJSON() {\n  const input = document.createElement(\"input\");\n  const reader = new FileReader();\n  input.type = \"file\";\n  input.accept = \".json\";\n  input.onchange = () => {\n    if (!input.files.length) {\n      alert(\"A file was not selected.\");\n      return;\n    }\n    reader.readAsText(input.files[0], \"utf8\");\n  };\n  input.click();\n  return new Promise((resolve) => {\n    reader.onloadend = () => {\n      if (reader.readyState === FileReader.DONE) {\n        const data = JSON.parse(reader.result);\n        restore(data.elements, null);\n        resolve();\n      }\n    };\n  });\n}\n\nfunction exportAsPNG({\n  exportBackground,\n  exportPadding = 10,\n  viewBackgroundColor,\n}) {\n  const canvas = document.getElementById(\"canvas\");\n  const rc = rough.canvas(canvas);\n  const context = canvas.getContext(\"2d\");\n  if (!elements.length) return window.alert(\"Cannot export empty canvas.\");\n  // calculate smallest area to fit the contents in\n  let subCanvasX1 = Infinity;\n  let subCanvasX2 = 0;\n  let subCanvasY1 = Infinity;\n  let subCanvasY2 = 0;\n  elements.forEach((element) => {\n    subCanvasX1 = Math.min(subCanvasX1, getElementAbsoluteX1(element));\n    subCanvasX2 = Math.max(subCanvasX2, getElementAbsoluteX2(element));\n    subCanvasY1 = Math.min(subCanvasY1, getElementAbsoluteY1(element));\n    subCanvasY2 = Math.max(subCanvasY2, getElementAbsoluteY2(element));\n  });\n  function distance(x, y) {\n    return Math.abs(x > y ? x - y : y - x);\n  }\n  const tempCanvas = document.createElement(\"canvas\");\n  tempCanvas.style.display = \"none\";\n  document.body.appendChild(tempCanvas);\n  tempCanvas.width = distance(subCanvasX1, subCanvasX2) + exportPadding * 2;\n  tempCanvas.height = distance(subCanvasY1, subCanvasY2) + exportPadding * 2;\n  renderScene(\n    rough.canvas(tempCanvas),\n    tempCanvas,\n    {\n      viewBackgroundColor: exportBackground ? viewBackgroundColor : null,\n      scrollX: 0,\n      scrollY: 0,\n    },\n    {\n      offsetX: -subCanvasX1 + exportPadding,\n      offsetY: -subCanvasY1 + exportPadding,\n      renderScrollbars: false,\n      renderSelection: false,\n    }\n  );\n  saveFile(\"chalkboard.png\", tempCanvas.toDataURL(\"image/png\"));\n\n  // clean up the DOM\n  if (tempCanvas !== canvas) tempCanvas.remove();\n}\n\nfunction saveFile(name, data) {\n  // create a temporary <a> elem which we'll use to download the image\n  const link = document.createElement(\"a\");\n  link.setAttribute(\"download\", name);\n  link.setAttribute(\"href\", data);\n  link.click();\n  // clean up\n  link.remove();\n}\n\nfunction rotate(x1, y1, x2, y2, angle) {\n  // =()cos()sin+\n  // =()sin+()cos+.\n  // https://math.stackexchange.com/questions/2204520/how-do-i-rotate-a-line-segment-in-a-specific-point-on-the-line\n  return [\n    (x1 - x2) * Math.cos(angle) - (y1 - y2) * Math.sin(angle) + x2,\n    (x1 - x2) * Math.sin(angle) + (y1 - y2) * Math.cos(angle) + y2,\n  ];\n}\n\n// Casting second argument (DrawingSurface) to any,\n// because it is requred by TS definitions and not required at runtime\nconst generator = rough.generator(null, null);\nfunction isTextElement(element) {\n  return element.type === \"text\";\n}\n\nfunction isInputLike(target) {\n  return (\n    target instanceof HTMLInputElement ||\n    target instanceof HTMLTextAreaElement ||\n    target instanceof HTMLSelectElement\n  );\n}\n\nfunction getArrowPoints(element) {\n  const x1 = 0;\n  const y1 = 0;\n  const x2 = element.width;\n  const y2 = element.height;\n  const size = 30; // pixels\n  const distance = Math.hypot(x2 - x1, y2 - y1);\n  // Scale down the arrow until we hit a certain size so that it doesn't look weird\n  const minSize = Math.min(size, distance / 2);\n  const xs = x2 - ((x2 - x1) / distance) * minSize;\n  const ys = y2 - ((y2 - y1) / distance) * minSize;\n  const angle = 20; // degrees\n  const [x3, y3] = rotate(xs, ys, x2, y2, (-angle * Math.PI) / 180);\n  const [x4, y4] = rotate(xs, ys, x2, y2, (angle * Math.PI) / 180);\n  return [x1, y1, x2, y2, x3, y3, x4, y4];\n}\n\nfunction generateDraw(element) {\n  if (element.type === \"selection\") {\n    element.draw = (rc, context, { scrollX, scrollY }) => {\n      const fillStyle = context.fillStyle;\n      context.fillStyle = \"rgba(0, 0, 255, 0.10)\";\n      context.fillRect(\n        element.x + scrollX,\n        element.y + scrollY,\n        element.width,\n        element.height\n      );\n      context.fillStyle = fillStyle;\n    };\n  } else if (element.type === \"rectangle\") {\n    const shape = withCustomMathRandom(element.seed, () => {\n      return generator.rectangle(0, 0, element.width, element.height, {\n        stroke: element.strokeColor,\n        fill: element.backgroundColor,\n      });\n    });\n    element.draw = (rc, context, { scrollX, scrollY }) => {\n      context.translate(element.x + scrollX, element.y + scrollY);\n      rc.draw(shape);\n      context.translate(-element.x - scrollX, -element.y - scrollY);\n    };\n  } else if (element.type === \"ellipse\") {\n    const shape = withCustomMathRandom(element.seed, () =>\n      generator.ellipse(\n        element.width / 2,\n        element.height / 2,\n        element.width,\n        element.height,\n        { stroke: element.strokeColor, fill: element.backgroundColor }\n      )\n    );\n    element.draw = (rc, context, { scrollX, scrollY }) => {\n      context.translate(element.x + scrollX, element.y + scrollY);\n      rc.draw(shape);\n      context.translate(-element.x - scrollX, -element.y - scrollY);\n    };\n  } else if (element.type === \"arrow\") {\n    const [x1, y1, x2, y2, x3, y3, x4, y4] = getArrowPoints(element);\n    const shapes = withCustomMathRandom(element.seed, () => [\n      //    \\\n      generator.line(x3, y3, x2, y2, { stroke: element.strokeColor }),\n      // -----\n      generator.line(x1, y1, x2, y2, { stroke: element.strokeColor }),\n      //    /\n      generator.line(x4, y4, x2, y2, { stroke: element.strokeColor }),\n    ]);\n    element.draw = (rc, context, { scrollX, scrollY }) => {\n      context.translate(element.x + scrollX, element.y + scrollY);\n      shapes.forEach((shape) => rc.draw(shape));\n      context.translate(-element.x - scrollX, -element.y - scrollY);\n    };\n    return;\n  } else if (isTextElement(element)) {\n    element.draw = (rc, context, { scrollX, scrollY }) => {\n      const font = context.font;\n      context.font = element.font;\n      const fillStyle = context.fillStyle;\n      context.fillStyle = element.strokeColor;\n      context.fillText(\n        element.text,\n        element.x + scrollX,\n        element.y + element.actualBoundingBoxAscent + scrollY\n      );\n      context.fillStyle = fillStyle;\n      context.font = font;\n    };\n  } else {\n    throw new Error(\"Unimplemented type \" + element.type);\n  }\n}\n\n// If the element is created from right to left, the width is going to be negative\n// This set of functions retrieves the absolute position of the 4 points.\n// We can't just always normalize it since we need to remember the fact that an arrow\n// is pointing left or right.\n\nfunction getElementAbsoluteX1(element) {\n  return element.width >= 0 ? element.x : element.x + element.width;\n}\nfunction getElementAbsoluteX2(element) {\n  return element.width >= 0 ? element.x + element.width : element.x;\n}\nfunction getElementAbsoluteY1(element) {\n  return element.height >= 0 ? element.y : element.y + element.height;\n}\nfunction getElementAbsoluteY2(element) {\n  return element.height >= 0 ? element.y + element.height : element.y;\n}\n\nfunction setSelection(selection) {\n  const selectionX1 = getElementAbsoluteX1(selection);\n  const selectionX2 = getElementAbsoluteX2(selection);\n  const selectionY1 = getElementAbsoluteY1(selection);\n  const selectionY2 = getElementAbsoluteY2(selection);\n  elements.forEach((element) => {\n    const elementX1 = getElementAbsoluteX1(element);\n    const elementX2 = getElementAbsoluteX2(element);\n    const elementY1 = getElementAbsoluteY1(element);\n    const elementY2 = getElementAbsoluteY2(element);\n    element.isSelected =\n      element.type !== \"selection\" &&\n      selectionX1 <= elementX1 &&\n      selectionY1 <= elementY1 &&\n      selectionX2 >= elementX2 &&\n      selectionY2 >= elementY2;\n  });\n}\n\nfunction clearSelection() {\n  elements.forEach((element) => {\n    element.isSelected = false;\n  });\n}\n\nfunction resetCursor() {\n  document.documentElement.style.cursor = \"\";\n}\n\nfunction deleteSelectedElements() {\n  for (let i = elements.length - 1; i >= 0; --i) {\n    if (elements[i].isSelected) {\n      elements.splice(i, 1);\n    }\n  }\n}\n\nfunction save(state) {\n  // localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(elements));\n  // localStorage.setItem(LOCAL_STORAGE_KEY_STATE, JSON.stringify(state));\n}\n\nfunction restoreFromLocalStorage() {\n  // const savedElements = localStorage.getItem(LOCAL_STORAGE_KEY);\n  // const savedState = localStorage.getItem(LOCAL_STORAGE_KEY_STATE);\n  // return restore(savedElements, savedState);\n}\n\nfunction restore(savedElements, savedState) {\n  try {\n    if (savedElements) {\n      elements.splice(\n        0,\n        elements.length,\n        ...(typeof savedElements === \"string\"\n          ? JSON.parse(savedElements)\n          : savedElements)\n      );\n      elements.forEach((element) => generateDraw(element));\n    }\n    return savedState ? JSON.parse(savedState) : null;\n  } catch (e) {\n    elements.splice(0, elements.length);\n    return null;\n  }\n}\n\nconst KEYS = {\n  ARROW_LEFT: \"ArrowLeft\",\n  ARROW_RIGHT: \"ArrowRight\",\n  ARROW_DOWN: \"ArrowDown\",\n  ARROW_UP: \"ArrowUp\",\n  ESCAPE: \"Escape\",\n  DELETE: \"Delete\",\n  BACKSPACE: \"Backspace\",\n};\n\n// Inline font-awesome icons in order to save on js size rather than including the font awesome react library\nconst SHAPES = [\n  {\n    icon: (\n      // fa-mouse-pointer\n      <svg viewBox=\"0 0 320 512\">\n        <path d=\"M302.189 329.126H196.105l55.831 135.993c3.889 9.428-.555 19.999-9.444 23.999l-49.165 21.427c-9.165 4-19.443-.571-23.332-9.714l-53.053-129.136-86.664 89.138C18.729 472.71 0 463.554 0 447.977V18.299C0 1.899 19.921-6.096 30.277 5.443l284.412 292.542c11.472 11.179 3.007 31.141-12.5 31.141z\" />\n      </svg>\n    ),\n    value: \"selection\",\n  },\n  {\n    icon: (\n      // fa-square\n      <svg viewBox=\"0 0 448 512\">\n        <path d=\"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z\" />\n      </svg>\n    ),\n    value: \"rectangle\",\n  },\n  {\n    icon: (\n      // fa-circle\n      <svg viewBox=\"0 0 512 512\">\n        <path d=\"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z\" />\n      </svg>\n    ),\n    value: \"ellipse\",\n  },\n  {\n    icon: (\n      // fa-long-arrow-alt-right\n      <svg viewBox=\"0 0 448 512\">\n        <path d=\"M313.941 216H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h301.941v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.569 0-33.941l-86.059-86.059c-15.119-15.119-40.971-4.411-40.971 16.971V216z\" />\n      </svg>\n    ),\n    value: \"arrow\",\n  },\n  {\n    icon: (\n      // fa-font\n      <svg viewBox=\"0 0 448 512\">\n        <path d=\"M432 416h-23.41L277.88 53.69A32 32 0 0 0 247.58 32h-47.16a32 32 0 0 0-30.3 21.69L39.41 416H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-19.58l23.3-64h152.56l23.3 64H304a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM176.85 272L224 142.51 271.15 272z\" />\n      </svg>\n    ),\n    value: \"text\",\n  },\n];\n\nconst shapesShortcutKeys = SHAPES.map((shape) => shape.value[0]);\n\nfunction capitalize(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\nfunction findElementByKey(key) {\n  const defaultElement = \"selection\";\n  return SHAPES.reduce((element, shape) => {\n    if (shape.value[0] !== key) return element;\n    return shape.value;\n  }, defaultElement);\n}\n\nfunction isArrowKey(keyCode) {\n  return (\n    keyCode === KEYS.ARROW_LEFT ||\n    keyCode === KEYS.ARROW_RIGHT ||\n    keyCode === KEYS.ARROW_DOWN ||\n    keyCode === KEYS.ARROW_UP\n  );\n}\n\nfunction getSelectedIndices() {\n  const selectedIndices = [];\n  elements.forEach((element, index) => {\n    if (element.isSelected) {\n      selectedIndices.push(index);\n    }\n  });\n  return selectedIndices;\n}\n\nconst someElementIsSelected = () =>\n  elements.some((element) => element.isSelected);\nconst ELEMENT_SHIFT_TRANSLATE_AMOUNT = 5;\nconst ELEMENT_TRANSLATE_AMOUNT = 1;\nlet lastCanvasWidth = -1;\nlet lastCanvasHeight = -1;\nlet lastMouseUp = null;\n\n\nexport default class App extends React.Component {\n  \n  constructor() {\n    const socketRef = React.createRef();\n    super(...arguments);\n    this.state = {\n      draggingElement: null,\n      resizingElement: null,\n      elementType: \"circle\",\n      exportBackground: true,\n      currentItemStrokeColor: \"#000000\",\n      currentItemBackgroundColor: \"#ffffff\",\n      viewBackgroundColor: \"#ffffff\",\n      scrollX: 0,\n      scrollY: 0,\n    };\n\n    this.onResize = () => {\n      this.forceUpdate();\n    };\n\n    this.onKeyDown = (event) => {\n      if (isInputLike(event.target)) return;\n      if (event.key === KEYS.ESCAPE) {\n        clearSelection();\n        this.forceUpdate();\n        event.preventDefault();\n      } else if (event.key === KEYS.BACKSPACE || event.key === KEYS.DELETE) {\n        deleteSelectedElements();\n        this.forceUpdate();\n        event.preventDefault();\n      } else if (isArrowKey(event.key)) {\n        const step = event.shiftKey\n          ? ELEMENT_SHIFT_TRANSLATE_AMOUNT\n          : ELEMENT_TRANSLATE_AMOUNT;\n        elements.forEach((element) => {\n          if (element.isSelected) {\n            if (event.key === KEYS.ARROW_LEFT) element.x -= step;\n            else if (event.key === KEYS.ARROW_RIGHT) element.x += step;\n            else if (event.key === KEYS.ARROW_UP) element.y -= step;\n            else if (event.key === KEYS.ARROW_DOWN) element.y += step;\n          }\n        });\n        this.forceUpdate();\n        event.preventDefault();\n        // Send backward: Cmd-Shift-Alt-B\n      } else if (\n        event.metaKey &&\n        event.shiftKey &&\n        event.altKey &&\n        event.code === \"KeyB\"\n      ) {\n        this.moveOneLeft();\n        event.preventDefault();\n        // Send to back: Cmd-Shift-B\n      } else if (event.metaKey && event.shiftKey && event.code === \"KeyB\") {\n        this.moveAllLeft();\n        event.preventDefault();\n        // Bring forward: Cmd-Shift-Alt-F\n      } else if (\n        event.metaKey &&\n        event.shiftKey &&\n        event.altKey &&\n        event.code === \"KeyF\"\n      ) {\n        this.moveOneRight();\n        event.preventDefault();\n        // Bring to front: Cmd-Shift-F\n      } else if (event.metaKey && event.shiftKey && event.code === \"KeyF\") {\n        this.moveAllRight();\n        event.preventDefault();\n        // Select all: Cmd-A\n      } else if (event.metaKey && event.code === \"KeyA\") {\n        elements.forEach((element) => {\n          element.isSelected = true;\n        });\n        this.forceUpdate();\n        event.preventDefault();\n      } else if (shapesShortcutKeys.includes(event.key.toLowerCase())) {\n        this.setState({ elementType: findElementByKey(event.key) });\n      } else if (event.metaKey && event.code === \"KeyZ\") {\n        let lastEntry = stateHistory.pop();\n        // If nothing was changed since last, take the previous one\n        if (generateHistoryCurrentEntry() === lastEntry) {\n          lastEntry = stateHistory.pop();\n        }\n        if (lastEntry !== undefined) {\n          restoreHistoryEntry(lastEntry);\n        }\n        this.forceUpdate();\n        event.preventDefault();\n      }\n    };\n\n    this.deleteSelectedElements = () => {\n      deleteSelectedElements();\n      this.forceUpdate();\n    };\n\n    this.clearCanvas = () => {\n      if (window.confirm(\"This will clear the whole canvas. Are you sure?\")) {\n        elements.splice(0, elements.length);\n        this.setState({\n          viewBackgroundColor: \"#ffffff\",\n          scrollX: 0,\n          scrollY: 0,\n        });\n        this.forceUpdate();\n      }\n    };\n\n    this.moveAllLeft = () => {\n      moveAllLeft(elements, getSelectedIndices());\n      this.forceUpdate();\n    };\n\n    this.moveOneLeft = () => {\n      moveOneLeft(elements, getSelectedIndices());\n      this.forceUpdate();\n    };\n\n    this.moveAllRight = () => {\n      moveAllRight(elements, getSelectedIndices());\n      this.forceUpdate();\n    };\n\n    this.moveOneRight = () => {\n      moveOneRight(elements, getSelectedIndices());\n      this.forceUpdate();\n    };\n\n    this.handleWheel = (e) => {\n      e.preventDefault();\n      const { deltaX, deltaY } = e;\n      this.setState((state) => ({\n        scrollX: state.scrollX - deltaX,\n        scrollY: state.scrollY - deltaY,\n      }));\n    };\n\n    this.handlemousedown = (e) => {\n      console.log(\"WORKING\")\n      if(e.type !== \"mousedown\"){\n        e = e.detail\n      }\n     \n      const canvasWidth = window.innerWidth - CANVAS_WINDOW_OFFSET_LEFT;\n      const canvasHeight = window.innerHeight - CANVAS_WINDOW_OFFSET_TOP;\n\n      const canvas = document.getElementById(\"canvas\");\n      const rc = rough.canvas(canvas);\n      const context = canvas.getContext(\"2d\");\n\n      if (lastMouseUp !== null) {\n        // Unfortunately, sometimes we don't get a mouseup after a mousedown,\n        // this can happen when a contextual menu or alert is triggered. In order to avoid\n        // being in a weird state, we clean up on the next mousedown\n        lastMouseUp(e);\n      }\n\n      // only handle left mouse button\n      if (e.button !== 0) return;\n\n      // fixes mousemove causing selection of UI texts #32\n      //if(e.type === \"mousedown\") e.preventDefault();\n\n      // Preventing the event above disables default behavior\n      //  of defocusing potentially focused input, which is what we want\n      //  when clicking inside the canvas.\n      if (isInputLike(document.activeElement)) {\n        document.activeElement.blur();\n      }\n      // Handle scrollbars dragging\n      const { isOverHorizontalScrollBar, isOverVerticalScrollBar } =\n        isOverScrollBars(\n          e.clientX - CANVAS_WINDOW_OFFSET_LEFT,\n          e.clientY - CANVAS_WINDOW_OFFSET_TOP,\n          canvasWidth,\n          canvasHeight,\n          this.state.scrollX,\n          this.state.scrollY\n        );\n\n      const x = e.clientX - CANVAS_WINDOW_OFFSET_LEFT - this.state.scrollX;\n      const y = e.clientY - CANVAS_WINDOW_OFFSET_TOP - this.state.scrollY;\n\n      const element = newElement(\n        this.state.elementType,\n        x,\n        y,\n        this.state.currentItemStrokeColor,\n        this.state.currentItemBackgroundColor\n      );\n\n      let resizeHandle = false;\n      let isDraggingElements = false;\n      let isResizingElements = false;\n\n      if (this.state.elementType === \"selection\") {\n        \n        //find the element that needs to be resized \n        const resizeElement = elements.find((element) => {\n          return resizeTest(element, x, y, {\n            scrollX: this.state.scrollX,\n            scrollY: this.state.scrollY,\n            viewBackgroundColor: this.state.viewBackgroundColor,\n          });\n        });\n        \n        //keep the resizing element in a global state\n        this.setState({\n          resizingElement: resizeElement ? resizeElement : null,\n        });\n\n        if (resizeElement) {\n          resizeHandle = resizeTest(resizeElement, x, y, {\n            scrollX: this.state.scrollX,\n            scrollY: this.state.scrollY,\n            viewBackgroundColor: this.state.viewBackgroundColor,\n          });\n\n          document.documentElement.style.cursor = `${resizeHandle}-resize`;\n          isResizingElements = true;\n\n        } else {\n          let hitElement = null;\n          // We need to to hit testing from front (end of the array) to back (beginning of the array)\n          for (let i = elements.length - 1; i >= 0; --i) {\n            if (hitTest(elements[i], x, y)) {\n              hitElement = elements[i];\n              break;\n            }\n          }\n          // If we click on something\n          if (hitElement) {\n            if (hitElement.isSelected) {\n              // If that element is not already selected, do nothing,\n              // we're likely going to drag it\n            } else {\n              // We unselect every other elements unless shift is pressed\n              if (!e.shiftKey) {\n                clearSelection();\n              }\n              // No matter what, we select it\n              hitElement.isSelected = true;\n            }\n          } else {\n            // If we don't click on anything, let's remove all the selected elements\n            clearSelection();\n          }\n          isDraggingElements = someElementIsSelected();\n          if (isDraggingElements) {\n            document.documentElement.style.cursor = \"move\";\n          }\n        }\n      }\n      if (isTextElement(element)) {\n        resetCursor();\n        const text = prompt(\"What text do you want?\");\n        if (text === null) {\n          return;\n        }\n        const fontSize = 20;\n        element.text = text;\n        element.font = `${fontSize}px Virgil`;\n        const font = context.font;\n        context.font = element.font;\n        const textMeasure = context.measureText(element.text);\n        const width = textMeasure.width;\n        const actualBoundingBoxAscent =\n          textMeasure.actualBoundingBoxAscent || fontSize;\n        const actualBoundingBoxDescent =\n          textMeasure.actualBoundingBoxDescent || 0;\n        element.actualBoundingBoxAscent = actualBoundingBoxAscent;\n        context.font = font;\n        const height = actualBoundingBoxAscent + actualBoundingBoxDescent;\n        // Center the text\n        element.x -= width / 2;\n        element.y -= actualBoundingBoxAscent;\n        element.width = width;\n        element.height = height;\n      }\n\n      generateDraw(element);\n      elements.push(element);\n      if (this.state.elementType === \"text\") {\n        this.setState({\n          draggingElement: null,\n          elementType: \"selection\",\n        });\n        element.isSelected = true;\n      } else {\n        this.setState({ draggingElement: element });\n      }\n      let lastX = x;\n      let lastY = y;\n      if (isOverHorizontalScrollBar || isOverVerticalScrollBar) {\n        lastX = e.clientX - CANVAS_WINDOW_OFFSET_LEFT;\n        lastY = e.clientY - CANVAS_WINDOW_OFFSET_TOP;\n      }\n\n      const onMouseMove = (e) => {\n        console.log(e.clientY)\n        console.log(e.clientX)\n        if(e.type !== \"mousemove\"){\n          e = e.detail\n        }\n        if(e.type === \"mousemove\"){\n          const target = e.target;\n          if (!(target instanceof HTMLElement)) {\n            return;\n          }\n        }\n\n        if (isOverHorizontalScrollBar) {\n          const x = e.clientX - CANVAS_WINDOW_OFFSET_LEFT;\n          const dx = x - lastX;\n          this.setState((state) => ({ scrollX: state.scrollX - dx }));\n          lastX = x;\n          return;\n        }\n        if (isOverVerticalScrollBar) {\n          const y = e.clientY - CANVAS_WINDOW_OFFSET_TOP;\n          const dy = y - lastY;\n          this.setState((state) => ({ scrollY: state.scrollY - dy }));\n          lastY = y;\n          return;\n        }\n        if (isResizingElements && this.state.resizingElement) {\n          const el = this.state.resizingElement;\n          const selectedElements = elements.filter((el) => el.isSelected);\n          if (selectedElements.length === 1) {\n            const x =\n              e.clientX - CANVAS_WINDOW_OFFSET_LEFT - this.state.scrollX;\n            const y =\n              e.clientY - CANVAS_WINDOW_OFFSET_TOP - this.state.scrollY;\n            selectedElements.forEach((element) => {\n              switch (resizeHandle) {\n                case \"nw\":\n                  element.width += element.x - lastX;\n                  element.height += element.y - lastY;\n                  element.x = lastX;\n                  element.y = lastY;\n                  break;\n                case \"ne\":\n                  element.width = lastX - element.x;\n                  element.height += element.y - lastY;\n                  element.y = lastY;\n                  break;\n                case \"sw\":\n                  element.width += element.x - lastX;\n                  element.x = lastX;\n                  element.height = lastY - element.y;\n                  break;\n                case \"se\":\n                  element.width += x - lastX;\n                  if (e.shiftKey) {\n                    element.height = element.width;\n                  } else {\n                    element.height += y - lastY;\n                  }\n                  break;\n                case \"n\":\n                  element.height += element.y - lastY;\n                  element.y = lastY;\n                  break;\n                case \"w\":\n                  element.width += element.x - lastX;\n                  element.x = lastX;\n                  break;\n                case \"s\":\n                  element.height = lastY - element.y;\n                  break;\n                case \"e\":\n                  element.width = lastX - element.x;\n                  break;\n              }\n              el.x = element.x;\n              el.y = element.y;\n              generateDraw(el);\n            });\n            lastX = x;\n            lastY = y;\n            // We don't want to save history when resizing an element\n            skipHistory = true;\n            this.forceUpdate();\n            return;\n          }\n        }\n        if (isDraggingElements) {\n          const selectedElements = elements.filter((el) => el.isSelected);\n          if (selectedElements.length) {\n            const x =\n              e.clientX - CANVAS_WINDOW_OFFSET_LEFT - this.state.scrollX;\n            const y =\n              e.clientY - CANVAS_WINDOW_OFFSET_TOP - this.state.scrollY;\n            selectedElements.forEach((element) => {\n              element.x += x - lastX;\n              element.y += y - lastY;\n            });\n            lastX = x;\n            lastY = y;\n            // We don't want to save history when dragging an element to initially size it\n            skipHistory = true;\n            this.forceUpdate();\n            return;\n          }\n        }\n        // It is very important to read this.state within each move event,\n        // otherwise we would read a stale one!\n        const draggingElement = this.state.draggingElement;\n        if (!draggingElement) return;\n        let width =\n          e.clientX -\n          CANVAS_WINDOW_OFFSET_LEFT -\n          draggingElement.x -\n          this.state.scrollX;\n        let height =\n          e.clientY -\n          CANVAS_WINDOW_OFFSET_TOP -\n          draggingElement.y -\n          this.state.scrollY;\n        draggingElement.width = width;\n        // Make a perfect square or circle when shift is enabled\n        draggingElement.height = e.shiftKey\n          ? Math.abs(width) * Math.sign(height)\n          : height;\n        console.log(\"width \", width)\n        console.log(\"height \", height)\n        generateDraw(draggingElement);\n        if (this.state.elementType === \"selection\") {\n          setSelection(draggingElement);\n        }\n        // We don't want to save history when moving an element\n        skipHistory = true;\n        this.forceUpdate();\n      };\n\n      const onMouseUp = (e) => {\n        const { draggingElement, elementType } = this.state;\n        lastMouseUp = null;\n        window.removeEventListener(\"mousemove\", onMouseMove);\n        window.removeEventListener(\"mouseup\", onMouseUp);\n        window.removeEventListener(\"canvasmouseup\", onMouseUp);\n        window.removeEventListener(\"canvasmousemove\", onMouseMove);\n        resetCursor();\n        // if no element is clicked, clear the selection and redraw\n        if (draggingElement === null) {\n          clearSelection();\n          this.forceUpdate();\n          return;\n        }\n        if (elementType === \"selection\") {\n          if (isDraggingElements) {\n            isDraggingElements = false;\n          }\n          elements.pop();\n        } else {\n          draggingElement.isSelected = true;\n        }\n        this.setState({\n          draggingElement: null,\n          elementType: \"selection\",\n        });\n        this.forceUpdate();\n      };\n\n      lastMouseUp = onMouseUp;\n      window.addEventListener(\"mousemove\", onMouseMove);\n      window.addEventListener(\"mouseup\", onMouseUp);\n      //We don't want to save history on mouseDown, only on mouseUp when it's fully configured\n      skipHistory = true;\n      this.forceUpdate();\n    }\n  }\n\n\n  componentDidMount() {\n    document.addEventListener(\"keydown\", this.onKeyDown, false);\n    window.addEventListener(\"resize\", this.onResize, false);\n    document.getElementById(\"canvas\").addEventListener(\"canvasmousedown\", this.handlemousedown);\n    const savedState = restoreFromLocalStorage();\n    if (savedState) {\n      this.setState(savedState);\n    }\n    // const socketRef = React.createRef()\n    // socketRef.current = io.connect(\"http://localhost:5000\")\n\n    // socketRef.current.on(\"liveStart\", ({event}) => {\n    //   //console.log(event)\n    //   generateDraw(event)\n    //   elements.push(event);\n    //   this.setState({ draggingElement: event });\n    // })\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"keydown\", this.onKeyDown, false);\n    window.removeEventListener(\"resize\", this.onResize, false);\n    const socketRef = React.createRef()\n    socketRef.current = io.connect(\"http://localhost:5000\")\n    socketRef.current.on(\"liveStart\", ({event}) => {\n      console.log(event)\n      generateDraw(event)\n    })\n  }\n\n  render() {\n    \n    const canvasWidth = window.innerWidth - CANVAS_WINDOW_OFFSET_LEFT;\n    const canvasHeight = window.innerHeight - CANVAS_WINDOW_OFFSET_TOP;\n   \n    return (\n      <div\n        className=\"container\"\n\n        onCut = {(e) => {\n          e.clipboardData.setData(\n            \"text/plain\",\n            JSON.stringify(elements.filter((element) => element.isSelected))\n          );\n          deleteSelectedElements();\n          this.forceUpdate();\n          e.preventDefault();\n        }}\n\n        onCopy = {(e) => {\n          e.clipboardData.setData(\n            \"text/plain\",\n            JSON.stringify(elements.filter((element) => element.isSelected))\n          );\n          e.preventDefault();\n        }}\n\n        onPaste = {(e) => {\n          const paste = e.clipboardData.getData(\"text\");\n          let parsedElements;\n          try {\n            parsedElements = JSON.parse(paste);\n          } catch (e) {}\n          if (\n            Array.isArray(parsedElements) &&\n            parsedElements.length > 0 &&\n            parsedElements[0].type // need to implement a better check here...\n          ) {\n            clearSelection();\n            parsedElements.forEach((parsedElement) => {\n              parsedElement.x += 10;\n              parsedElement.y += 10;\n              parsedElement.seed = randomSeed();\n              generateDraw(parsedElement);\n              elements.push(parsedElement);\n            });\n            this.forceUpdate();\n          }\n          e.preventDefault();\n        }}\n      >\n        <div className=\"sidePanel\">\n          <h4>Shapes</h4>\n          <div className=\"panelTools\">\n            {SHAPES.map(({ value, icon }) => (\n              <label\n                key={value}\n                className=\"tool\"\n                title={`${capitalize(value)} - ${capitalize(value)[0]}`}\n              >\n                <input\n                  type=\"radio\"\n                  className = {value}\n                  checked={this.state.elementType === value}\n                  onChange={() => {\n                    this.setState({ elementType: value });\n                    clearSelection();\n                    document.documentElement.style.cursor =\n                      value === \"text\" ? \"text\" : \"crosshair\";\n                    this.forceUpdate();\n                  }}\n                />\n                <div className=\"toolIcon\">{icon}</div>\n              </label>\n            ))}\n          </div>\n          <h4>Colors</h4>\n          <div className=\"panelColumn\">\n            <label>\n              <input\n                type=\"color\"\n                value={this.state.viewBackgroundColor}\n                onChange={(e) => {\n                  this.setState({ viewBackgroundColor: e.target.value });\n                }}\n              />\n              Background\n            </label>\n            <label>\n              <input\n                type=\"color\"\n                value={this.state.currentItemStrokeColor}\n                onChange={(e) => {\n                  this.setState({ currentItemStrokeColor: e.target.value });\n                }}\n              />\n              Shape Stroke\n            </label>\n            <label>\n              <input\n                type=\"color\"\n                value={this.state.currentItemBackgroundColor}\n                onChange={(e) => {\n                  this.setState({ currentItemBackgroundColor: e.target.value });\n                }}\n              />\n              Shape Background\n            </label>\n          </div>\n          <h4>Canvas</h4>\n          <div className=\"panelColumn\">\n            <button\n              onClick={this.clearCanvas}\n              title=\"Clear the canvas & reset background color\"\n            >\n              Clear canvas\n            </button>\n          </div>\n          <h4>Export</h4>\n          <div className=\"panelColumn\">\n            <button\n              onClick={() => {\n                exportAsPNG(this.state);\n              }}\n            >\n              Export to png\n            </button>\n            <label>\n              <input\n                type=\"checkbox\"\n                checked={this.state.exportBackground}\n                onChange={(e) => {\n                  this.setState({ exportBackground: e.target.checked });\n                }}\n              />\n              background\n            </label>\n          </div>\n          <h4>Save/Load</h4>\n          <div className=\"panelColumn\">\n            <button\n              onClick={() => {\n                saveAsJSON();\n              }}\n            >\n              Save as...\n            </button>\n            <button\n              onClick={() => {\n                loadFromJSON().then(() => this.forceUpdate());\n              }}\n            >\n              Load file...\n            </button>\n          </div>\n          {someElementIsSelected() && (\n            <>\n              <h4>Shape options</h4>\n              <div className=\"panelColumn\">\n                <button onClick={this.deleteSelectedElements}>Delete</button>\n                <button onClick={this.moveOneRight}>Bring forward</button>\n                <button onClick={this.moveAllRight}>Bring to front</button>\n                <button onClick={this.moveOneLeft}>Send backward</button>\n                <button onClick={this.moveAllLeft}>Send to back</button>\n              </div>\n            </>\n          )}\n        </div>\n\n        <canvas\n          id = \"canvas\"\n          style = {{\n            width: canvasWidth,\n            height: canvasHeight,\n          }}\n          width = {canvasWidth * window.devicePixelRatio}\n          height = {canvasHeight * window.devicePixelRatio}\n          ref = {(canvas) => {\n            if (this.removeWheelEventListener) {\n              this.removeWheelEventListener();\n              \n              this.removeWheelEventListener = undefined;\n            }\n            if (canvas) {\n              canvas.addEventListener(\"wheel\", this.handleWheel, {\n                passive: false,\n              });\n              this.removeWheelEventListener = () =>\n                canvas.removeEventListener(\"wheel\", this.handleWheel);\n              // Whenever React sets the width/height of the canvas element,\n              // the context loses the scale transform. We need to re-apply it\n              if (\n                canvasWidth !== lastCanvasWidth ||\n                canvasHeight !== lastCanvasHeight\n              ) {\n                lastCanvasWidth = canvasWidth;\n                lastCanvasHeight = canvasHeight;\n                canvas\n                  .getContext(\"2d\")\n                  .scale(window.devicePixelRatio, window.devicePixelRatio);\n              }\n            }\n          }}\n\n          onMouseDown={this.handlemousedown}\n        />\n      </div>\n    );\n  }\n\n  componentDidUpdate() {\n    const canvas = document.getElementById(\"canvas\");\n    const rc = rough.canvas(canvas);\n    const context = canvas.getContext(\"2d\");\n    renderScene(rc, canvas, {\n      \n      scrollX: this.state.scrollX,\n      scrollY: this.state.scrollY,\n      viewBackgroundColor: this.state.viewBackgroundColor,\n    });\n    save(this.state);\n    if (!skipHistory) {\n      pushHistoryEntry(generateHistoryCurrentEntry());\n    }\n    skipHistory = false;\n  }\n}\n","import React, { useEffect,useRef} from \"react\";\nimport DrawingBoardLive from '../DrawingBoard/drawBoardPlayer'\nimport * as io from 'socket.io-client'\n\nconst env = process.env.NODE_ENV; // current environment\nlet url\nif(env === \"development\") {\n  url = 'http://localhost:5000/'\n}else{\n  url = 'https://fierce-reef-05156.herokuapp.com/' \n}\n\n\nfunction LiveClasses() {\n    const socketRef = useRef()\n    useEffect(() => {\n        socketRef.current = io.connect(url)\n\n        socketRef.current.on(\"liveStart\", ({event}) => {\n            //console.log(event)\n            let eve = new MouseEvent(\"mousedown\", {\n                bubbles: true,\n                cancelable: true,\n                button: event.button,\n                clientX : event.clientX,\n                clientY : event.clientY,\n                shiftKey : event.shiftKey,\n              });\n              //document.getElementsByClassName(event.type)[0].click()\n              if(document.getElementById(\"canvas\"))document.getElementById(\"canvas\").dispatchEvent(eve);\n          })\n\n          //similar to click event in the Player.js\n          socketRef.current.on(\"toolChange\", ({event}) => {\n            console.log(event)\n            if(event === \"rectangle\" || event === \"ellipse\" || event === \"arrow\" || event === \"selection\") document.getElementsByClassName(event)[0].click();\n          })\n\n          socketRef.current.on(\"liveDrawing\", ({event}) => {\n            console.log(event)\n            let eve = new MouseEvent(\"mousemove\", {\n                bubbles: true,\n                cancelable: true,\n                button: event.button,\n                clientX : event.clientX,\n                clientY : event.clientY,\n                shiftKey : event.shiftKey,\n              });\n              //document.getElementsByClassName(event.type)[0].click()\n              if(document.getElementById(\"canvas\"))document.getElementById(\"canvas\").dispatchEvent(eve);\n          })\n          socketRef.current.on(\"liveEnd\", ({event}) => {\n            let eve = new MouseEvent(\"mouseup\", {\n                bubbles: true,\n                cancelable: true\n              });\n              if(document.getElementById(\"canvas\"))document.getElementById(\"canvas\").dispatchEvent(eve);\n          })\n    }, [socketRef])\n\n    return (\n        <>\n            <DrawingBoardLive/>\n        </>\n    )\n}\n\nexport default LiveClasses","const filenameReducer = (state = \"index.html\", action) => {\n  switch (action.type) {\n    case \"js\":\n      state = \"script.js\";\n      return state;\n    case \"css\":\n      state = \"style.css\";\n      return state;\n    case \"html\":\n      state = \"index.html\";\n      return state;\n    default:\n      return state;\n  }\n};\n\n\nconst languageReducer = (state=\"c\", action) => {\n  switch(action.type){\n    case \"c\":\n      state = \"c\";\n      return state;\n    case \"c99\":\n      state = \"c99\";\n      return state;\n    case \"cpp\":\n      state = \"cpp\";\n      return state;\n    case \"cpp14\":\n      state = \"cpp14\";\n      return state;\n    case \"cpp17\":\n      state = \"cpp17\";\n      return state;\n    case \"python2\":\n      state = \"python2\";\n      return state;\n    case \"python3\":\n      state = \"python3\";\n      return state;\n    default:\n      return state;\n  }\n}\n\nexport default filenameReducer;\n","import files from \"../assets/files\"\n\nconst outputModalReducer = (state = false, action) => {\n\n    switch(action.type){\n        case \"outputtrue\":\n            state = true\n            return state\n        case \"outputfalse\":\n            state = false\n            return state\n        default:\n            return state\n    }\n}\n\nexport const outputSrcReducer = (state = \"\", action) => {\n\n    switch(action.type){\n        case \"setSrcdoc\":\n            state = `\n            <html>\n              <body>${files[\"index.html\"].value}</body>\n              <style>${files[\"style.css\"].value}</style>\n              <script>${files[\"script.js\"].value}</script>\n            </html>\n          `\n            return state\n        default:\n            return state\n    }\n}\n\nexport default outputModalReducer;","const languageReducer = (state=\"c\", action) => {\n    switch(action.type){\n      case \"c\":\n        state = \"c\";\n        return state;\n      case \"c99\":\n        state = \"c99\";\n        return state;\n      case \"cpp\":\n        state = \"cpp\";\n        return state;\n      case \"cpp14\":\n        state = \"cpp14\";\n        return state;\n      case \"cpp17\":\n        state = \"cpp17\";\n        return state;\n      case \"python2\":\n        state = \"python2\";\n        return state;\n      case \"python3\":\n        state = \"python3\";\n        return state;\n      default:\n        return state;\n    }\n  }\n  \n  export default languageReducer;\n  ","import filenameReducer from \"./filenameSelection\";\nimport outputModalReducer, { outputSrcReducer } from \"./outputModalReducer\";\nimport { combineReducers } from \"redux\";\nimport languageReducer from \"./languageSelection\";\nconst allReducers = combineReducers({\n    fileName: filenameReducer,\n    outputModal: outputModalReducer,\n    srcDocs: outputSrcReducer,\n    language:languageReducer\n})\n\nexport default allReducers;\n","import React, {useEffect} from 'react'\nimport {useHistory} from \"react-router-dom\";\nimport './styles.css'\nfunction Card(props) {\n    const history = useHistory();\n    useEffect(() => {\n        const mainWindow = document.getElementById(\"lectureCard\")\n        for(let i=0;i<props.lectures.length;i++){\n            var lecture = document.createElement(\"div\")\n            var playButton = document.createElement(\"button\")\n            playButton.textContent = \"Play Lecture\"\n            var nameHeading = document.createElement(\"h3\")\n            var creator = document.createElement(\"h3\")\n            var language = document.createElement(\"h3\")\n            nameHeading.className = \"nameoflecture\"\n            creator.className = \"nameofcreator\" \n            language.className = \"languageofLecture\"\n            playButton.className = props.lectures[i].type + props.lectures[i].language\n            playButton.id = props.lectures[i].id \n            lecture.appendChild(nameHeading)\n            lecture.appendChild(creator)\n            lecture.appendChild(language)\n            lecture.appendChild(playButton)\n            nameHeading.innerHTML = \"Name - \" + props.lectures[i].name\n            creator.innerHTML = \"Creator - \" + props.lectures[i].creator\n            if(props.lectures[i].language !== ''){\n                language.innerHTML = \"Language- \" + props.lectures[i].language\n            }\n            mainWindow.appendChild(lecture)\n        }\n        \n        mainWindow.addEventListener(\"click\", (e) => {\n            const id =  e.target.id\n            console.log(e)\n            const type =  e.target.className\n            console.log(type)\n             console.log(e.target.id)\n            history.push({\n                pathname:'/videoplayer',\n                state:{id,type}\n            });\n        })\n    },[])   \n\n    return (\n        <>\n        <div id=\"lectureCard\">\n        </div>\n        </>    \n    )\n}\n\nexport default Card","import React , {useEffect, useLayoutEffect, useState} from 'react'\nimport firebase from 'firebase/app'\nimport 'firebase/firestore'\nimport Card from '../Card/card'\nfunction Preloader(){\n    return(\n      <div className = \"loader\">\n      <div className =\"preloader\">\n      <div className =\"box\">\n          <div className =\"box__inner\">\n              <div className =\"box__back-flap\"></div>\n              <div className =\"box__right-flap\"></div>\n              <div className =\"box__front-flap\"></div>\n              <div className =\"box__left-flap\"></div>\n              <div className =\"box__front\"></div>\n          </div>\n      </div>\n      <div className =\"box\">\n          <div className =\"box__inner\">\n              <div className =\"box__back-flap\"></div>\n              <div className =\"box__right-flap\"></div>\n              <div className =\"box__front-flap\"></div>\n              <div className =\"box__left-flap\"></div>\n              <div className =\"box__front\"></div>\n          </div>\n      </div>\n      <div className =\"line\">\n          <div className =\"line__inner\"></div>\n      </div>\n      <div className =\"line\">\n          <div className =\"line__inner\"></div>\n      </div>\n      <div className =\"line\">\n          <div className =\"line__inner\"></div>\n      </div>\n      <div className =\"line\">\n          <div className =\"line__inner\"></div>\n      </div>\n      <div className =\"line\">\n          <div className =\"line__inner\"></div>\n      </div>\n      <div className =\"line\">\n          <div className =\"line__inner\"></div>\n      </div>\n      <div className =\"line\">\n          <div className =\"line__inner\"></div>\n      </div>\n  </div>\n  </div>\n    )\n  }\nfunction AllLectures() {\n    const [lectures, setLectures] = useState('')\n    let lecturesArray = []\n    const [isLoading, setLoading] = useState(false)\n    useEffect(() => {\n        firebase.firestore().collection(\"recordIndex\").orderBy(\"createdAt\", 'desc')\n        .limit(10).get().then((result) => {\n            result.forEach((doc) => {\n                lecturesArray.push(doc.data())\n            })\n            setLectures(lecturesArray)\n            setLoading(true)\n        })\n    }, [])\n    return (\n        <>\n            {isLoading ? <Card lectures={lectures}/>: <Preloader/>}\n        </>\n    )\n}\n\nexport default AllLectures","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport { createStore, compose, applyMiddleware} from 'redux';\nimport { Provider } from 'react-redux';\nimport './index.css';\nimport Recorder from './components/Recorder/Recorder';\nimport Video from './components/Player/Player';\nimport RecorderForm from './components/RecorderForm/recorderForm';\nimport DrawingBoard from './components/DrawingBoard/drawBoard';\nimport DrawingBoardPlayer from './components/DrawingBoard/drawBoardPlayer'\nimport allReducer from './reducers';\nimport LiveClasses from './components/LiveClasses/liveClasses';\nimport thunk from 'redux-thunk'\nimport firebase from 'firebase/app';\nimport StartingComponent from './components/StartingComponent/startingCompoent';\nimport AllLectures from './components/Lectures/allLectures';\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAp2cQvNNp8fUKOv6kO_7wR5IsKROCoh14\",\n  authDomain: \"engage-6ef42.firebaseapp.com\",\n  projectId: \"engage-6ef42\",\n  storageBucket: \"engage-6ef42.appspot.com\",\n  messagingSenderId: \"27842359842\",\n  appId: \"1:27842359842:web:e8f5b15f6a86ac66fa507b\",\n  measurementId: \"G-EVEY2DP36T\",\n};\n\nif (firebase.apps.length===0){\n  firebase.initializeApp(firebaseConfig);\n}\n\nconst middleware = [thunk]\n\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(\n  allReducer, \n  composeEnhancer(applyMiddleware(...middleware)),\n);\n\nReactDOM.render(\n  <Provider store={store}>\n  <React.StrictMode>\n    <Router>\n      <Switch>\n        <Route exact path = \"/lectures\" component = {AllLectures} />\n        <Route exact path = \"/drawboard\" component = {DrawingBoard}/>\n        <Route exact path = \"/drawboardlive\" component = {LiveClasses}/>\n        <Route exact path = \"/recordform\" component = {RecorderForm}/>\n        <Route exact path = \"/recorder\" component = {Recorder} ide=\"web\"/>\n        <Route exact path = \"/videoplayer\" component = {Video}/>\n        <Route exact path = \"/\" component = {StartingComponent}/>\n    </Switch>\n    </Router>\n  </React.StrictMode>\n  </Provider>,\n  document.getElementById('root')\n);\n","import React from 'react';\nimport {useHistory} from \"react-router-dom\";\n\nexport default function StartingComponent() {\n\n    const history = useHistory();\n    const navigateToLectureScreen = () => history.push('/lectures')\n    const navigateToDrawBoard = () => history.push('/drawboard')\n    const navigateToDrawBoardLive = () => history.push('/drawboardlive')\n    const navigateToRecorderDraw = () => history.push('/recorder/drawboard');\n    const navigateToRecordForm = () => history.push('/recordform');\n    const navigateToPlayerDraw = () => history.push('/videoplayer/drawboard');\n    return (\n        <>\n        <button className = \"recordWebD\" onClick={navigateToRecordForm}>Recorder A Lecture</button>\n        {/* <button className = \"recordOther\" onClick={navigateToRecorderOther}>Recorder with Other</button> */}\n        <button className = \"playWebD\" onClick={navigateToLectureScreen}>Watch lectures </button>\n        {/* <button className = \"playOther\" onClick={navigateToPlayerOther}>Player with Other</button> */}\n        <button onClick={navigateToDrawBoard}>Drawing Board</button>\n        <button className = \"recordWebD\" onClick={navigateToRecorderDraw}>Recorder with Drawing Board</button>\n        {/* <button className = \"recordOther\" onClick={navigateToRecorderOther}>Recorder with Other</button> */}\n        <button className = \"playWebD\" onClick={navigateToDrawBoardLive}>Drawing Board Live</button>\n        </>\n    )\n}"],"sourceRoot":""}